(window.webpackJsonp=window.webpackJsonp||[]).push([[99],{439:function(s,a,t){"use strict";t.r(a);var e=t(1),r=Object(e.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[s._v("提示")]),s._v(" "),a("p",[a("code",[s._v("镜像")]),s._v("：相当于python里面类的概念，是静态的，不能直接使用"),a("br"),s._v(" "),a("code",[s._v("容器")]),s._v("：是通过镜像创建的，相当于实例的概念，是动态的，可以访问的"),a("br"),s._v(" "),a("code",[s._v("仓库")]),s._v("：存放镜像的地方\n"),a("code",[s._v("docker宿主机")]),s._v("：你的docker安装在哪一个机器，那个机器就是宿主机")])]),s._v(" "),a("h2",{attrs:{id:"一、-centos-下安装-docker"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#一、-centos-下安装-docker"}},[s._v("#")]),s._v(" 一、 CentOS 下安装 Docker")]),s._v(" "),a("h3",{attrs:{id:"_1-卸载老版本"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-卸载老版本"}},[s._v("#")]),s._v(" 1. 卸载老版本")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("yum remove "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    docker-client "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    docker-client-latest "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    docker-common docker-latest "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    docker-latest-logrotate "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    docker-logrotate docker-engine\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("h3",{attrs:{id:"_2-安装-docker-插件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-安装-docker-插件"}},[s._v("#")]),s._v(" 2. 安装 Docker 插件")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("yum "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" -y yum-utils device-mapper-persistent-data lvm2\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h3",{attrs:{id:"_3-添加-yum-国内源"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-添加-yum-国内源"}},[s._v("#")]),s._v(" 3. 添加 yum 国内源")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 阿里云镜像仓库")]),s._v("\nyum-config-manager "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    --add-repo "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 官网源镜像仓库(不推荐)")]),s._v("\nyum-config-manager --add-repo https://download.docker.com/linux/centos/docker-ce.repo\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])]),a("h3",{attrs:{id:"_4-安装-docker"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-安装-docker"}},[s._v("#")]),s._v(" 4. 安装 Docker")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("yum "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" -y docker-ce docker-ce-cli containerd.io\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h3",{attrs:{id:"_5-设置开机启动、开始运行"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-设置开机启动、开始运行"}},[s._v("#")]),s._v(" 5. 设置开机启动、开始运行")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("systemctl "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("enable")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v("\nsystemctl start "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("h3",{attrs:{id:"_6-查看docker运行状态"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-查看docker运行状态"}},[s._v("#")]),s._v(" 6. 查看docker运行状态")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("systemctl status "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h3",{attrs:{id:"_7-关闭防火墙"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_7-关闭防火墙"}},[s._v("#")]),s._v(" 7. 关闭防火墙")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("systemctl stop disable\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h2",{attrs:{id:"二、创建容器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#二、创建容器"}},[s._v("#")]),s._v(" 二、创建容器")]),s._v(" "),a("h3",{attrs:{id:"_1-设置镜像加速"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-设置镜像加速"}},[s._v("#")]),s._v(" 1. 设置镜像加速")]),s._v(" "),a("h4",{attrs:{id:"_1-在指定目录创建文件-如已存在请忽略此步"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-在指定目录创建文件-如已存在请忽略此步"}},[s._v("#")]),s._v(" 1. 在指定目录创建文件（如已存在请忽略此步）")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("touch")]),s._v(" /etc/docker/daemon.json\n\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("vi")]),s._v(" /etc/docker/daemon.json\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("h4",{attrs:{id:"_2-修改文件内容"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-修改文件内容"}},[s._v("#")]),s._v(" 2. 修改文件内容")]),s._v(" "),a("div",{staticClass:"language-json line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token property"}},[s._v('"registry-mirrors"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"https://elk58vq5.mirror.aliyuncs.com"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" \n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("h3",{attrs:{id:"_2-重启-docker-服务"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-重启-docker-服务"}},[s._v("#")]),s._v(" 2. 重启 Docker 服务")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("systemctl restart "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h3",{attrs:{id:"_3-拉取-最新-镜像"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-拉取-最新-镜像"}},[s._v("#")]),s._v(" 3. 拉取 最新 镜像")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" pull tomcat\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("ol",[a("li",[s._v("拉取最新镜像 ： "),a("code",[s._v("docker pull tomcat")])]),s._v(" "),a("li",[s._v("拉取指定镜像  ： "),a("code",[s._v("docker pull tomcat:7")])]),s._v(" "),a("li",[s._v("删除镜像 ： "),a("code",[s._v("docker rmi 镜像id")])])]),s._v(" "),a("p",[a("img",{attrs:{src:"https://pupper.com.cn/img/20220725181600.png",alt:""}})]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看 拉取的 镜像")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" images\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[a("img",{attrs:{src:"https://pupper.com.cn/img/20220725181625.png",alt:""}})]),s._v(" "),a("h3",{attrs:{id:"_4-创建并运行容器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-创建并运行容器"}},[s._v("#")]),s._v(" 4. 创建并运行容器")]),s._v(" "),a("blockquote",[a("p",[s._v("创建容器语法格式:\ndocker run -id --name=容器名称 -p 宿主机端口:容器端口 -v 宿主机目录:容器目录 镜像名称")])]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" run -id --name"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("myTomcat "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    -p "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8080")]),s._v(":8080 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    -v /usr/local/tomcat/webapps:/usr/local/tomcat/webapps "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    tomcat\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("p",[a("strong",[s._v("docker run 后面的参数:")])]),s._v(" "),a("ul",[a("li",[a("code",[s._v("-i")]),s._v(" ：运行容器")]),s._v(" "),a("li",[a("code",[s._v("-t")]),s._v(" ： 容器启动后，进入命令行")]),s._v(" "),a("li",[a("code",[s._v("-d")]),s._v(" ： 守护进程 --- 后台运行")]),s._v(" "),a("li",[a("code",[s._v("-p")]),s._v(" ： 端口映射\n"),a("ul",[a("li",[a("code",[s._v("-p 宿主机端口:容器端口")])])])]),s._v(" "),a("li",[a("code",[s._v("-v")]),s._v(" ： 目录映射 --- 挂载\n"),a("ul",[a("li",[a("code",[s._v("-v 宿主机目录:容器目录")])])])])]),s._v(" "),a("h3",{attrs:{id:"_5-创建容器关联其他容器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-创建容器关联其他容器"}},[s._v("#")]),s._v(" 5. 创建容器关联其他容器")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" run -id --name"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("tomcat2 -p "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8080")]),s._v(":8080 --link mysql --link redis --link rabbitmq\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h2",{attrs:{id:"三、容器-图形化管理工具-portainer"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#三、容器-图形化管理工具-portainer"}},[s._v("#")]),s._v(" 三、容器 图形化管理工具（ Portainer ）")]),s._v(" "),a("h3",{attrs:{id:"_1-官方网站"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-官方网站"}},[s._v("#")]),s._v(" 1.官方网站")]),s._v(" "),a("p",[a("a",{attrs:{href:"https://hub.docker.com/r/6053537/portainer-ce",target:"_blank",rel:"noopener noreferrer"}},[s._v("docker hub portainer-ce中文汉化版"),a("OutboundLink")],1)]),s._v(" "),a("h3",{attrs:{id:"_2-选择喜欢的portainer风格镜像-下载"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-选择喜欢的portainer风格镜像-下载"}},[s._v("#")]),s._v(" 2.选择喜欢的portainer风格镜像，下载")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" pull hub-mirror.c.163.com/6053537/portainer-ce\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h3",{attrs:{id:"_3-启动-dockerui-容器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-启动-dockerui-容器"}},[s._v("#")]),s._v(" 3.启动 dockerui 容器")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" run -d --restart"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("always --name"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"portainer"')]),s._v(" -p "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("9000")]),s._v(":9000 -v /var/run/docker.sock:/var/run/docker.sock -v portainer_data:/data "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6053537")]),s._v("/portainer-ce\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h3",{attrs:{id:"_4-访问"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-访问"}},[s._v("#")]),s._v(" 4.访问")]),s._v(" "),a("p",[s._v("浏览器访问 http://你虚拟机的ip:9000, 设置一个密码即可，点击创建用户 密码要8位以上")]),s._v(" "),a("div",{staticClass:"custom-block warning"},[a("p",{staticClass:"custom-block-title"},[s._v("注意")]),s._v(" "),a("p",[s._v("如果无法访问,需要查看端口是否开放(云服务器需要去官网开放)")])]),s._v(" "),a("h2",{attrs:{id:"四、其他操作命令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#四、其他操作命令"}},[s._v("#")]),s._v(" 四、其他操作命令")]),s._v(" "),a("table",[a("thead",[a("tr",[a("th",[s._v("命令")]),s._v(" "),a("th",[s._v("说明")])])]),s._v(" "),a("tbody",[a("tr",[a("td",[a("code",[s._v("systemctl restart docker")])]),s._v(" "),a("td",[s._v("重启 docker")])]),s._v(" "),a("tr",[a("td",[a("code",[s._v("systemctl stop docker")])]),s._v(" "),a("td",[s._v("停止 docker")])]),s._v(" "),a("tr",[a("td",[a("code",[s._v("docker exec -it 容器名称 /bin/bash")])]),s._v(" "),a("td",[s._v("进入容器")])]),s._v(" "),a("tr",[a("td",[a("code",[s._v("exit")])]),s._v(" "),a("td",[s._v("退出容器")])]),s._v(" "),a("tr",[a("td",[a("code",[s._v("docker images")])]),s._v(" "),a("td",[s._v("查看本地镜像")])]),s._v(" "),a("tr",[a("td",[a("code",[s._v("docker ps")])]),s._v(" "),a("td",[s._v("查看运行的容器")])]),s._v(" "),a("tr",[a("td",[a("code",[s._v("docker ps -a")])]),s._v(" "),a("td",[s._v("查看所有容器")])]),s._v(" "),a("tr",[a("td",[a("code",[s._v("docker start 容器名/容器 id")])]),s._v(" "),a("td",[s._v("运行容器")])]),s._v(" "),a("tr",[a("td",[a("code",[s._v("docker stop 容器名/容器 id")])]),s._v(" "),a("td",[s._v("停止容器")])]),s._v(" "),a("tr",[a("td",[a("code",[s._v("docker stop $(docker ps -a -q}")])]),s._v(" "),a("td",[s._v("停止所有运行的容器")])]),s._v(" "),a("tr",[a("td",[a("code",[s._v("docker rm 容器名/容器 id")])]),s._v(" "),a("td",[s._v("删除没有运行的容器")])]),s._v(" "),a("tr",[a("td",[a("code",[s._v("docker rm -f 容器名/容器 id")])]),s._v(" "),a("td",[s._v("删除运行的运行容器")])]),s._v(" "),a("tr",[a("td",[a("code",[s._v("docker start 容器名/容器 id")])]),s._v(" "),a("td",[s._v("运行容器")])]),s._v(" "),a("tr",[a("td",[a("code",[s._v("docker rm $(docker ps -a -q}")])]),s._v(" "),a("td",[s._v("删除所有未运行的容器")])]),s._v(" "),a("tr",[a("td",[a("code",[s._v("docker cp 文件名 容器名:/")])]),s._v(" "),a("td",[s._v("向容器中拷贝文件")])]),s._v(" "),a("tr",[a("td",[a("code",[s._v("docker cp 容器名:/文件名 /root")])]),s._v(" "),a("td",[s._v("向宿主机拷贝文件")])]),s._v(" "),a("tr",[a("td",[a("code",[s._v("docker images")])]),s._v(" "),a("td",[s._v("查看本地镜像")])]),s._v(" "),a("tr",[a("td",[a("code",[s._v("docker images")])]),s._v(" "),a("td",[s._v("查看本地镜像")])]),s._v(" "),a("tr",[a("td",[a("code",[s._v("docker images")])]),s._v(" "),a("td",[s._v("查看本地镜像")])])])]),s._v(" "),a("h2",{attrs:{id:"五、-查看日志-docker-logs-命令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#五、-查看日志-docker-logs-命令"}},[s._v("#")]),s._v(" 五、 查看日志 （ docker logs 命令）")]),s._v(" "),a("p",[a("code",[s._v("docker logs [options] 容器名称或ID")]),s._v(" 获取容器日志")]),s._v(" "),a("table",[a("thead",[a("tr",[a("th",[s._v("名字")]),s._v(" "),a("th",[s._v("默 认 值")]),s._v(" "),a("th",[s._v("描述")])])]),s._v(" "),a("tbody",[a("tr",[a("td",[s._v("–details")]),s._v(" "),a("td",[s._v("显示提供给日志的额外细节")]),s._v(" "),a("td")]),s._v(" "),a("tr",[a("td",[s._v("–follow或-f")]),s._v(" "),a("td",[s._v("按日志输出")]),s._v(" "),a("td")]),s._v(" "),a("tr",[a("td",[s._v("–since")]),s._v(" "),a("td",[s._v("从某个时间开始显示，例如2013- 01-02T13:23:37")]),s._v(" "),a("td")]),s._v(" "),a("tr",[a("td",[s._v("–tail")]),s._v(" "),a("td",[s._v("all")]),s._v(" "),a("td",[s._v("从日志末尾多少行开始显示")])]),s._v(" "),a("tr",[a("td",[s._v("– timestamps 或-t")]),s._v(" "),a("td",[s._v("显示时间戳")]),s._v(" "),a("td")]),s._v(" "),a("tr",[a("td",[s._v("–until")]),s._v(" "),a("td",[s._v("打印某个时间以前的日志，例如 2013-01-02T13:23:37")]),s._v(" "),a("td")])])]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 通过docker logs命令可以查看容器的日志。")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" logs -f --tail "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v(" a4dac74d48f7\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看指定时间后的日志，只显示最后100行：")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" logs -f -t --since"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"2018-02-08"')]),s._v(" --tail"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),s._v(" CONTAINER_ID\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看某时间段日志")]),s._v("\n \n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" logs -t --since"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"2018-02-08T13:23:37"')]),s._v(" --until "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"2018-02-09T12:23:37"')]),s._v(" CONTAINER_ID\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("h2",{attrs:{id:"六、docker-旧版卸载"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#六、docker-旧版卸载"}},[s._v("#")]),s._v(" 六、docker 旧版卸载")]),s._v(" "),a("h3",{attrs:{id:"_1-卸载它们以及相关的依赖项"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-卸载它们以及相关的依赖项"}},[s._v("#")]),s._v(" 1. 卸载它们以及相关的依赖项")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" yum remove "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("docker-client "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("docker-client-latest "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("docker-common "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("docker-latest "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("docker-latest-logrotate "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("docker-logrotate "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("docker-engine\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h3",{attrs:{id:"_2-安装-docker-engine-community"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-安装-docker-engine-community"}},[s._v("#")]),s._v(" 2. 安装 Docker Engine-Community")]),s._v(" "),a("p",[s._v("在新主机上首次安装 Docker Engine-Community 之前，需要设置 Docker 仓库。")]),s._v(" "),a("p",[s._v("之后，您可以从仓库安装和更新 Docker。")]),s._v(" "),a("h4",{attrs:{id:"_1-设置仓库"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-设置仓库"}},[s._v("#")]),s._v(" 1. 设置仓库")]),s._v(" "),a("p",[s._v("安装所需的软件包。")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" yum "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" -y yum-utils "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("device-mapper-persistent-data "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("lvm2\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("使用以下命令来设置稳定的仓库。阿里云")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" yum-config-manager "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("--add-repo "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v(" http://mirrors.aliyun.com/dockerce/linux/centos/docker-ce.repo\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h4",{attrs:{id:"_2-安装-docker-engine-community-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-安装-docker-engine-community-2"}},[s._v("#")]),s._v(" 2. 安装 Docker Engine-Community")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" yum "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" docker-ce docker-ce-clicontainerd.io\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("一直输入y回车即可")]),s._v(" "),a("h3",{attrs:{id:"_3-启动-docker"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-启动-docker"}},[s._v("#")]),s._v(" 3. 启动 docker")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" systemctl start "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h2",{attrs:{id:"七p、-修改-容器的-映射端口及挂载目录"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#七p、-修改-容器的-映射端口及挂载目录"}},[s._v("#")]),s._v(" 七p、 修改 容器的 映射端口及挂载目录")]),s._v(" "),a("h3",{attrs:{id:"_1-停止容器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-停止容器"}},[s._v("#")]),s._v(" 1. 停止容器")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" stop 容器id或名称\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h3",{attrs:{id:"_2-停止-docker-服务"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-停止-docker-服务"}},[s._v("#")]),s._v(" 2. 停止 docker 服务")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("systemctl stop "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h3",{attrs:{id:"_3-修改-hostconfig-json-文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-修改-hostconfig-json-文件"}},[s._v("#")]),s._v(" 3. 修改 hostconfig.json 文件")]),s._v(" "),a("blockquote",[a("p",[a("code",[s._v("config,v2.json")]),s._v("  中如果也记录了端口，需要一并修改")])]),s._v(" "),a("p",[s._v("文件目录：")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /var/lib/docker/containers/容器id\n\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("vi")]),s._v(" hostconfig.json\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("p",[a("img",{attrs:{src:"https://pupper.com.cn/img/20220725181827.png",alt:""}})]),s._v(" "),a("h4",{attrs:{id:"_1-修改-映射端口"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-修改-映射端口"}},[s._v("#")]),s._v(" 1. 修改 映射端口")]),s._v(" "),a("p",[s._v("没有端口映射时："),a("code",[s._v("“PortBindings”:{}")])]),s._v(" "),a("p",[s._v("增加一个端口映射：")]),s._v(" "),a("blockquote",[a("p",[s._v("前面的 “3306” 为 容器端口， 后面的 “3307” 为宿主机端口")]),s._v(" "),a("p",[s._v("如果修改现有端口映射，则可以直接修改")])]),s._v(" "),a("div",{staticClass:"language-json line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[s._v("“PortBindings”"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("“"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3306")]),s._v("/tcp”"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("“HostIp”"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("“HostPort”"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("“"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3307")]),s._v("”"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h4",{attrs:{id:"_2-修改-挂载目录"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-修改-挂载目录"}},[s._v("#")]),s._v(" 2. 修改 挂载目录")]),s._v(" "),a("blockquote",[a("p",[s._v("前面的地址为 宿主机挂载目录，后面的地址为 容器目录地址")])]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Binds"')]),s._v(":"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/var/run/docker.sock:/var/run/docker.sock"')]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h3",{attrs:{id:"_4-启动-docker-服务"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-启动-docker-服务"}},[s._v("#")]),s._v(" 4. 启动 docker 服务")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("systemstl start "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h3",{attrs:{id:"_5-启动-容器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-启动-容器"}},[s._v("#")]),s._v(" 5. 启动 容器")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" start 容器id\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h3",{attrs:{id:"_6-查看修改后的结果"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-查看修改后的结果"}},[s._v("#")]),s._v(" 6. 查看修改后的结果")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ps")]),s._v(" -a\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h3",{attrs:{id:"_7-查看修改后的挂载目录"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_7-查看修改后的挂载目录"}},[s._v("#")]),s._v(" 7. 查看修改后的挂载目录")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("docker inspect container_id | grep Mounts -A 20\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h2",{attrs:{id:"九、-同步时间"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#九、-同步时间"}},[s._v("#")]),s._v(" 九、 同步时间")]),s._v(" "),a("h3",{attrs:{id:"_1-查看宿主机时间"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-查看宿主机时间"}},[s._v("#")]),s._v(" 1.查看宿主机时间")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("date")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h3",{attrs:{id:"_2-安装-ntp"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-安装-ntp"}},[s._v("#")]),s._v(" 2. 安装 ntp")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("yum "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" ntp\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h3",{attrs:{id:"_3-同步时间"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-同步时间"}},[s._v("#")]),s._v(" 3. 同步时间")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" /etc/localtime 容器id或名称:/etc/localtime\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("报错：")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://pupper.com.cn/img/20220725181909.png",alt:""}})]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" /usr/share/zoneinfo/Asia/Shanghai 容器ID或名称:/etc/localtime\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h3",{attrs:{id:"_4-重启-容器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-重启-容器"}},[s._v("#")]),s._v(" 4. 重启 容器")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" restart 容器id或名称\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("blockquote",[a("p",[a("strong",[s._v("注意事项：")])]),s._v(" "),a("ul",[a("li",[s._v("可能网络会断开，请重新reboot下linux")]),s._v(" "),a("li",[s._v("虚拟机的ip可能会改变")])])])])}),[],!1,null,null,null);a.default=r.exports}}]);