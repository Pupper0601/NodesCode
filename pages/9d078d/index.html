<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Java - Mysql | Pupper blog</title>
    <meta name="generator" content="VuePress 1.8.0">
    <link rel="shortcut icon" href="/img/favicon.ico">
    <link rel="stylesheet" href="//at.alicdn.com/t/font_3114978_qe0b39no76.css">
    <noscript><meta http-equiv="refresh" content="0; url=https://www.yuque.com/pupper/"><style>.theme-vdoing-content { display:none }</noscript>
    <script src="https://cdn.staticfile.org/twikoo/1.5.11/twikoo.all.min.js"></script>
    <script>var _hmt = _hmt || [];
            (function() {
              var hm = document.createElement("script");
              hm.src = "https://hm.baidu.com/hm.js?85e3b4d561f36bc09a451ad0cc26728a";
              var s = document.getElementsByTagName("script")[0]; 
              s.parentNode.insertBefore(hm, s);
            })();
          </script>
    <meta name="description" content="Pupper 的个人知识库, Python、Java、前端、测试等相关知识, 记录生活和技术路程, 同时分享编程技巧。">
    <meta name="referrer" content="no-referrer-when-downgrade">
    <meta name="keywords" content="Pupper 个人博客, Python、Java、数据库、测试等相关知识, 记录生活和技术路程。">
    <meta name="theme-color" content="#11a8cd">
    
    <link rel="preload" href="/assets/css/0.styles.4e4730e6.css" as="style"><link rel="preload" href="/assets/js/app.cba83544.js" as="script"><link rel="preload" href="/assets/js/2.86abda09.js" as="script"><link rel="preload" href="/assets/js/62.c112c702.js" as="script"><link rel="preload" href="/assets/js/15.4790e0b5.js" as="script"><link rel="preload" href="/assets/js/5.2db27ac1.js" as="script"><link rel="preload" href="/assets/js/9.f86506f9.js" as="script"><link rel="preload" href="/assets/js/16.c670ed56.js" as="script"><link rel="preload" href="/assets/js/12.82446ed2.js" as="script"><link rel="prefetch" href="/assets/js/10.3c418375.js"><link rel="prefetch" href="/assets/js/100.b38738b0.js"><link rel="prefetch" href="/assets/js/101.ee0c4bb1.js"><link rel="prefetch" href="/assets/js/102.a8a0832f.js"><link rel="prefetch" href="/assets/js/103.44be57b2.js"><link rel="prefetch" href="/assets/js/104.9681c9e7.js"><link rel="prefetch" href="/assets/js/105.2be5acf6.js"><link rel="prefetch" href="/assets/js/106.cf4a6f89.js"><link rel="prefetch" href="/assets/js/107.9bc3630b.js"><link rel="prefetch" href="/assets/js/108.3a57a01a.js"><link rel="prefetch" href="/assets/js/109.84b3cbb9.js"><link rel="prefetch" href="/assets/js/11.2d9fd847.js"><link rel="prefetch" href="/assets/js/110.7e4824b5.js"><link rel="prefetch" href="/assets/js/111.8b004529.js"><link rel="prefetch" href="/assets/js/112.e73fb687.js"><link rel="prefetch" href="/assets/js/113.ead08dcf.js"><link rel="prefetch" href="/assets/js/114.9a2b426f.js"><link rel="prefetch" href="/assets/js/115.d62bb4d9.js"><link rel="prefetch" href="/assets/js/116.45112643.js"><link rel="prefetch" href="/assets/js/117.286115ee.js"><link rel="prefetch" href="/assets/js/118.ac4c8a16.js"><link rel="prefetch" href="/assets/js/119.30f04e8f.js"><link rel="prefetch" href="/assets/js/120.29fc5cb5.js"><link rel="prefetch" href="/assets/js/121.ff7f99b7.js"><link rel="prefetch" href="/assets/js/122.5fb73101.js"><link rel="prefetch" href="/assets/js/123.51d8ea71.js"><link rel="prefetch" href="/assets/js/124.b13a1c73.js"><link rel="prefetch" href="/assets/js/125.a48cb498.js"><link rel="prefetch" href="/assets/js/126.1ea6a91c.js"><link rel="prefetch" href="/assets/js/127.780e5f64.js"><link rel="prefetch" href="/assets/js/128.fbd4eca0.js"><link rel="prefetch" href="/assets/js/129.f54a8c01.js"><link rel="prefetch" href="/assets/js/13.3daa5e06.js"><link rel="prefetch" href="/assets/js/130.b14ffe44.js"><link rel="prefetch" href="/assets/js/131.37ec8755.js"><link rel="prefetch" href="/assets/js/132.ac2b0a69.js"><link rel="prefetch" href="/assets/js/133.82829b00.js"><link rel="prefetch" href="/assets/js/134.c5214c9c.js"><link rel="prefetch" href="/assets/js/135.ea96e3a6.js"><link rel="prefetch" href="/assets/js/136.02b92aab.js"><link rel="prefetch" href="/assets/js/137.0152d4ce.js"><link rel="prefetch" href="/assets/js/138.8b5c57ca.js"><link rel="prefetch" href="/assets/js/139.71ebfb0f.js"><link rel="prefetch" href="/assets/js/14.d07818ae.js"><link rel="prefetch" href="/assets/js/140.0366ae95.js"><link rel="prefetch" href="/assets/js/141.3905cf69.js"><link rel="prefetch" href="/assets/js/142.e51f20dc.js"><link rel="prefetch" href="/assets/js/143.8ebee390.js"><link rel="prefetch" href="/assets/js/144.57339a84.js"><link rel="prefetch" href="/assets/js/145.b8a279dc.js"><link rel="prefetch" href="/assets/js/146.9564ad9e.js"><link rel="prefetch" href="/assets/js/147.41737864.js"><link rel="prefetch" href="/assets/js/148.418aa49c.js"><link rel="prefetch" href="/assets/js/149.45b5c9c7.js"><link rel="prefetch" href="/assets/js/150.c3c03e6e.js"><link rel="prefetch" href="/assets/js/151.97a9d0e8.js"><link rel="prefetch" href="/assets/js/152.c518a08b.js"><link rel="prefetch" href="/assets/js/153.0d213ed7.js"><link rel="prefetch" href="/assets/js/154.fc820873.js"><link rel="prefetch" href="/assets/js/155.f4e74eae.js"><link rel="prefetch" href="/assets/js/156.089b34a1.js"><link rel="prefetch" href="/assets/js/157.3b4126c7.js"><link rel="prefetch" href="/assets/js/158.fd86e928.js"><link rel="prefetch" href="/assets/js/159.9f660a05.js"><link rel="prefetch" href="/assets/js/160.eb2aa16e.js"><link rel="prefetch" href="/assets/js/161.b9d14b88.js"><link rel="prefetch" href="/assets/js/162.1c947af8.js"><link rel="prefetch" href="/assets/js/163.f6f00cd3.js"><link rel="prefetch" href="/assets/js/164.7081985b.js"><link rel="prefetch" href="/assets/js/165.33c2db3f.js"><link rel="prefetch" href="/assets/js/166.807e7527.js"><link rel="prefetch" href="/assets/js/167.2a5a0f41.js"><link rel="prefetch" href="/assets/js/168.8113c8d5.js"><link rel="prefetch" href="/assets/js/169.934c269f.js"><link rel="prefetch" href="/assets/js/17.ecbe2f3b.js"><link rel="prefetch" href="/assets/js/170.c24f340d.js"><link rel="prefetch" href="/assets/js/171.53147beb.js"><link rel="prefetch" href="/assets/js/172.d429a76d.js"><link rel="prefetch" href="/assets/js/173.dce34b4e.js"><link rel="prefetch" href="/assets/js/174.7fec141b.js"><link rel="prefetch" href="/assets/js/175.7a3f3313.js"><link rel="prefetch" href="/assets/js/176.4797be50.js"><link rel="prefetch" href="/assets/js/177.4410a110.js"><link rel="prefetch" href="/assets/js/178.905fd28c.js"><link rel="prefetch" href="/assets/js/179.ac39f457.js"><link rel="prefetch" href="/assets/js/18.aba2a4d4.js"><link rel="prefetch" href="/assets/js/180.fefc99e5.js"><link rel="prefetch" href="/assets/js/181.531f2a96.js"><link rel="prefetch" href="/assets/js/182.2866d82a.js"><link rel="prefetch" href="/assets/js/183.56974e34.js"><link rel="prefetch" href="/assets/js/184.439e7c1d.js"><link rel="prefetch" href="/assets/js/185.1d260633.js"><link rel="prefetch" href="/assets/js/186.7248b227.js"><link rel="prefetch" href="/assets/js/187.69c89d08.js"><link rel="prefetch" href="/assets/js/188.0df66cd2.js"><link rel="prefetch" href="/assets/js/189.cba0b362.js"><link rel="prefetch" href="/assets/js/19.29811915.js"><link rel="prefetch" href="/assets/js/190.a1d6aaa5.js"><link rel="prefetch" href="/assets/js/191.8c88531f.js"><link rel="prefetch" href="/assets/js/192.156249b1.js"><link rel="prefetch" href="/assets/js/193.18883f2c.js"><link rel="prefetch" href="/assets/js/194.7cdaaeff.js"><link rel="prefetch" href="/assets/js/195.367cee2a.js"><link rel="prefetch" href="/assets/js/196.dd709f95.js"><link rel="prefetch" href="/assets/js/197.cbb1e8be.js"><link rel="prefetch" href="/assets/js/198.831dea3f.js"><link rel="prefetch" href="/assets/js/199.2de99620.js"><link rel="prefetch" href="/assets/js/20.0321e0bf.js"><link rel="prefetch" href="/assets/js/200.6193ab6d.js"><link rel="prefetch" href="/assets/js/201.a73b060d.js"><link rel="prefetch" href="/assets/js/202.c58c3b88.js"><link rel="prefetch" href="/assets/js/203.dbbaee71.js"><link rel="prefetch" href="/assets/js/204.3a4632a1.js"><link rel="prefetch" href="/assets/js/205.0b0c657b.js"><link rel="prefetch" href="/assets/js/206.31572d6a.js"><link rel="prefetch" href="/assets/js/207.ccbbcf1e.js"><link rel="prefetch" href="/assets/js/208.3647bf5a.js"><link rel="prefetch" href="/assets/js/209.1567f838.js"><link rel="prefetch" href="/assets/js/21.e9d096f5.js"><link rel="prefetch" href="/assets/js/210.74e9982b.js"><link rel="prefetch" href="/assets/js/211.629ea2e3.js"><link rel="prefetch" href="/assets/js/212.e3bc0d22.js"><link rel="prefetch" href="/assets/js/213.759e7b08.js"><link rel="prefetch" href="/assets/js/214.3e8a91b4.js"><link rel="prefetch" href="/assets/js/215.9f24bc91.js"><link rel="prefetch" href="/assets/js/216.3f42b5ca.js"><link rel="prefetch" href="/assets/js/217.3110c1b1.js"><link rel="prefetch" href="/assets/js/218.08fbdf88.js"><link rel="prefetch" href="/assets/js/219.36153afc.js"><link rel="prefetch" href="/assets/js/22.18db690c.js"><link rel="prefetch" href="/assets/js/23.6adbac05.js"><link rel="prefetch" href="/assets/js/24.de4733a0.js"><link rel="prefetch" href="/assets/js/25.59c078e5.js"><link rel="prefetch" href="/assets/js/26.b6fc6896.js"><link rel="prefetch" href="/assets/js/27.9774ffdb.js"><link rel="prefetch" href="/assets/js/28.f29f7f42.js"><link rel="prefetch" href="/assets/js/29.b81dd57a.js"><link rel="prefetch" href="/assets/js/3.c081b45c.js"><link rel="prefetch" href="/assets/js/30.2c7fbe07.js"><link rel="prefetch" href="/assets/js/31.45c9f9fc.js"><link rel="prefetch" href="/assets/js/32.9176f6ae.js"><link rel="prefetch" href="/assets/js/33.40659514.js"><link rel="prefetch" href="/assets/js/34.bce1755b.js"><link rel="prefetch" href="/assets/js/35.a306b217.js"><link rel="prefetch" href="/assets/js/36.6d1dea57.js"><link rel="prefetch" href="/assets/js/37.5c410de4.js"><link rel="prefetch" href="/assets/js/38.a7af97c1.js"><link rel="prefetch" href="/assets/js/39.1a79335a.js"><link rel="prefetch" href="/assets/js/4.83c3a294.js"><link rel="prefetch" href="/assets/js/40.6a172a15.js"><link rel="prefetch" href="/assets/js/41.04eef303.js"><link rel="prefetch" href="/assets/js/42.2f333341.js"><link rel="prefetch" href="/assets/js/43.8dec86f6.js"><link rel="prefetch" href="/assets/js/44.93fc25fd.js"><link rel="prefetch" href="/assets/js/45.cabe7503.js"><link rel="prefetch" href="/assets/js/46.f2d2c279.js"><link rel="prefetch" href="/assets/js/47.30503113.js"><link rel="prefetch" href="/assets/js/48.eb0d7c90.js"><link rel="prefetch" href="/assets/js/49.37c99206.js"><link rel="prefetch" href="/assets/js/50.7bec1d5c.js"><link rel="prefetch" href="/assets/js/51.59fb3750.js"><link rel="prefetch" href="/assets/js/52.171bcc2f.js"><link rel="prefetch" href="/assets/js/53.a0dcf990.js"><link rel="prefetch" href="/assets/js/54.5ac2fe59.js"><link rel="prefetch" href="/assets/js/55.a51cfd9c.js"><link rel="prefetch" href="/assets/js/56.f6c6492d.js"><link rel="prefetch" href="/assets/js/57.b8f8bdbd.js"><link rel="prefetch" href="/assets/js/58.3392839b.js"><link rel="prefetch" href="/assets/js/59.afad9892.js"><link rel="prefetch" href="/assets/js/6.21b5a5d3.js"><link rel="prefetch" href="/assets/js/60.8974a281.js"><link rel="prefetch" href="/assets/js/61.6b767583.js"><link rel="prefetch" href="/assets/js/63.192045b2.js"><link rel="prefetch" href="/assets/js/64.6401ee92.js"><link rel="prefetch" href="/assets/js/65.b5bbd12c.js"><link rel="prefetch" href="/assets/js/66.c21615e2.js"><link rel="prefetch" href="/assets/js/67.38ba7166.js"><link rel="prefetch" href="/assets/js/68.fe367475.js"><link rel="prefetch" href="/assets/js/69.c770578a.js"><link rel="prefetch" href="/assets/js/7.39c25d68.js"><link rel="prefetch" href="/assets/js/70.1c79b664.js"><link rel="prefetch" href="/assets/js/71.180136f3.js"><link rel="prefetch" href="/assets/js/72.8250a5bf.js"><link rel="prefetch" href="/assets/js/73.023e5f6f.js"><link rel="prefetch" href="/assets/js/74.2f32115e.js"><link rel="prefetch" href="/assets/js/75.ada7ed54.js"><link rel="prefetch" href="/assets/js/76.b2178f69.js"><link rel="prefetch" href="/assets/js/77.9873c750.js"><link rel="prefetch" href="/assets/js/78.3f70277b.js"><link rel="prefetch" href="/assets/js/79.3d01dbc1.js"><link rel="prefetch" href="/assets/js/8.6c2f972d.js"><link rel="prefetch" href="/assets/js/80.91249da9.js"><link rel="prefetch" href="/assets/js/81.1eccbf89.js"><link rel="prefetch" href="/assets/js/82.e4346ed5.js"><link rel="prefetch" href="/assets/js/83.77f2e738.js"><link rel="prefetch" href="/assets/js/84.1b028fff.js"><link rel="prefetch" href="/assets/js/85.42e78fac.js"><link rel="prefetch" href="/assets/js/86.03008ead.js"><link rel="prefetch" href="/assets/js/87.406379aa.js"><link rel="prefetch" href="/assets/js/88.06081368.js"><link rel="prefetch" href="/assets/js/89.80da4a97.js"><link rel="prefetch" href="/assets/js/90.044b5c4b.js"><link rel="prefetch" href="/assets/js/91.88a504cc.js"><link rel="prefetch" href="/assets/js/92.9c8ff896.js"><link rel="prefetch" href="/assets/js/93.56b868fd.js"><link rel="prefetch" href="/assets/js/94.983e2f37.js"><link rel="prefetch" href="/assets/js/95.5a2b0764.js"><link rel="prefetch" href="/assets/js/96.a278f503.js"><link rel="prefetch" href="/assets/js/97.4f482bc2.js"><link rel="prefetch" href="/assets/js/98.c004738d.js"><link rel="prefetch" href="/assets/js/99.9d7c933b.js">
    <link rel="stylesheet" href="/assets/css/0.styles.4e4730e6.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu have-body-img"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/img/index/logo.png" alt="Pupper blog" class="logo"> <span class="site-name can-hide">Pupper blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><a href="/java/" class="nav-link">Java</a></div><div class="nav-item"><a href="/python/" class="nav-link">Python</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="开发" class="dropdown-title"><a href="/build/" class="link-title">开发</a> <span class="title" style="display:none;">开发</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/build/scrapy/" class="nav-link">爬虫技术</a></li></ul></div></div><div class="nav-item"><a href="/database/" class="nav-link">数据库</a></div><div class="nav-item"><a href="/linux/" class="nav-link"> Linux</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="测试" class="dropdown-title"><a href="/test/" class="link-title">测试</a> <span class="title" style="display:none;">测试</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>软件测试</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/interface/" class="nav-link">自动化测试</a></li><li class="dropdown-subitem"><a href="/exploit/" class="nav-link">测试开发</a></li><li class="dropdown-subitem"><a href="/performance/" class="nav-link">性能测试</a></li><li class="dropdown-subitem"><a href="/secure/" class="nav-link">安全测试</a></li></ul></li><li class="dropdown-item"><h4>测试技术</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/files/" class="nav-link">文件相关</a></li><li class="dropdown-subitem"><a href="/logs/" class="nav-link">日志相关</a></li><li class="dropdown-subitem"><a href="/servers/" class="nav-link">服务相关</a></li></ul></li></ul></div></div><div class="nav-item"><a href="/tips/" class="nav-link">零散知识</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><a href="/front/" class="link-title">前端</a> <span class="title" style="display:none;">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/html/" class="nav-link">HTML5</a></li><li class="dropdown-item"><!----> <a href="/css3/" class="nav-link">CSS3</a></li><li class="dropdown-item"><!----> <a href="/javascript/" class="nav-link">JavaScript</a></li><li class="dropdown-item"><!----> <a href="/vue/" class="nav-link">VUE3</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="工具" class="dropdown-title"><a href="/tool/" class="link-title">工具</a> <span class="title" style="display:none;">工具</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pc/" class="nav-link">PC 端工具</a></li><li class="dropdown-item"><!----> <a href="/move/" class="nav-link">移动端工具</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="更多" class="dropdown-title"><a href="/more/" class="link-title">更多</a> <span class="title" style="display:none;">更多</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/private/" class="nav-link">私密文件</a></li><li class="dropdown-item"><!----> <a href="/friends/" class="nav-link">友情链接</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="索引" class="dropdown-title"><a href="/archives/" class="link-title">索引</a> <span class="title" style="display:none;">索引</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>本站</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/categories/" class="nav-link">分类</a></li><li class="dropdown-subitem"><a href="/tags/" class="nav-link">标签</a></li><li class="dropdown-subitem"><a href="/archives/" class="nav-link">归档</a></li></ul></li><li class="dropdown-item"><h4>我的</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/about/website/introduce/" class="nav-link">关于</a></li></ul></li></ul></div></div><div class="nav-item"><a href="/message-area/" class="nav-link">留言区</a></div> <a href="https://github.com/Pupper0601/NodesCode.git" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><div class="blogger"><img src="https://pupper-1300525283.cos.ap-hongkong.myqcloud.com/scrcpy/logo1.png"> <div class="blogger-info"><h3>Pupper</h3> <span>谁说码农不是👩🏻‍🌾农民工...</span></div></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><a href="/java/" class="nav-link">Java</a></div><div class="nav-item"><a href="/python/" class="nav-link">Python</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="开发" class="dropdown-title"><a href="/build/" class="link-title">开发</a> <span class="title" style="display:none;">开发</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/build/scrapy/" class="nav-link">爬虫技术</a></li></ul></div></div><div class="nav-item"><a href="/database/" class="nav-link">数据库</a></div><div class="nav-item"><a href="/linux/" class="nav-link"> Linux</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="测试" class="dropdown-title"><a href="/test/" class="link-title">测试</a> <span class="title" style="display:none;">测试</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>软件测试</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/interface/" class="nav-link">自动化测试</a></li><li class="dropdown-subitem"><a href="/exploit/" class="nav-link">测试开发</a></li><li class="dropdown-subitem"><a href="/performance/" class="nav-link">性能测试</a></li><li class="dropdown-subitem"><a href="/secure/" class="nav-link">安全测试</a></li></ul></li><li class="dropdown-item"><h4>测试技术</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/files/" class="nav-link">文件相关</a></li><li class="dropdown-subitem"><a href="/logs/" class="nav-link">日志相关</a></li><li class="dropdown-subitem"><a href="/servers/" class="nav-link">服务相关</a></li></ul></li></ul></div></div><div class="nav-item"><a href="/tips/" class="nav-link">零散知识</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><a href="/front/" class="link-title">前端</a> <span class="title" style="display:none;">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/html/" class="nav-link">HTML5</a></li><li class="dropdown-item"><!----> <a href="/css3/" class="nav-link">CSS3</a></li><li class="dropdown-item"><!----> <a href="/javascript/" class="nav-link">JavaScript</a></li><li class="dropdown-item"><!----> <a href="/vue/" class="nav-link">VUE3</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="工具" class="dropdown-title"><a href="/tool/" class="link-title">工具</a> <span class="title" style="display:none;">工具</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pc/" class="nav-link">PC 端工具</a></li><li class="dropdown-item"><!----> <a href="/move/" class="nav-link">移动端工具</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="更多" class="dropdown-title"><a href="/more/" class="link-title">更多</a> <span class="title" style="display:none;">更多</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/private/" class="nav-link">私密文件</a></li><li class="dropdown-item"><!----> <a href="/friends/" class="nav-link">友情链接</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="索引" class="dropdown-title"><a href="/archives/" class="link-title">索引</a> <span class="title" style="display:none;">索引</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>本站</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/categories/" class="nav-link">分类</a></li><li class="dropdown-subitem"><a href="/tags/" class="nav-link">标签</a></li><li class="dropdown-subitem"><a href="/archives/" class="nav-link">归档</a></li></ul></li><li class="dropdown-item"><h4>我的</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/about/website/introduce/" class="nav-link">关于</a></li></ul></li></ul></div></div><div class="nav-item"><a href="/message-area/" class="nav-link">留言区</a></div> <a href="https://github.com/Pupper0601/NodesCode.git" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Java 基础</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/b8920c/" class="sidebar-link">Java - 环境搭建</a></li><li><a href="/pages/8b19ea/" class="sidebar-link">Java - 基础语法</a></li><li><a href="/pages/a009cc/" class="sidebar-link">Java - 判断、循环</a></li><li><a href="/pages/60ab62/" class="sidebar-link">Java - 数组、排序、查找</a></li><li><a href="/pages/1875eb/" class="sidebar-link">Java - 面向对象 ( 初级 )</a></li><li><a href="/pages/907771/" class="sidebar-link">Java - 面向对象 ( 中级 )</a></li><li><a href="/pages/6e310d/" class="sidebar-link">Java - 面向对象 ( 高级 )</a></li><li><a href="/pages/452315/" class="sidebar-link">Java - 枚举、注释、异常</a></li><li><a href="/pages/eb977c/" class="sidebar-link">Java - 常用类、String、Math、日期</a></li><li><a href="/pages/75bd37/" class="sidebar-link">Java - 集合、泛型</a></li><li><a href="/pages/2d0e2d/" class="sidebar-link">Java - 线程</a></li><li><a href="/pages/ccbac3/" class="sidebar-link">Java - 绘图</a></li><li><a href="/pages/25fcf0/" class="sidebar-link">Java - 文件、IO 流、Properties</a></li><li><a href="/pages/8a48c6/" class="sidebar-link">Java - 网络 socket、TCP</a></li><li><a href="/pages/d8099d/" class="sidebar-link">Java - 反射</a></li><li><a href="/pages/9d078d/" aria-current="page" class="active sidebar-link">Java - Mysql</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level2"><a href="/pages/9d078d/#一、安装" class="sidebar-link">一、安装</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/9d078d/#_1-下载安装包-mysql-下载地址" class="sidebar-link">1.下载安装包 —— MySQL 下载地址</a></li><li class="sidebar-sub-header level3"><a href="/pages/9d078d/#_2-安装-mysql-注意保存临时密码" class="sidebar-link">2.安装 mysql（注意保存临时密码）</a></li><li class="sidebar-sub-header level3"><a href="/pages/9d078d/#_3-启动-mysql" class="sidebar-link">3. 启动 MySQL</a></li><li class="sidebar-sub-header level3"><a href="/pages/9d078d/#_4-修改账户密码" class="sidebar-link">4. 修改账户密码</a></li><li class="sidebar-sub-header level3"><a href="/pages/9d078d/#_5-进入终端" class="sidebar-link">5.进入终端</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/9d078d/#二、数据库操作" class="sidebar-link">二、数据库操作</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/9d078d/#_1-数据库操作" class="sidebar-link">1. 数据库操作</a></li><li class="sidebar-sub-header level4"><a href="/pages/9d078d/#_1-创建数据库" class="sidebar-link">1. 创建数据库</a></li><li class="sidebar-sub-header level4"><a href="/pages/9d078d/#_2-查看及删除数据库" class="sidebar-link">2. 查看及删除数据库</a></li><li class="sidebar-sub-header level4"><a href="/pages/9d078d/#_3-备份及恢复数据库" class="sidebar-link">3.备份及恢复数据库</a></li><li class="sidebar-sub-header level3"><a href="/pages/9d078d/#_2-表" class="sidebar-link">2. 表</a></li><li class="sidebar-sub-header level4"><a href="/pages/9d078d/#_1-创建表" class="sidebar-link">1. 创建表</a></li><li class="sidebar-sub-header level4"><a href="/pages/9d078d/#_2-mysql-的数据类型" class="sidebar-link">2. MySQL 的数据类型</a></li><li class="sidebar-sub-header level4"><a href="/pages/9d078d/#_3-修改表" class="sidebar-link">3. 修改表</a></li><li class="sidebar-sub-header level3"><a href="/pages/9d078d/#案例" class="sidebar-link">案例</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/9d078d/#三-数据的-增-删-改" class="sidebar-link">三.数据的 增, 删, 改</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/9d078d/#_1-增" class="sidebar-link">1. 增</a></li><li class="sidebar-sub-header level3"><a href="/pages/9d078d/#_2-改" class="sidebar-link">2.改</a></li><li class="sidebar-sub-header level3"><a href="/pages/9d078d/#_3-删" class="sidebar-link">3.删</a></li><li class="sidebar-sub-header level3"><a href="/pages/9d078d/#_4-表复制-蠕虫复制" class="sidebar-link">4.表复制 (蠕虫复制)</a></li><li class="sidebar-sub-header level3"><a href="/pages/9d078d/#_5-去除表中-重复的数据" class="sidebar-link">5. 去除表中 重复的数据</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/9d078d/#四-数据库-查询-基础" class="sidebar-link">四.数据库 查询 - 基础</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/9d078d/#_1-where-子句中的运算符" class="sidebar-link">1. where 子句中的运算符</a></li><li class="sidebar-sub-header level3"><a href="/pages/9d078d/#_2-排序-order-by" class="sidebar-link">2. 排序 - order...by...</a></li><li class="sidebar-sub-header level3"><a href="/pages/9d078d/#_3-统计函数" class="sidebar-link">3.统计函数</a></li><li class="sidebar-sub-header level4"><a href="/pages/9d078d/#_1-统计函数-count" class="sidebar-link">1. 统计函数 - count</a></li><li class="sidebar-sub-header level4"><a href="/pages/9d078d/#_2-求和函数-sum" class="sidebar-link">2. 求和函数 - sum</a></li><li class="sidebar-sub-header level4"><a href="/pages/9d078d/#_3-求平均值-avg" class="sidebar-link">3. 求平均值 - avg</a></li><li class="sidebar-sub-header level4"><a href="/pages/9d078d/#_4-求最大-最小值-max-min" class="sidebar-link">4. 求最大, 最小值 - Max , Min</a></li><li class="sidebar-sub-header level4"><a href="/pages/9d078d/#_5-分组-group-by" class="sidebar-link">5. 分组 - group by</a></li><li class="sidebar-sub-header level3"><a href="/pages/9d078d/#_4-字符串函数" class="sidebar-link">4.字符串函数</a></li><li class="sidebar-sub-header level3"><a href="/pages/9d078d/#_5-数学函数" class="sidebar-link">5. 数学函数</a></li><li class="sidebar-sub-header level3"><a href="/pages/9d078d/#_6-时间日期函数" class="sidebar-link">6. 时间日期函数</a></li><li class="sidebar-sub-header level3"><a href="/pages/9d078d/#_7-加密和系统函数" class="sidebar-link">7. 加密和系统函数</a></li><li class="sidebar-sub-header level3"><a href="/pages/9d078d/#_8-流程控制函数" class="sidebar-link">8. 流程控制函数</a></li><li class="sidebar-sub-header level3"><a href="/pages/9d078d/#_9-分页查询" class="sidebar-link">9.分页查询</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/9d078d/#五-数据库-查询-进阶" class="sidebar-link">五.数据库 查询 - 进阶</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/9d078d/#_1-单表查询" class="sidebar-link">1. 单表查询</a></li><li class="sidebar-sub-header level3"><a href="/pages/9d078d/#_2-多表查询" class="sidebar-link">2. 多表查询</a></li><li class="sidebar-sub-header level3"><a href="/pages/9d078d/#_3-自连接" class="sidebar-link">3.自连接</a></li><li class="sidebar-sub-header level3"><a href="/pages/9d078d/#_4-子查询" class="sidebar-link">4.子查询</a></li><li class="sidebar-sub-header level4"><a href="/pages/9d078d/#all-和-any" class="sidebar-link">all 和 any</a></li><li class="sidebar-sub-header level3"><a href="/pages/9d078d/#_5-多列子查询" class="sidebar-link">5.多列子查询</a></li><li class="sidebar-sub-header level3"><a href="/pages/9d078d/#_6-合并查询" class="sidebar-link">6. 合并查询</a></li><li class="sidebar-sub-header level3"><a href="/pages/9d078d/#_7-外连接" class="sidebar-link">7. 外连接</a></li><li class="sidebar-sub-header level3"><a href="/pages/9d078d/#_8-主键" class="sidebar-link">8. 主键</a></li><li class="sidebar-sub-header level3"><a href="/pages/9d078d/#_9-非空-not-null-及-唯一-unique" class="sidebar-link">9. 非空(not null) 及 唯一(unique)</a></li><li class="sidebar-sub-header level3"><a href="/pages/9d078d/#_10-外键" class="sidebar-link">10. 外键</a></li><li class="sidebar-sub-header level3"><a href="/pages/9d078d/#_11-自增长" class="sidebar-link">11. 自增长</a></li><li class="sidebar-sub-header level3"><a href="/pages/9d078d/#_12-索引" class="sidebar-link">12. 索引</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/9d078d/#案例-数据库创建" class="sidebar-link">案例 - 数据库创建</a></li><li class="sidebar-sub-header level2"><a href="/pages/9d078d/#五-mysql-事务" class="sidebar-link">五.MySQL 事务</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/9d078d/#事务的隔离基本" class="sidebar-link">事务的隔离基本</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/9d078d/#六-表类型和存储引擎" class="sidebar-link">六.表类型和存储引擎</a></li><li class="sidebar-sub-header level2"><a href="/pages/9d078d/#七-视图" class="sidebar-link">七.视图</a></li><li class="sidebar-sub-header level2"><a href="/pages/9d078d/#八-mysql-用户管理" class="sidebar-link">八.MySQL 用户管理</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/9d078d/#用户权限" class="sidebar-link">用户权限</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/9d078d/#案例-2" class="sidebar-link">案例</a></li></ul></li><li><a href="/pages/e448b0/" class="sidebar-link">Java - JDBC、连接池</a></li><li><a href="/pages/14b515/" class="sidebar-link">Java - 正则表达式</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Java - Maven 技术</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-06225672><div class="articleInfo" data-v-06225672><ul class="breadcrumbs" data-v-06225672><li data-v-06225672><a href="/" title="首页" class="iconfont icon-home router-link-active" data-v-06225672></a></li> <li data-v-06225672><a href="/categories/?category=Java" title="分类" data-v-06225672>Java</a></li><li data-v-06225672><a href="/categories/?category=Java%20%E5%9F%BA%E7%A1%80" title="分类" data-v-06225672>Java 基础</a></li></ul> <div class="info" data-v-06225672><div title="作者" class="author iconfont icon-touxiang" data-v-06225672><a href="https://pupper.cn" target="_blank" title="作者" class="beLink" data-v-06225672>Pupper </a></div> <div title="创建时间" class="date iconfont icon-riqi" data-v-06225672><a href="javascript:;" data-v-06225672>2022-11-24</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-title">目录</div> <div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABKFJREFUSA3tVl1oFVcQnrMbrak3QUgkya1akpJYcrUtIqW1JvFBE9LiQ5v6JmJpolbMg32rVrhgoYK0QiMY6i9Y6EMaW5D+xFJaTYItIuK2Kr3+BJNwkxBj05sQY3b3nM6cs2dv9t7NT/vQJw/sndk5M/PNzJkzewGerP+pAmy+ON8lLzUJgA8ZYxYIYZmGYRnctDaWvJJAmTtfP1pvXsBCCPP8QFcCaRkZYACgDZFO4stNIcBCajEOlmmC9XpJ9bAGCaPaPmzPl32dvLSVu3BWCTQs0XQQ6g0DYgwLIoAZbBCdW/i+781o1VVlm/410mw4h06Y7bIPHNyWDyL4FHkX03Q8SrzNhZTZriieckWt7cL6MM85YcLpsi/7O9/iXFT6MswI0DmmpkSaJ0qLxFIm3+i1THHB3zmBH3PYx9CcykcLOeQVVa7QtdxTgQgEleX2AjHYfwA+2ddV77ruGoJUbhGDI09YSNXyMpUt5ylOzxgbUmtOp7NmbNt8v3arjTBfYELmLUV+M+nSawNNAUqpT3ClJWg5I3BLT+cGW/DXNGCa6tx1aakCGEigArTn4TDIPdrXXYKCZNrHLMCOEPvHBlLQ99s9eHB7EB6NTki73CVPQ2F5MSx/uRQixfmq7rK0wYD8w8E905bnPDfwoWs/rfv93NWN/ZfvwsLIU7A09gxECyISeGJkHAau98L97tuw7NXnoPyNF8FcYGLGKsOs0mN3OEyec9esGW/ZEl945dTP34wlR2FZVQWU1q0Cw8Tr7p+hgLLNL0FPxx/Q35mA8aEUrH6nCgwEl0tn7wUiZYJnNRh6DK4UH/k0lfyrsBKdPVv/AriGIQcEDQZ65LBAGe2Rzui9Ybjz7XUppz1/uKBbyVPGkN3ZAeC6hr0x7Nr38N5+EqkoOm17xpoqR9ohQF55ERSvr4Dkr3chNfC3DMzGJlNBElW8w9nsGQvhNGIzDkXzCg8cLK951xHsFBlTJspJNi3ZFIMF2AeDV3q8DNOB+YHi6QTrChDIWDBRi5U5f+ZMfJLu3ccrqxtdxk4SKH336LFxSmkqefwU5T8fhdSdQf9IVKD6aNiwI/hnmcAZ91isYMJIaCUCx9W098+LgruikeTqzqqxKPUwqJyCPJiyemVVZBOijDGjD38Os0jOiSPL1z3SPjXNANbiNPXAdzTfukjjuknNBbyz3nwgTd3AVFqUJ5hpHlq9MveLnWwttUfoygBmvVjuikxND3znrhsELnZk7k+OjIGxeNEkomyLVta0xxn+HZhjBc4YZ/AFjHjz9u3xRZl2BN4aq9nFwWh16IrQ1aHHEd3j1+4/dB9OtH4e29A2H1DyHQRmOSfQZ1Fy7MHBTGB6J/Djq6p3OxyO2cB+4Car7v/o3GXgfAkj23+x9ID1Teoamo/SXcbvSf2PX7Vc8DdCmE1vN9di+32P9/5YR3vLnhCVGUWBjEkr3yh4H8v9CzmsbdhzOKzsJKM90iFdaTMjRPhGVsakRvOaRidljo6H6G7j+ctrJpsP+4COhDIl0La2+FS4+5mlocBaXY5QnGZysIBYoeSsl5qQzrSj/cgNrfuEzlWBfwA+EjrZyWUvpAAAAABJRU5ErkJggg==">Java - Mysql<!----></h1> <!----> <div class="theme-vdoing-content content__default"><h2 id="一、安装"><a href="#一、安装" class="header-anchor">#</a> 一、安装</h2> <h3 id="_1-下载安装包-mysql-下载地址"><a href="#_1-下载安装包-mysql-下载地址" class="header-anchor">#</a> 1.下载安装包 —— <a href="https://www.mysql.com/downloads/" target="_blank" rel="noopener noreferrer">MySQL 下载地址<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></h3> <p><img src="https://pupper.com.cn/img/1655103907534-d3ceb445-4ad0-46f8-b63e-8c4d295c8bd6.png" alt=""></p> <p><img src="https://pupper.com.cn/img/1655103908270-6e6472e1-1ca9-45a8-b3a1-bcba2c391284.png" alt=""></p> <p><img src="https://pupper.com.cn/img/1655103907511-36cb4b95-dc4c-4cd0-8887-5a2ee03428b7.png" alt=""></p> <h3 id="_2-安装-mysql-注意保存临时密码"><a href="#_2-安装-mysql-注意保存临时密码" class="header-anchor">#</a> 2.安装 mysql（注意保存临时密码）</h3> <p>双击 mysql-5.7.29-macos10.14-x86_64.dmg 文件，进行安装
<img src="https://pupper.com.cn/img/1655103907357-88559b7e-e2a4-43da-a654-c593a50f8f9f.png" alt=""></p> <p><img src="https://pupper.com.cn/img/1655103911598-4f1f7423-ace2-456f-adff-d65ee9eac833.png" alt=""></p> <p><img src="https://pupper.com.cn/img/1655103913068-f8744e06-3a9c-40ef-9bd8-7fa0350cd3f9.png" alt=""></p> <p><img src="https://pupper.com.cn/img/1655103913166-93d7a437-d7f6-4bfe-96db-d854eb0beb94.png" alt=""></p> <hr> <div class="custom-block danger"><p class="custom-block-title">警告</p> <p>下截图中有MySQL 的 <strong>临时密码（ _Th5u1bh+t(( ）</strong> ，必须注意
下截图中有MySQL 的 <strong>临时密码（ _Th5u1bh+t(( ）</strong> ，必须注意
下截图中有MySQL 的 <strong>临时密码（ _Th5u1bh+t(( ）</strong> ，必须注意</p></div> <p><img src="https://pupper.com.cn/img/1655106759696-f03fe7e0-4d45-45d3-bb6a-f0d0fbcecb3d.png" alt=""></p> <hr> <p><img src="https://pupper.com.cn/img/1655103913153-67bc4453-1f00-4dcd-9bba-50fcd1b88e74.png" alt=""> <img src="https://pupper.com.cn/img/1655103913193-fc1922ab-bdcb-4a1f-9608-64755ec66af3.png" alt=""></p> <h3 id="_3-启动-mysql"><a href="#_3-启动-mysql" class="header-anchor">#</a> 3. 启动 MySQL</h3> <p><img src="https://pupper.com.cn/img/1655103915570-8dd8efce-2d6f-459f-8d60-cc7a3d184a67.png" alt=""> <img src="https://pupper.com.cn/img/1655103915857-978f676b-9c06-4f8b-b2ab-3f532f2b70d5.png" alt=""></p> <h3 id="_4-修改账户密码"><a href="#_4-修改账户密码" class="header-anchor">#</a> 4. 修改账户密码</h3> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment"># 启动完成后，打开终端，输入如下内容，然后按回车键</span>

<span class="token builtin class-name">alias</span> <span class="token assign-left variable">mysql</span><span class="token operator">=</span>/usr/local/mysql/bin/mysql
<span class="token builtin class-name">alias</span> <span class="token assign-left variable">mysqladmin</span><span class="token operator">=</span>/usr/local/mysql/bin/mysqladmin 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><div class="custom-block tip"><p class="custom-block-title">提示</p> <p>这两条命令是为了方便直接打开 iTerm 就可以运行mysql命令，而不是必须进入mysql安装目录才能运行。</p></div> <p><img src="https://pupper.com.cn/img/1655105189149-7149dd6c-01e6-4dda-a3ef-4ce4c2209eea.png" alt=""></p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment"># 修改 root 的密码为 12345678</span>

mysqladmin -u root -p password <span class="token number">12345678</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="_5-进入终端"><a href="#_5-进入终端" class="header-anchor">#</a> 5.进入终端</h3> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// 用户名为：root      密码为：12345678</span>

mysql <span class="token operator">-</span>h 主机名 <span class="token operator">-</span><span class="token class-name">P</span> 端口 <span class="token operator">-</span>u 用户名 <span class="token operator">-</span>p密码

mysql <span class="token operator">-</span>u root <span class="token operator">-</span>p12345678
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><div class="custom-block tip"><p class="custom-block-title">提示</p> <p>使用 quit 退出 MySQL
net stop mysql 服务器名 		停止服务
net start mysql 服务器名		启动服务</p></div> <h2 id="二、数据库操作"><a href="#二、数据库操作" class="header-anchor">#</a> 二、数据库操作</h2> <h3 id="_1-数据库操作"><a href="#_1-数据库操作" class="header-anchor">#</a> 1. 数据库操作</h3> <h4 id="_1-创建数据库"><a href="#_1-创建数据库" class="header-anchor">#</a> 1. 创建数据库</h4> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 创建数据库语法</span>

<span class="token keyword">CREATE</span> <span class="token keyword">DATABASE</span> <span class="token punctuation">[</span><span class="token keyword">IF</span> <span class="token operator">NOT</span> <span class="token keyword">EXISTS</span><span class="token punctuation">]</span> 数据库名 <span class="token keyword">CHARACTER</span> <span class="token keyword">SET</span> 字符集 <span class="token keyword">COLLATE</span> 校对规则<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><div class="custom-block note"><p class="custom-block-title">笔记</p> <ul><li>CHARACTER SET : 指定数据库采用的字符集，默认为 utf8;</li> <li>COLLATE : 指定数据库字符集的校对规则
<ul><li>默认为 utf8_general_ci （不区分大小写）；</li> <li>utf8_bin （区分大小写）；</li></ul></li></ul></div> <h4 id="_2-查看及删除数据库"><a href="#_2-查看及删除数据库" class="header-anchor">#</a> 2. 查看及删除数据库</h4> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 查看、删除数据库</span>

<span class="token comment">-- 显示数据库语句：</span>
<span class="token keyword">SHOW</span> DATABASHES

<span class="token comment">-- 显示数据库创建语句：</span>
<span class="token keyword">SHOW</span> <span class="token keyword">CREATE</span> <span class="token keyword">DATABASE</span> db_name

<span class="token comment">-- 删除数据库语句：</span>
<span class="token keyword">DROP</span> <span class="token keyword">DATABASE</span> <span class="token punctuation">[</span><span class="token keyword">IF</span> <span class="token keyword">EXISTS</span><span class="token punctuation">]</span> db_name
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 案例</span>

<span class="token comment">-- 创建数据库</span>
<span class="token keyword">CREATE</span> <span class="token keyword">DATABASE</span> db_01 <span class="token keyword">CHARACTER</span> <span class="token keyword">SET</span> utf8 <span class="token keyword">COLLATE</span> utf8_bin<span class="token punctuation">;</span>

<span class="token comment">-- 查看所有的数据库</span>
<span class="token keyword">SHOW</span> <span class="token keyword">DATABASES</span><span class="token punctuation">;</span>

<span class="token comment">-- 查看数据库；</span>
<span class="token keyword">show</span> <span class="token keyword">database</span> db_01<span class="token punctuation">;</span>

<span class="token comment">-- 删除数据库</span>
<span class="token keyword">drop</span> <span class="token keyword">database</span> db_01<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h4 id="_3-备份及恢复数据库"><a href="#_3-备份及恢复数据库" class="header-anchor">#</a> 3.备份及恢复数据库</h4> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment"># 备份数据库 - dos 中执行</span>

mysqldump -u 用户名 -p -B 数据库 <span class="token number">1</span> 数据库 <span class="token number">2</span> 数据库 <span class="token number">3</span> <span class="token operator">&gt;</span> 文件名.sql

-- 备份某几个表
mysqldump -u 用户名 -p 数据库 表 <span class="token number">1</span> 表 <span class="token number">2</span> 表 n <span class="token operator">&gt;</span> 文件名.sql
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 恢复数据库 - sql 中执行</span>

Source 文件名<span class="token punctuation">.</span><span class="token keyword">sql</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="_2-表"><a href="#_2-表" class="header-anchor">#</a> 2. 表</h3> <h4 id="_1-创建表"><a href="#_1-创建表" class="header-anchor">#</a> 1. 创建表</h4> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 表创建语法</span>

<span class="token keyword">create</span> <span class="token keyword">table</span> 表名<span class="token punctuation">(</span>
  字段<span class="token number">1</span>  类型<span class="token punctuation">,</span>字段<span class="token number">2</span>  类型。。。
<span class="token punctuation">)</span><span class="token keyword">character</span> <span class="token keyword">set</span> 字符集 <span class="token keyword">collate</span> 校对规则 <span class="token keyword">engine</span> 引擎
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><div class="custom-block tip"><p class="custom-block-title">提示</p> <p>character set：如不指定，则默认使用数据库字符集；
collate： 如不指定，则默认使用数据库校对规则；
engine： 引擎</p></div> <h4 id="_2-mysql-的数据类型"><a href="#_2-mysql-的数据类型" class="header-anchor">#</a> 2. MySQL 的数据类型</h4> <div class="custom-block tip"><p class="custom-block-title">提示</p> <p>在创建字段类型时,如果没有添加 unsinged 关键字,则表示该类型是有符号的;</p></div> <p><img src="https://pupper.com.cn/img/1655188958652-67fbde81-8dd1-4b32-a6ab-e40c07129820.jpeg" alt=""></p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- unsinged  的使用</span>

<span class="token comment">-- 创建字段 使用 unsigend 表示不带符号,大小从 0 开始</span>
<span class="token keyword">create</span> <span class="token keyword">table</span> usr <span class="token punctuation">(</span>id <span class="token keyword">tinyint</span> <span class="token keyword">UNSIGNED</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">-- 添加数据</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> usr <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">-- 查询数据</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> usr <span class="token keyword">where</span> id <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><div class="custom-block note"><p class="custom-block-title">笔记</p> <p>小数类型:</p> <ul><li>float / double [unsigend]
<ul><li>float : 单精度</li> <li>double : 双精度</li></ul></li> <li>decimal [M,D] [unsigend] : 可以支持更加精确的小数位
<ul><li>M : 小数位数(精度)的总数;
<ul><li>M 最大 65;</li> <li>如果 M 被省略, 则默认为 10;</li></ul></li> <li>D : 小数点后面的位数;
<ul><li>如果 D 是 0, 则值没有小数点;</li> <li>D 最大为 30;</li> <li>如果 D 被省略, 则默认为 0</li></ul></li></ul></li></ul></div> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 小数 使用 案例</span>

<span class="token keyword">create</span> <span class="token keyword">table</span> b1 <span class="token punctuation">(</span>num1 <span class="token keyword">float</span><span class="token punctuation">,</span> num2 <span class="token keyword">double</span><span class="token punctuation">,</span> num3 <span class="token keyword">decimal</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">insert</span> <span class="token keyword">into</span> b1 <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token number">88.12313123</span><span class="token punctuation">,</span> <span class="token number">99.23423424234234</span><span class="token punctuation">,</span><span class="token number">12312.12312313123</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> b1<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><div class="custom-block tip"><p class="custom-block-title">提示</p> <p>字符串类型:</p> <ul><li>char(4) :  这个 4 表示字符数 (最大 255), 不是字节数,不管是中文还是字母都是放 4 个, 按字符计算;
<ul><li>固定长度, 不论存放几个字符, 都会分配 4 个字符的空间;</li> <li>主要用于存放固定长度的内容, 如 手机号, 身份证等;</li></ul></li> <li>varchar(4) : 这个 4 表示字符数,不管是字母还是中文都一定义好的表编码来存储;
<ul><li>可变长度, 当实际数据不足 4 个字符时,按实际长度分配空间;</li> <li>varchar 本身需要 1~3 个字节的空间来存放字符长度, 因此 varchar 最大存放空间为 65532 个字节;</li></ul></li></ul></div> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// 日期类型, 时间戳 </span>

create table 表名 <span class="token punctuation">(</span>字段名 timestamp 
    NOT NULL DEFAULT CURRENT_TIMESTAMP 
    NO <span class="token class-name">UPDATE</span> CURRENT_TIMESTAMP
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><div class="custom-block tip"><p class="custom-block-title">提示</p> <p>NOT NULL DEFAULT CURRENT_TIMESTAMP NO UPDATE CURRENT_TIMESTAMP :
表示不为空, 并且以当前服务器时间进行更新;</p></div> <h4 id="_3-修改表"><a href="#_3-修改表" class="header-anchor">#</a> 3. 修改表</h4> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 语法</span>

<span class="token comment">-- 查看表</span>
<span class="token keyword">desc</span> 表名<span class="token punctuation">;</span>

<span class="token comment">-- 删除表</span>
<span class="token keyword">drop</span> <span class="token keyword">table</span> 表名<span class="token punctuation">;</span>

<span class="token comment">-- 修改表名</span>
<span class="token keyword">rename</span> <span class="token keyword">table</span> 表名 <span class="token keyword">to</span> 新表名<span class="token punctuation">;</span>

<span class="token comment">-- 修改字符集</span>
<span class="token keyword">alter</span> <span class="token keyword">table</span> 表名 <span class="token keyword">character</span> <span class="token keyword">set</span> 字符集<span class="token punctuation">;</span>

<span class="token comment">-- 添加字段</span>
<span class="token keyword">alter</span> <span class="token keyword">table</span> 表名 <span class="token keyword">add</span> 字段名 字段类型 <span class="token punctuation">;</span>

<span class="token comment">-- 修改字段</span>
<span class="token keyword">alter</span> <span class="token keyword">table</span> 表名 <span class="token keyword">modify</span> 字段名 字段类型<span class="token punctuation">;</span>

<span class="token comment">-- 删除字段</span>
<span class="token keyword">alter</span> <span class="token keyword">table</span> 表名 <span class="token keyword">drop</span> 字段名<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><h3 id="案例"><a href="#案例" class="header-anchor">#</a> 案例</h3> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 表 及 字段的增删改</span>

<span class="token comment">-- 创建表</span>
<span class="token keyword">create</span> <span class="token keyword">table</span> emp <span class="token punctuation">(</span>
  <span class="token identifier"><span class="token punctuation">`</span>id<span class="token punctuation">`</span></span> <span class="token keyword">int</span><span class="token punctuation">,</span> 
  <span class="token identifier"><span class="token punctuation">`</span>name<span class="token punctuation">`</span></span> <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">32</span><span class="token punctuation">)</span><span class="token punctuation">,</span> 
  <span class="token identifier"><span class="token punctuation">`</span>sex<span class="token punctuation">`</span></span> <span class="token keyword">CHAR</span><span class="token punctuation">,</span> 
  <span class="token identifier"><span class="token punctuation">`</span>brithday<span class="token punctuation">`</span></span> <span class="token keyword">date</span><span class="token punctuation">,</span> 
  <span class="token identifier"><span class="token punctuation">`</span>entry_date<span class="token punctuation">`</span></span> <span class="token keyword">datetime</span><span class="token punctuation">,</span> 
  <span class="token identifier"><span class="token punctuation">`</span>job<span class="token punctuation">`</span></span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">32</span><span class="token punctuation">)</span><span class="token punctuation">,</span> 
  <span class="token identifier"><span class="token punctuation">`</span>salary<span class="token punctuation">`</span></span> <span class="token keyword">double</span><span class="token punctuation">,</span> 
  <span class="token identifier"><span class="token punctuation">`</span>resume<span class="token punctuation">`</span></span> <span class="token keyword">text</span>
<span class="token punctuation">)</span> <span class="token keyword">CHARSET</span> utf8 <span class="token keyword">collate</span> utf8_bin <span class="token keyword">engine</span> <span class="token keyword">innodb</span><span class="token punctuation">;</span>

<span class="token comment">-- 添加数据</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> emp <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">'小旋风'</span><span class="token punctuation">,</span><span class="token string">'男'</span><span class="token punctuation">,</span><span class="token string">'2022-1-1'</span><span class="token punctuation">,</span><span class="token string">'2022-3-3 5:20:32'</span><span class="token punctuation">,</span><span class="token string">'巡山'</span><span class="token punctuation">,</span><span class="token number">1000</span><span class="token punctuation">,</span><span class="token string">'大王叫我来巡山'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">-- 添加字段</span>
<span class="token comment">-- not null default '' : 不能为空, 默认值为 '' 空字符串</span>
<span class="token comment">-- after resume : 添加在 resume 字段后面</span>
<span class="token keyword">alter</span> <span class="token keyword">table</span> emp <span class="token keyword">add</span> image <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span> <span class="token keyword">default</span> <span class="token string">''</span> <span class="token keyword">after</span> resume<span class="token punctuation">;</span>

<span class="token comment">-- 修改字段, 并且不能为空</span>
<span class="token keyword">alter</span> <span class="token keyword">table</span> emp <span class="token keyword">modify</span> job <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">60</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span> <span class="token keyword">default</span> <span class="token string">''</span><span class="token punctuation">;</span>

<span class="token comment">-- 删除字段</span>
<span class="token keyword">alter</span> <span class="token keyword">table</span> emp <span class="token keyword">drop</span> sex<span class="token punctuation">;</span>

<span class="token comment">-- 修改表名</span>
<span class="token keyword">rename</span> <span class="token keyword">table</span> emp <span class="token keyword">to</span> employee<span class="token punctuation">;</span>

<span class="token comment">-- 修改表的字符集</span>
<span class="token keyword">alter</span> <span class="token keyword">table</span> employee <span class="token keyword">character</span> <span class="token keyword">set</span> utf8<span class="token punctuation">;</span>

<span class="token comment">-- 修改字段名</span>
<span class="token keyword">alter</span> <span class="token keyword">table</span> employee change <span class="token identifier"><span class="token punctuation">`</span>name<span class="token punctuation">`</span></span> user_name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">32</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span> <span class="token keyword">default</span> <span class="token string">''</span><span class="token punctuation">;</span>

<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> employee<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br></div></div><h2 id="三-数据的-增-删-改"><a href="#三-数据的-增-删-改" class="header-anchor">#</a> 三.数据的 增, 删, 改</h2> <h3 id="_1-增"><a href="#_1-增" class="header-anchor">#</a> 1. 增</h3> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 语法</span>

inset <span class="token keyword">into</span> 表名 <span class="token keyword">values</span> <span class="token punctuation">(</span>字段值<span class="token punctuation">,</span>字段值<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span>

inset <span class="token keyword">into</span> 表名<span class="token punctuation">(</span>字段<span class="token punctuation">,</span>字段<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span> <span class="token keyword">values</span> <span class="token punctuation">(</span>字段值<span class="token punctuation">,</span>字段值<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><div class="custom-block warning"><p class="custom-block-title">注意</p> <p>注意事项:</p> <ul><li>数据类型需要一致;</li> <li>数据长度需要在规定范围;</li> <li>字符 和 日期类型 数据需要放在 单引号 中;</li> <li>values 中的值需要与表名后的字段名顺序一致;
<ul><li>如果表名后没有字段名, 则需要与表中的字段名顺序一致;</li></ul></li> <li>如果字段运行为空, 则可以插入 null;</li> <li>inset into 表名 values (), () : 可以一次插入多条数据;</li> <li>如果某个字段不给值, 则会使用默认值;
<ul><li>如果没有默认值, 则会报错;</li></ul></li></ul></div> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 添加数据</span>

<span class="token keyword">create</span> <span class="token keyword">table</span> <span class="token identifier"><span class="token punctuation">`</span>phone<span class="token punctuation">`</span></span><span class="token punctuation">(</span><span class="token identifier"><span class="token punctuation">`</span>id<span class="token punctuation">`</span></span> <span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>name<span class="token punctuation">`</span></span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>price<span class="token punctuation">`</span></span> <span class="token keyword">double</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">insert</span> <span class="token keyword">into</span> phone <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">'华为'</span><span class="token punctuation">,</span><span class="token number">3000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">insert</span> <span class="token keyword">into</span> phone<span class="token punctuation">(</span><span class="token identifier"><span class="token punctuation">`</span>id<span class="token punctuation">`</span></span><span class="token punctuation">,</span><span class="token identifier"><span class="token punctuation">`</span>name<span class="token punctuation">`</span></span><span class="token punctuation">,</span><span class="token identifier"><span class="token punctuation">`</span>price<span class="token punctuation">`</span></span><span class="token punctuation">)</span> <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token string">'苹果'</span><span class="token punctuation">,</span><span class="token number">5000</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token string">'小米'</span><span class="token punctuation">,</span><span class="token number">3000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">-- 字段可以为空时,实际值可以不写</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> phone <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h3 id="_2-改"><a href="#_2-改" class="header-anchor">#</a> 2.改</h3> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 语法</span>

<span class="token keyword">update</span> 表名 <span class="token keyword">set</span> 字段<span class="token operator">=</span>值<span class="token punctuation">,</span>字段<span class="token operator">=</span>值<span class="token punctuation">;</span>

<span class="token keyword">update</span> 表名 <span class="token keyword">set</span> 字段<span class="token operator">=</span>值 <span class="token keyword">where</span> 查询条件<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><div class="custom-block tip"><p class="custom-block-title">提示</p> <ul><li>如果 update 语句后 没有 where 语句, 则默认为 修改所有数据 ;</li></ul></div> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 修改数据</span>

<span class="token keyword">update</span> emp <span class="token keyword">set</span> salary <span class="token operator">=</span> <span class="token number">5000</span><span class="token punctuation">;</span>

<span class="token keyword">update</span> emp <span class="token keyword">set</span> salary <span class="token operator">=</span> <span class="token number">2000</span> <span class="token keyword">where</span> user_name <span class="token operator">=</span> <span class="token string">'张三'</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="_3-删"><a href="#_3-删" class="header-anchor">#</a> 3.删</h3> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 语法</span>

<span class="token keyword">delete</span> <span class="token keyword">from</span> 表名 <span class="token keyword">where</span> 查询条件<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><div class="custom-block tip"><p class="custom-block-title">提示</p> <ul><li>如果 delete 语句后 没有 where 语句, 则默认为 删除所有数据 ;</li></ul></div> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 删除数据</span>

<span class="token keyword">delete</span> <span class="token keyword">from</span> emp <span class="token keyword">where</span> user_name <span class="token operator">=</span> <span class="token string">'李四'</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="_4-表复制-蠕虫复制"><a href="#_4-表复制-蠕虫复制" class="header-anchor">#</a> 4.表复制 (蠕虫复制)</h3> <div class="custom-block danger"><p class="custom-block-title">警告</p> <p>表复制(蠕虫复制) : 主要用于获得大量的测试数据, 谨慎使用</p> <ul><li>数据都是重复的</li></ul></div> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 案例</span>

<span class="token comment">-- 将 emp 查询的数据 逐条添加到 test01 表中</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> test01 <span class="token punctuation">(</span>id<span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>name<span class="token punctuation">`</span></span><span class="token punctuation">,</span> sal<span class="token punctuation">,</span> job<span class="token punctuation">,</span> deptno<span class="token punctuation">)</span> <span class="token keyword">select</span> empno<span class="token punctuation">,</span> ename<span class="token punctuation">,</span> sal<span class="token punctuation">,</span> job<span class="token punctuation">,</span> deptno <span class="token keyword">from</span> emp<span class="token punctuation">;</span>

<span class="token comment">-- 表数据的自我复制 (每次运行都会 将自己的每一条数据都复制一次)</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> test01 <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> test01<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="_5-去除表中-重复的数据"><a href="#_5-去除表中-重复的数据" class="header-anchor">#</a> 5. 去除表中 重复的数据</h3> <div class="custom-block tip"><p class="custom-block-title">提示</p> <p>create table new_table like old_table : 复制表结构</p></div> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 去除表中重复的数据</span>

<span class="token comment">-- 复制 表 结构 创建临时表</span>
<span class="token keyword">create</span> <span class="token keyword">table</span> table_tmp <span class="token operator">like</span> test01<span class="token punctuation">;</span>

<span class="token comment">-- 将原表中的数据去重 写入 临时表</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> table_tmp <span class="token keyword">select</span> <span class="token keyword">distinct</span> <span class="token operator">*</span> <span class="token keyword">from</span> test01<span class="token punctuation">;</span>

<span class="token comment">-- 清除 原表中的数据 </span>
<span class="token keyword">delete</span> <span class="token keyword">from</span> test01<span class="token punctuation">;</span>

<span class="token comment">-- 将 临时表中的数据 写入 原表中</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> test01 <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> table_tmp<span class="token punctuation">;</span>

<span class="token comment">-- 删除 临时表</span>
<span class="token keyword">drop</span> <span class="token keyword">table</span> table_tmp<span class="token punctuation">;</span>

<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> test01<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><h2 id="四-数据库-查询-基础"><a href="#四-数据库-查询-基础" class="header-anchor">#</a> 四.数据库 查询 - 基础</h2> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 基本语法</span>

<span class="token keyword">select</span> <span class="token punctuation">[</span><span class="token keyword">distinct</span><span class="token punctuation">]</span><span class="token operator">*</span><span class="token operator">|</span> 列名 <span class="token keyword">from</span> 表名 <span class="token keyword">where</span> 查询条件<span class="token punctuation">;</span>

<span class="token comment">-- 字段取别名</span>
<span class="token keyword">select</span> 字段名 <span class="token keyword">as</span> 别名 <span class="token keyword">from</span> 表名<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><div class="custom-block note"><p class="custom-block-title">笔记</p> <ul><li>select : 指定查询哪些列的数据;</li> <li>distinct : 可选参数, 指显示结果时, 去除重复的数据;</li></ul></div> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 去重 求和 - 案例</span>

<span class="token keyword">create</span> <span class="token keyword">table</span> student <span class="token punctuation">(</span><span class="token identifier"><span class="token punctuation">`</span>id<span class="token punctuation">`</span></span> <span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>name<span class="token punctuation">`</span></span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>chinese<span class="token punctuation">`</span></span> <span class="token keyword">float</span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>english<span class="token punctuation">`</span></span> <span class="token keyword">float</span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>math<span class="token punctuation">`</span></span> <span class="token keyword">float</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">insert</span> <span class="token keyword">into</span> student <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">'韩信'</span><span class="token punctuation">,</span><span class="token number">89</span><span class="token punctuation">,</span><span class="token number">78</span><span class="token punctuation">,</span><span class="token number">90</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token string">'张飞'</span><span class="token punctuation">,</span><span class="token number">67</span><span class="token punctuation">,</span><span class="token number">98</span><span class="token punctuation">,</span><span class="token number">56</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token string">'宋江'</span><span class="token punctuation">,</span><span class="token number">87</span><span class="token punctuation">,</span><span class="token number">78</span><span class="token punctuation">,</span><span class="token number">77</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token string">'关羽'</span><span class="token punctuation">,</span><span class="token number">88</span><span class="token punctuation">,</span><span class="token number">98</span><span class="token punctuation">,</span><span class="token number">90</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token string">'赵云'</span><span class="token punctuation">,</span><span class="token number">82</span><span class="token punctuation">,</span><span class="token number">84</span><span class="token punctuation">,</span><span class="token number">67</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token string">'欧阳锋'</span><span class="token punctuation">,</span><span class="token number">55</span><span class="token punctuation">,</span><span class="token number">85</span><span class="token punctuation">,</span><span class="token number">45</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token string">'黄蓉'</span><span class="token punctuation">,</span><span class="token number">75</span><span class="token punctuation">,</span><span class="token number">65</span><span class="token punctuation">,</span><span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">-- 对结果去重</span>
<span class="token keyword">select</span> <span class="token keyword">distinct</span> english <span class="token keyword">from</span> student<span class="token punctuation">;</span>

<span class="token comment">-- 对所有成绩求和 </span>
<span class="token keyword">select</span> <span class="token identifier"><span class="token punctuation">`</span>name<span class="token punctuation">`</span></span><span class="token punctuation">,</span><span class="token punctuation">(</span>chinese <span class="token operator">+</span> english <span class="token operator">+</span> math<span class="token punctuation">)</span> <span class="token keyword">as</span> sum <span class="token keyword">from</span> student<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h3 id="_1-where-子句中的运算符"><a href="#_1-where-子句中的运算符" class="header-anchor">#</a> 1. where 子句中的运算符</h3> <table><thead><tr><th>比较运算符</th> <th>&lt; &lt;= &gt; &gt;= !=</th> <th></th></tr></thead> <tbody><tr><td></td> <td>between ... and...</td> <td>显示在某一区间的值, 闭区间</td></tr> <tr><td></td> <td>in(set)</td> <td>显示在 in 列表中的值,如 in(10,20)</td></tr> <tr><td></td> <td>like 或 not like</td> <td>模糊查询</td></tr> <tr><td></td> <td>is null</td> <td>判断是否为空</td></tr> <tr><td>逻辑运算符</td> <td>and</td> <td>多个条件同时成立</td></tr> <tr><td></td> <td>or</td> <td>多个条件任一成立</td></tr> <tr><td></td> <td>not</td> <td>不成立</td></tr></tbody></table> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 案例</span>

<span class="token comment">-- 查询赵云的成绩 </span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> student <span class="token keyword">where</span> <span class="token identifier"><span class="token punctuation">`</span>name<span class="token punctuation">`</span></span><span class="token operator">=</span><span class="token string">'赵云'</span><span class="token punctuation">;</span>

<span class="token comment">-- 查询 英语成绩大于 90 分的</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> student <span class="token keyword">where</span> <span class="token identifier"><span class="token punctuation">`</span>english<span class="token punctuation">`</span></span> <span class="token operator">&gt;</span> <span class="token number">90</span><span class="token punctuation">;</span>

<span class="token comment">-- 查询 数学大于 60 分并且 ID 大于 4  </span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> student <span class="token keyword">where</span> <span class="token identifier"><span class="token punctuation">`</span>math<span class="token punctuation">`</span></span> <span class="token operator">&gt;</span> <span class="token number">60</span> <span class="token operator">and</span> <span class="token identifier"><span class="token punctuation">`</span>id<span class="token punctuation">`</span></span> <span class="token operator">&gt;</span> <span class="token number">4</span><span class="token punctuation">;</span>

<span class="token comment">-- 查询 总分大于 200 分, 并且数学成绩小于语文成绩,</span>
<span class="token comment">-- 赵% : 表示以赵开头的人  </span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> student <span class="token keyword">where</span> <span class="token punctuation">(</span><span class="token identifier"><span class="token punctuation">`</span>chinese<span class="token punctuation">`</span></span> <span class="token operator">+</span> <span class="token identifier"><span class="token punctuation">`</span>english<span class="token punctuation">`</span></span> <span class="token operator">+</span> <span class="token identifier"><span class="token punctuation">`</span>math<span class="token punctuation">`</span></span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">200</span> <span class="token operator">and</span> <span class="token identifier"><span class="token punctuation">`</span>math<span class="token punctuation">`</span></span> <span class="token operator">&lt;</span> <span class="token identifier"><span class="token punctuation">`</span>chinese<span class="token punctuation">`</span></span> <span class="token operator">and</span> <span class="token identifier"><span class="token punctuation">`</span>name<span class="token punctuation">`</span></span> <span class="token operator">like</span> <span class="token string">'赵%'</span><span class="token punctuation">;</span>

<span class="token comment">-- 查询 查询英语成绩大于语文成绩的 </span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> student <span class="token keyword">where</span> <span class="token identifier"><span class="token punctuation">`</span>english<span class="token punctuation">`</span></span> <span class="token operator">&gt;</span> <span class="token identifier"><span class="token punctuation">`</span>chinese<span class="token punctuation">`</span></span><span class="token punctuation">;</span>

<span class="token comment">-- 查询 英语分数在 89 ~ 90 之间的 </span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> student <span class="token keyword">where</span> <span class="token identifier"><span class="token punctuation">`</span>english<span class="token punctuation">`</span></span> <span class="token operator">between</span> <span class="token number">80</span> <span class="token operator">and</span> <span class="token number">90</span><span class="token punctuation">;</span>

<span class="token comment">-- 查询 数学分数在 89, 90, 91 的 </span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> student <span class="token keyword">where</span> <span class="token identifier"><span class="token punctuation">`</span>math<span class="token punctuation">`</span></span> <span class="token operator">in</span> <span class="token punctuation">(</span><span class="token number">89</span><span class="token punctuation">,</span> <span class="token number">90</span><span class="token punctuation">,</span> <span class="token number">91</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">-- 查询 所有姓李的 </span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> student <span class="token keyword">where</span> <span class="token identifier"><span class="token punctuation">`</span>name<span class="token punctuation">`</span></span> <span class="token operator">like</span> <span class="token string">'关%'</span><span class="token punctuation">;</span>

<span class="token comment">-- 查询 数学比语文少 30 分的 </span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> student <span class="token keyword">where</span> <span class="token punctuation">(</span><span class="token identifier"><span class="token punctuation">`</span>Chinese<span class="token punctuation">`</span></span> <span class="token operator">-</span> <span class="token identifier"><span class="token punctuation">`</span>math<span class="token punctuation">`</span></span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">30</span><span class="token punctuation">;</span>

<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> student<span class="token punctuation">;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br></div></div><h3 id="_2-排序-order-by"><a href="#_2-排序-order-by" class="header-anchor">#</a> 2. 排序 - order...by...</h3> <blockquote><p>order by : 指定排序的字段, 字段既可以是表中的, 也可以是 select 语句后指定的</p></blockquote> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 语法</span>

<span class="token keyword">select</span> 列名 <span class="token keyword">from</span> 表名 <span class="token keyword">where</span> 查询条件 <span class="token keyword">order</span> <span class="token keyword">by</span> 排序条件<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><div class="custom-block tip"><p class="custom-block-title">提示</p> <p>注意事项:</p> <ul><li>默认排序为 升序 asc ,
<ul><li>desc 为降序</li></ul></li> <li>order by 子句一般位于 select 语句的结尾;</li></ul></div> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 案例</span>

<span class="token keyword">insert</span> <span class="token keyword">into</span> student <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">,</span> <span class="token string">'韩非子'</span><span class="token punctuation">,</span> <span class="token number">45</span><span class="token punctuation">,</span><span class="token number">65</span><span class="token punctuation">,</span><span class="token number">99</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">-- 对数学成绩排序 升序 </span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> student <span class="token keyword">order</span> <span class="token keyword">by</span> <span class="token identifier"><span class="token punctuation">`</span>math<span class="token punctuation">`</span></span><span class="token punctuation">;</span>

<span class="token comment">-- 按总分 从高到底输出 </span>
<span class="token keyword">select</span> <span class="token identifier"><span class="token punctuation">`</span>name<span class="token punctuation">`</span></span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token identifier"><span class="token punctuation">`</span>chinese<span class="token punctuation">`</span></span> <span class="token operator">+</span> <span class="token identifier"><span class="token punctuation">`</span>english<span class="token punctuation">`</span></span> <span class="token operator">+</span> <span class="token identifier"><span class="token punctuation">`</span>math<span class="token punctuation">`</span></span><span class="token punctuation">)</span> <span class="token keyword">as</span> total_score <span class="token keyword">from</span> student 
    <span class="token keyword">order</span> <span class="token keyword">by</span> total_score <span class="token keyword">desc</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h3 id="_3-统计函数"><a href="#_3-统计函数" class="header-anchor">#</a> 3.统计函数</h3> <p>数据库 - 数据
<a href="https://wwi.lanzoup.com/iJj3T09dte6h" target="_blank" rel="noopener noreferrer">雇员系统表.txt<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h4 id="_1-统计函数-count"><a href="#_1-统计函数-count" class="header-anchor">#</a> 1. 统计函数 - count</h4> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 语法</span>

<span class="token keyword">select</span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword">from</span> 表名 <span class="token keyword">where</span> 查询条件<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><div class="custom-block tip"><p class="custom-block-title">提示</p> <ul><li>count(*) : 返回满足条件的记录的行数;</li> <li>count(字段) : 返回满足条件的列的数量, 但是会排除值为 null 的行</li></ul></div> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 案例</span>

<span class="token comment">-- 统计 一共有多少个学生 </span>
<span class="token keyword">select</span> <span class="token function">count</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span> <span class="token keyword">from</span> student<span class="token punctuation">;</span>

<span class="token comment">-- 统计 数学成绩大于 90 的 </span>
<span class="token keyword">select</span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token identifier"><span class="token punctuation">`</span>id<span class="token punctuation">`</span></span><span class="token punctuation">)</span> <span class="token keyword">as</span> num <span class="token keyword">from</span> student <span class="token keyword">where</span> <span class="token identifier"><span class="token punctuation">`</span>math<span class="token punctuation">`</span></span> <span class="token operator">&gt;</span> <span class="token number">90</span><span class="token punctuation">;</span>

<span class="token comment">-- 统计 总分大于 250 的 </span>
<span class="token keyword">select</span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token identifier"><span class="token punctuation">`</span>id<span class="token punctuation">`</span></span><span class="token punctuation">)</span> <span class="token keyword">as</span> num <span class="token keyword">from</span> student <span class="token keyword">where</span> <span class="token punctuation">(</span><span class="token identifier"><span class="token punctuation">`</span>chinese<span class="token punctuation">`</span></span> <span class="token operator">+</span> <span class="token identifier"><span class="token punctuation">`</span>english<span class="token punctuation">`</span></span> <span class="token operator">+</span> <span class="token identifier"><span class="token punctuation">`</span>math<span class="token punctuation">`</span></span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">250</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h4 id="_2-求和函数-sum"><a href="#_2-求和函数-sum" class="header-anchor">#</a> 2. 求和函数 - sum</h4> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 语法</span>

<span class="token keyword">select</span> <span class="token function">sum</span><span class="token punctuation">(</span>字段<span class="token punctuation">)</span> <span class="token keyword">from</span> 表名 <span class="token keyword">where</span> 查询条件<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><div class="custom-block tip"><p class="custom-block-title">提示</p> <ul><li>sum 仅对数值起作用, 否则会报错;</li> <li>多列就和时, 需要用 逗号 隔开</li></ul></div> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 案例</span>

<span class="token comment">-- 统计 数学总成绩 </span>
<span class="token keyword">select</span> <span class="token function">sum</span><span class="token punctuation">(</span><span class="token identifier"><span class="token punctuation">`</span>math<span class="token punctuation">`</span></span><span class="token punctuation">)</span> <span class="token keyword">from</span> student<span class="token punctuation">;</span>

<span class="token comment">-- 统计 各科成绩 </span>
<span class="token keyword">select</span> <span class="token function">sum</span><span class="token punctuation">(</span><span class="token identifier"><span class="token punctuation">`</span>chinese<span class="token punctuation">`</span></span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">sum</span><span class="token punctuation">(</span><span class="token identifier"><span class="token punctuation">`</span>english<span class="token punctuation">`</span></span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">sum</span><span class="token punctuation">(</span><span class="token identifier"><span class="token punctuation">`</span>math<span class="token punctuation">`</span></span><span class="token punctuation">)</span> <span class="token keyword">from</span> student<span class="token punctuation">;</span>

<span class="token comment">-- 统计 所有成绩的总和 </span>
<span class="token keyword">select</span> <span class="token function">sum</span><span class="token punctuation">(</span><span class="token identifier"><span class="token punctuation">`</span>chinese<span class="token punctuation">`</span></span> <span class="token operator">+</span> <span class="token identifier"><span class="token punctuation">`</span>english<span class="token punctuation">`</span></span> <span class="token operator">+</span> <span class="token identifier"><span class="token punctuation">`</span>math<span class="token punctuation">`</span></span><span class="token punctuation">)</span> <span class="token keyword">from</span> student<span class="token punctuation">;</span>

<span class="token comment">-- 统计 语文的平均分 </span>
<span class="token keyword">select</span> <span class="token function">sum</span><span class="token punctuation">(</span><span class="token identifier"><span class="token punctuation">`</span>chinese<span class="token punctuation">`</span></span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token identifier"><span class="token punctuation">`</span>id<span class="token punctuation">`</span></span><span class="token punctuation">)</span> <span class="token keyword">from</span> student<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h4 id="_3-求平均值-avg"><a href="#_3-求平均值-avg" class="header-anchor">#</a> 3. 求平均值 - avg</h4> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 语法</span>

<span class="token keyword">select</span> <span class="token function">avg</span><span class="token punctuation">(</span>列名<span class="token punctuation">)</span> <span class="token keyword">from</span> 表名 <span class="token keyword">where</span> 查询条件<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 案例</span>

<span class="token comment">-- 求数学成绩的平均值 </span>
<span class="token keyword">select</span> <span class="token function">avg</span><span class="token punctuation">(</span><span class="token identifier"><span class="token punctuation">`</span>math<span class="token punctuation">`</span></span><span class="token punctuation">)</span> <span class="token keyword">from</span> student<span class="token punctuation">;</span>

<span class="token comment">-- 求班级总分的平均值 </span>
<span class="token keyword">select</span> <span class="token function">avg</span><span class="token punctuation">(</span><span class="token identifier"><span class="token punctuation">`</span>chinese<span class="token punctuation">`</span></span> <span class="token operator">+</span> <span class="token identifier"><span class="token punctuation">`</span>english<span class="token punctuation">`</span></span> <span class="token operator">+</span> <span class="token identifier"><span class="token punctuation">`</span>math<span class="token punctuation">`</span></span><span class="token punctuation">)</span> <span class="token keyword">from</span> student<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h4 id="_4-求最大-最小值-max-min"><a href="#_4-求最大-最小值-max-min" class="header-anchor">#</a> 4. 求最大, 最小值 - Max , Min</h4> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 语法</span>

<span class="token keyword">select</span> <span class="token function">max</span><span class="token punctuation">(</span>列名<span class="token punctuation">)</span> <span class="token keyword">from</span> 表名 <span class="token keyword">where</span> 查询条件<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 案例</span>

<span class="token comment">-- 求数学成绩的最高分 </span>
<span class="token keyword">select</span> <span class="token function">max</span><span class="token punctuation">(</span><span class="token identifier"><span class="token punctuation">`</span>math<span class="token punctuation">`</span></span><span class="token punctuation">)</span> <span class="token keyword">from</span> student<span class="token punctuation">;</span>

<span class="token comment">-- 求班级的最低分 </span>
<span class="token keyword">select</span> <span class="token function">min</span><span class="token punctuation">(</span><span class="token identifier"><span class="token punctuation">`</span>chinese<span class="token punctuation">`</span></span> <span class="token operator">+</span> <span class="token identifier"><span class="token punctuation">`</span>english<span class="token punctuation">`</span></span> <span class="token operator">+</span> <span class="token identifier"><span class="token punctuation">`</span>math<span class="token punctuation">`</span></span><span class="token punctuation">)</span> <span class="token keyword">from</span> student<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h4 id="_5-分组-group-by"><a href="#_5-分组-group-by" class="header-anchor">#</a> 5. 分组 - group by</h4> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 语法</span>

<span class="token keyword">select</span> 字段 <span class="token keyword">from</span> 表名 <span class="token keyword">where</span> 查询条件 <span class="token keyword">group</span> <span class="token keyword">by</span> 分组条件<span class="token punctuation">;</span>

<span class="token keyword">select</span> 字段 <span class="token keyword">from</span> 表名 <span class="token keyword">where</span> 查询条件 <span class="token keyword">group</span> <span class="token keyword">by</span> 分组条件 <span class="token keyword">having</span> 过滤条件<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><div class="custom-block tip"><p class="custom-block-title">提示</p> <ul><li>group by : 用于对查询的结果分组统计;</li> <li>having 子句用于限制分组显示结果;</li></ul></div> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 案例</span>

<span class="token comment">-- dept 部门表 (部门编号 deptno, 名称 dname, 所在城市 loc)</span>
<span class="token comment">-- emp 员工表 (编号 empon, 名字 ename, 工作 job, 上级编号 mgr, 入职时间 hiredate, 薪水 sal, 红利 comn, 部门编号 deptno)</span>
<span class="token comment">-- 工资级别表 (级别 grade, 最低工资 losal, 最高工资 hisal)</span>

<span class="token comment">-- 查询 每个部门的平均工资 和 最高工资 </span>
<span class="token keyword">select</span> <span class="token function">avg</span><span class="token punctuation">(</span>sal<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">max</span><span class="token punctuation">(</span>sal<span class="token punctuation">)</span><span class="token punctuation">,</span> deptno <span class="token keyword">from</span> emp <span class="token keyword">group</span> <span class="token keyword">by</span> deptno<span class="token punctuation">;</span>

<span class="token comment">-- 查询 每个部门的 每个岗位 的平均工资 和 最低工资</span>
<span class="token keyword">select</span> deptno<span class="token punctuation">,</span> job<span class="token punctuation">,</span> <span class="token function">avg</span><span class="token punctuation">(</span>sal<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">min</span><span class="token punctuation">(</span>sal<span class="token punctuation">)</span> <span class="token keyword">from</span> emp <span class="token keyword">group</span> <span class="token keyword">by</span> deptno<span class="token punctuation">,</span> job<span class="token punctuation">;</span>

<span class="token comment">-- 查询 平均工资 低于 2000 的部门号和平均工资 </span>
<span class="token keyword">select</span> deptno<span class="token punctuation">,</span> <span class="token function">avg</span><span class="token punctuation">(</span>sal<span class="token punctuation">)</span> <span class="token keyword">as</span> avg_sal <span class="token keyword">from</span> emp <span class="token keyword">group</span> <span class="token keyword">by</span> deptno <span class="token keyword">having</span> avg_sal <span class="token operator">&lt;</span> <span class="token number">2000</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h3 id="_4-字符串函数"><a href="#_4-字符串函数" class="header-anchor">#</a> 4.字符串函数</h3> <div class="custom-block note"><p class="custom-block-title">笔记</p> <p>dual: 亚元表, 系统表, 可以作为测试表来使用</p></div> <table><thead><tr><th>命令</th> <th>说明</th></tr></thead> <tbody><tr><td>charset(str)</td> <td>返回字符串 的字符集</td></tr> <tr><td>concat(str1, str2...)</td> <td>拼接 字符串</td></tr> <tr><td>instr(str, substr)</td> <td>返回 substr 在 str 中出现的位置,没有返回 0</td></tr> <tr><td>lcase(str)</td> <td>转换成小写</td></tr> <tr><td>left(str, length)</td> <td>从 str 中的左边起, 取 length 个字符</td></tr> <tr><td>length(str)</td> <td>str 长度 [按照字节]</td></tr> <tr><td>ltrim(str),  rtrim(str)</td> <td>去除前端空格 或 后端空格</td></tr> <tr><td>replace(str, search_str, replacce_str)</td> <td>在 str 中用 replace_str 替换 search_str</td></tr> <tr><td>strcmp(str1, str2)</td> <td>逐字比较两个字符串大小,str1大,返回 1,小则返回-1,相等返回 0</td></tr> <tr><td>substring(str, position)</td> <td>从 str 的 position 开始 [从 1 开始计算 ], 取 length 个字符</td></tr> <tr><td>trim</td> <td>去除 前后空格</td></tr> <tr><td>ucase(str)</td> <td>转换成大写</td></tr></tbody></table> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 案例</span>

<span class="token comment">-- dept 部门表 (部门编号 deptno, 名称 dname, 所在城市 loc)</span>
<span class="token comment">-- emp 员工表 (编号 empon, 名字 ename, 工作 job, 上级编号 mgr, 入职时间 hiredate, 薪水 sal, 红利 comn, 部门编号 deptno)</span>
<span class="token comment">-- 工资级别表 (级别 grade, 最低工资 losal, 最高工资 hisal)</span>

<span class="token comment">-- charset(str)	返回字符串 的字符集</span>
<span class="token keyword">select</span> <span class="token keyword">charset</span><span class="token punctuation">(</span>ename<span class="token punctuation">)</span> <span class="token keyword">from</span> emp<span class="token punctuation">;</span>		<span class="token comment">-- utf8</span>

<span class="token comment">-- concat(str1, str2...)	拼接 字符串</span>
<span class="token keyword">select</span> concat<span class="token punctuation">(</span>ename<span class="token punctuation">,</span><span class="token string">'_'</span><span class="token punctuation">,</span>job<span class="token punctuation">)</span> <span class="token keyword">from</span> emp<span class="token punctuation">;</span> <span class="token comment">-- SMITH_CLERK</span>

<span class="token comment">-- instr(str, substr)	返回 substr 在 str 中出现的位置,没有返回 0</span>
<span class="token comment">-- dual: 亚元表, 系统表, 可以作为测试表来使用</span>
<span class="token keyword">select</span> instr<span class="token punctuation">(</span><span class="token identifier"><span class="token punctuation">`</span>name<span class="token punctuation">`</span></span><span class="token punctuation">,</span> <span class="token string">'阳'</span><span class="token punctuation">)</span> <span class="token keyword">from</span> student <span class="token keyword">where</span> <span class="token identifier"><span class="token punctuation">`</span>name<span class="token punctuation">`</span></span><span class="token operator">=</span><span class="token string">'欧阳锋'</span><span class="token punctuation">;</span>

<span class="token comment">-- ucase(str)	转换成大写</span>
<span class="token keyword">select</span> <span class="token function">ucase</span><span class="token punctuation">(</span><span class="token identifier"><span class="token punctuation">`</span>ename<span class="token punctuation">`</span></span><span class="token punctuation">)</span> <span class="token keyword">from</span> emp<span class="token punctuation">;</span>

<span class="token comment">-- lcase(str)	转换成小写</span>
<span class="token keyword">select</span> <span class="token function">lcase</span><span class="token punctuation">(</span><span class="token identifier"><span class="token punctuation">`</span>ename<span class="token punctuation">`</span></span><span class="token punctuation">)</span> <span class="token keyword">from</span> emp<span class="token punctuation">;</span>

<span class="token comment">-- left(str, length)	从 str 中的左边起, 取 length 个字符</span>
<span class="token keyword">select</span> ename<span class="token punctuation">,</span> <span class="token keyword">left</span><span class="token punctuation">(</span><span class="token identifier"><span class="token punctuation">`</span>ename<span class="token punctuation">`</span></span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span> <span class="token keyword">from</span> emp<span class="token punctuation">;</span>
<span class="token comment">-- 从右边取</span>
<span class="token keyword">select</span> ename<span class="token punctuation">,</span> <span class="token keyword">right</span><span class="token punctuation">(</span><span class="token identifier"><span class="token punctuation">`</span>ename<span class="token punctuation">`</span></span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span> <span class="token keyword">from</span> emp<span class="token punctuation">;</span>

<span class="token comment">-- length(str)	str 长度 [按照字节]</span>
<span class="token keyword">select</span> job<span class="token punctuation">,</span>length<span class="token punctuation">(</span><span class="token identifier"><span class="token punctuation">`</span>job<span class="token punctuation">`</span></span><span class="token punctuation">)</span> <span class="token keyword">from</span> emp<span class="token punctuation">;</span>

<span class="token comment">-- replace(str, search_str, replacce_str)	在 str 中用 replace_str 替换 search_str</span>
<span class="token keyword">select</span> job<span class="token punctuation">,</span><span class="token keyword">replace</span><span class="token punctuation">(</span>job<span class="token punctuation">,</span> <span class="token string">'MANAGER'</span><span class="token punctuation">,</span> <span class="token string">'经理'</span><span class="token punctuation">)</span> <span class="token keyword">from</span> emp<span class="token punctuation">;</span>

<span class="token comment">-- strcmp(str, str)	逐字比较两个字符串大小</span>
<span class="token keyword">select</span> strcmp<span class="token punctuation">(</span><span class="token string">'pupper'</span><span class="token punctuation">,</span><span class="token string">'oupper'</span><span class="token punctuation">)</span> <span class="token keyword">from</span> dual<span class="token punctuation">;</span>

<span class="token comment">-- substring(str, position)	从 str 的 position 开始 [从 1 开始计算 ], 取 length 个字符</span>
<span class="token keyword">select</span> substring<span class="token punctuation">(</span><span class="token string">'pupper'</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token keyword">from</span> dual<span class="token punctuation">;</span>		<span class="token comment">-- upper</span>

<span class="token comment">-- ltrim(str),  rtrim(str)	去除前端空格 或 后端空格</span>
<span class="token comment">-- trim	去除 前后空格</span>
<span class="token keyword">select</span> ltrim<span class="token punctuation">(</span><span class="token string">'      pupper      '</span><span class="token punctuation">)</span> <span class="token keyword">from</span> dual<span class="token punctuation">;</span>
<span class="token keyword">select</span> rtrim<span class="token punctuation">(</span><span class="token string">'      pupper      '</span><span class="token punctuation">)</span> <span class="token keyword">from</span> dual<span class="token punctuation">;</span>
<span class="token keyword">select</span> trim<span class="token punctuation">(</span><span class="token string">'      pupper      '</span><span class="token punctuation">)</span> <span class="token keyword">from</span> dual<span class="token punctuation">;</span>

<span class="token comment">-- 以首字母小写的方式显示所有员工的姓名</span>
<span class="token keyword">select</span> concat<span class="token punctuation">(</span><span class="token function">lcase</span><span class="token punctuation">(</span><span class="token keyword">left</span><span class="token punctuation">(</span><span class="token identifier"><span class="token punctuation">`</span>ename<span class="token punctuation">`</span></span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>substring<span class="token punctuation">(</span><span class="token identifier"><span class="token punctuation">`</span>ename<span class="token punctuation">`</span></span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">from</span> emp<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br></div></div><h3 id="_5-数学函数"><a href="#_5-数学函数" class="header-anchor">#</a> 5. 数学函数</h3> <table><thead><tr><th>命令</th> <th>说明</th></tr></thead> <tbody><tr><td>abs(num)</td> <td>绝对值</td></tr> <tr><td>bin(decimal_number)</td> <td>十进制 转 二进制</td></tr> <tr><td>ceiling(num)</td> <td>向上取整 , 得到比 num 大的最小整数</td></tr> <tr><td>conv(num, from_base, to_base)</td> <td>进制转换, 从 from_base 进制 转为 to_base 进制</td></tr> <tr><td>floor(num)</td> <td>向下取整, 得到比 num 小的最大整数</td></tr> <tr><td>format(num, decimal_places)</td> <td>保留小数位数, 四舍五入</td></tr> <tr><td>hex(decimalNumber)</td> <td>转 16 进制</td></tr> <tr><td>least(number1,number2)</td> <td>求最小值</td></tr> <tr><td>mod(numerator, denominator)</td> <td>求余数</td></tr> <tr><td>rand([seed])</td> <td>随机数, 其范围为 0 ≤ v ≤1.0,  如果使用 seed, 则 seed 不变, 随机数不变</td></tr></tbody></table> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 案例</span>

<span class="token comment">-- abs(num)	绝对值</span>
<span class="token keyword">select</span> abs<span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token keyword">from</span> dual<span class="token punctuation">;</span>

<span class="token comment">-- bin(decimal_number)	十进制 转 二进制</span>
<span class="token keyword">select</span> bin<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token keyword">from</span> dual<span class="token punctuation">;</span>

<span class="token comment">-- ceiling(num)	向上取整 , 得到比 num 大的最小整数</span>
<span class="token keyword">select</span> ceiling<span class="token punctuation">(</span><span class="token number">10.01</span><span class="token punctuation">)</span> <span class="token keyword">from</span> dual<span class="token punctuation">;</span>

<span class="token comment">-- conv(num, from_base, to_base)	进制转换</span>
<span class="token comment">-- 8 为 10 进制, 转为 2 进制</span>
<span class="token keyword">select</span> conv<span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">10</span> <span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token keyword">from</span> dual<span class="token punctuation">;</span>

<span class="token comment">-- floor(num)	向下取整, 得到比 num 小的最大整数</span>
<span class="token keyword">select</span> floor<span class="token punctuation">(</span><span class="token number">1.1</span><span class="token punctuation">)</span> <span class="token keyword">from</span> dual<span class="token punctuation">;</span>

<span class="token comment">-- format(num, decimal_places)	保留小数位数, 四舍五入</span>
<span class="token keyword">select</span> <span class="token function">format</span><span class="token punctuation">(</span><span class="token number">3.1415926634</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token keyword">from</span> dual<span class="token punctuation">;</span>

<span class="token comment">-- hex(decimalNumber)	转 16 进制</span>
<span class="token keyword">select</span> hex<span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span> <span class="token keyword">from</span> dual<span class="token punctuation">;</span>

<span class="token comment">-- least(number1,number2)	求最小值</span>
<span class="token keyword">select</span> least<span class="token punctuation">(</span><span class="token number">1341123</span><span class="token punctuation">,</span><span class="token number">213443242</span><span class="token punctuation">)</span> <span class="token keyword">from</span> dual<span class="token punctuation">;</span>

<span class="token comment">-- mod(numerator, denominator)	求余数</span>
<span class="token keyword">select</span> <span class="token function">mod</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token keyword">from</span> dual<span class="token punctuation">;</span>

<span class="token comment">-- rand([seed])	随机数, 其范围为 0 ≤ v ≤1.0</span>
<span class="token keyword">select</span> rand<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">from</span> dual<span class="token punctuation">;</span>
<span class="token comment">-- 如果 seed 填写了, 在 seed 不变时,产生的 随机数不变</span>
<span class="token keyword">select</span> rand<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token keyword">from</span> dual<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br></div></div><h3 id="_6-时间日期函数"><a href="#_6-时间日期函数" class="header-anchor">#</a> 6. 时间日期函数</h3> <table><thead><tr><th>命令</th> <th>说明</th></tr></thead> <tbody><tr><td>current_date()</td> <td>获取当前日期</td></tr> <tr><td>current_time()</td> <td>获取当前时间</td></tr> <tr><td>current_timestamp()</td> <td>获取当前时间( 日期 + 时间)</td></tr> <tr><td>date(datetime)</td> <td>返回 datetime 的日期部分</td></tr> <tr><td>date_add(date, interval  d_value  d_type)</td> <td>在 date 中加上日期 或 时间</td></tr> <tr><td>date_sub(date, interval  d_value  d_type)</td> <td>在 date 中减去日期 或 时间</td></tr> <tr><td>datediff(date1, date2)</td> <td>两个日期差(天数), date1 - date2</td></tr> <tr><td>timediff(date1, date2)</td> <td>两个时间差(时分秒), date1 - date2</td></tr> <tr><td>now()</td> <td>当前时间</td></tr> <tr><td>year|month|date(datetime)</td> <td>获取具体的年, 月, 日</td></tr> <tr><td>from_unixtime()</td> <td>将 时间戳 转换为 指定格式的 日期</td></tr> <tr><td>unix_timestamp()</td> <td>返回 1970-1-1 到现在的 秒数</td></tr></tbody></table> <div class="custom-block tip"><p class="custom-block-title">提示</p> <ul><li>date_add()  中的 interval 后面可以是 year, minute, second, day 等</li></ul></div> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 案例</span>

<span class="token keyword">create</span> <span class="token keyword">table</span> mes<span class="token punctuation">(</span>id <span class="token keyword">int</span><span class="token punctuation">,</span> content <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">,</span> send_time <span class="token keyword">datetime</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> mes <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">'北京新闻'</span><span class="token punctuation">,</span> <span class="token keyword">current_timestamp</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token string">'上海新闻'</span><span class="token punctuation">,</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token string">'广州新闻'</span><span class="token punctuation">,</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">-- current_date()	当前日期</span>
<span class="token keyword">select</span> <span class="token keyword">current_date</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">from</span> dual<span class="token punctuation">;</span>

<span class="token comment">-- current_time()	当前时间</span>
<span class="token keyword">select</span> <span class="token keyword">current_time</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">from</span> dual<span class="token punctuation">;</span>

<span class="token comment">-- current_timestamp()	当前时间戳</span>
<span class="token keyword">select</span> <span class="token keyword">current_timestamp</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">from</span> dual<span class="token punctuation">;</span>

<span class="token comment">-- date(datetime)	返回 datetime 的日期部分</span>
<span class="token keyword">select</span> <span class="token keyword">date</span><span class="token punctuation">(</span><span class="token identifier"><span class="token punctuation">`</span>hiredate<span class="token punctuation">`</span></span><span class="token punctuation">)</span> <span class="token keyword">from</span> emp<span class="token punctuation">;</span>

<span class="token comment">-- 显示发布日期,不显示时间</span>
<span class="token keyword">select</span> id<span class="token punctuation">,</span> content<span class="token punctuation">,</span> <span class="token keyword">date</span><span class="token punctuation">(</span><span class="token identifier"><span class="token punctuation">`</span>send_time<span class="token punctuation">`</span></span><span class="token punctuation">)</span> <span class="token keyword">from</span> mes<span class="token punctuation">;</span>

<span class="token comment">-- 查询在 10 分钟内发布的新闻</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> mes <span class="token keyword">where</span> date_add<span class="token punctuation">(</span><span class="token identifier"><span class="token punctuation">`</span>send_time<span class="token punctuation">`</span></span><span class="token punctuation">,</span> <span class="token keyword">interval</span> <span class="token number">10</span> <span class="token keyword">minute</span><span class="token punctuation">)</span> <span class="token operator">&gt;=</span> <span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> mes <span class="token keyword">where</span> send_time <span class="token operator">&gt;=</span> date_sub<span class="token punctuation">(</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">interval</span> <span class="token number">10</span> <span class="token keyword">minute</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">-- 计算 2011-11-11 和 1990-1-1 相差的天数</span>
<span class="token keyword">select</span> datediff<span class="token punctuation">(</span><span class="token string">'2011-11-11'</span><span class="token punctuation">,</span><span class="token string">'1990-01-01'</span><span class="token punctuation">)</span> <span class="token keyword">from</span> dual<span class="token punctuation">;</span>

<span class="token comment">-- 计算活了多少点</span>
<span class="token keyword">select</span> datediff<span class="token punctuation">(</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">'1989-11-22'</span><span class="token punctuation">)</span> <span class="token keyword">from</span> dual<span class="token punctuation">;</span>

<span class="token comment">-- 计算 活到 80 岁还剩多少天</span>
<span class="token keyword">select</span> datediff<span class="token punctuation">(</span>date_add<span class="token punctuation">(</span><span class="token string">'1989-11-22'</span><span class="token punctuation">,</span> <span class="token keyword">interval</span> <span class="token number">80</span> <span class="token keyword">year</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">from</span> dual<span class="token punctuation">;</span>


<span class="token comment">-- timediff(date1, date2)	两个时间差(时分秒)</span>
<span class="token keyword">select</span> timediff<span class="token punctuation">(</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">'2022-06-15 09:17:18'</span><span class="token punctuation">)</span> <span class="token keyword">from</span> dual<span class="token punctuation">;</span>

<span class="token comment">-- year|month|date(datetime)</span>
<span class="token keyword">select</span> <span class="token keyword">year</span><span class="token punctuation">(</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">from</span> dual<span class="token punctuation">;</span>

<span class="token comment">-- unix_timestamp() 返回 1970-1-1 到现在的 秒数</span>
<span class="token keyword">select</span> unix_timestamp<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">from</span> dual<span class="token punctuation">;</span>

<span class="token comment">-- from_unixtime() 将 时间戳 转换为 指定格式的 日期</span>
<span class="token keyword">select</span> from_unixtime<span class="token punctuation">(</span><span class="token number">1655285874</span><span class="token punctuation">)</span> <span class="token keyword">from</span> dual<span class="token punctuation">;</span>
<span class="token keyword">select</span> from_unixtime<span class="token punctuation">(</span><span class="token number">1655285874</span><span class="token punctuation">,</span> <span class="token string">'%Y-%m-%d'</span><span class="token punctuation">)</span> <span class="token keyword">from</span> dual<span class="token punctuation">;</span>
<span class="token keyword">select</span> from_unixtime<span class="token punctuation">(</span><span class="token number">1655285874</span><span class="token punctuation">,</span> <span class="token string">'%Y-%m-%d %H:%i:%s'</span><span class="token punctuation">)</span> <span class="token keyword">from</span> dual<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br></div></div><h3 id="_7-加密和系统函数"><a href="#_7-加密和系统函数" class="header-anchor">#</a> 7. 加密和系统函数</h3> <table><thead><tr><th>命令</th> <th>说明</th></tr></thead> <tbody><tr><td>user()</td> <td>查询用户</td></tr> <tr><td>database()</td> <td>数据库名称</td></tr> <tr><td>md5(str)</td> <td>为字符串加密 MD5 32 位</td></tr> <tr><td>password(str)</td> <td>MySQL 默认的密码加密方式</td></tr></tbody></table> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- user()	查询用户</span>
<span class="token keyword">select</span> <span class="token keyword">user</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">-- dtabase()	数据库名称</span>
<span class="token keyword">select</span> <span class="token keyword">database</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">-- md5(str)	为字符串加密 MD5 32 位 </span>
<span class="token keyword">select</span> md5<span class="token punctuation">(</span><span class="token string">'pupper'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>		
<span class="token comment">-- b24fb9e5effed88af6c2590b9a7ab9a4</span>

<span class="token comment">-- password(str)	用于对 MySQL 数据库的用户密码加密</span>
<span class="token keyword">select</span> password<span class="token punctuation">(</span><span class="token string">'pupper'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>		
<span class="token comment">-- *6EF8B45E1D589DB302041535A61774C1294D54D7</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h3 id="_8-流程控制函数"><a href="#_8-流程控制函数" class="header-anchor">#</a> 8. 流程控制函数</h3> <table><thead><tr><th>命令</th> <th>说明</th></tr></thead> <tbody><tr><td>if(expr1,expr2,expr3)</td> <td>如果 expr1 为 true, 则返回 expr2, 否则返回 expr3</td></tr> <tr><td>ifnull(expr1,expr2)</td> <td>如果 expr1 不为 null, 则返回 expr1 , 否则返回 expr2</td></tr> <tr><td>select case when expr1 then expr2 when expr3 then expr4 else expr5 end;</td> <td>如果 expr1 为 true, 则返回 expr2, 如果 expr3 为 true, 则返回 expr4, 否则返回 expr5</td></tr></tbody></table> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- if(expr1,expr2,expr3)	如果 expr1 为 true, 则返回 expr2, 否则返回 expr3</span>
<span class="token keyword">select</span> <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token string">'北京'</span><span class="token punctuation">,</span> <span class="token string">'杭州'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>		<span class="token comment">-- 北京</span>

<span class="token comment">-- ifnull(expr1,expr2)	 如果 expr1 不为 null, 则返回 expr1 , 否则返回 expr2</span>
<span class="token keyword">select</span> ifnull<span class="token punctuation">(</span><span class="token boolean">null</span><span class="token punctuation">,</span> <span class="token string">'杭州'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>			<span class="token comment">-- 杭州</span>

<span class="token comment">-- select case when expr1 then expr2 when expr3 then expr4 else expr5 end;	 </span>
<span class="token comment">-- 如果 expr1 为 true, 则返回 expr2, 如果 expr3 为 true, 则返回 expr4, 否则返回 expr5 </span>
<span class="token keyword">select</span> <span class="token keyword">case</span> <span class="token keyword">when</span> <span class="token number">1</span> <span class="token operator">=</span> <span class="token number">3</span> <span class="token keyword">then</span> <span class="token string">'条件 1 成立'</span> <span class="token keyword">when</span> <span class="token number">2</span><span class="token operator">=</span><span class="token number">3</span> <span class="token keyword">then</span> <span class="token string">'条件二成立'</span> <span class="token keyword">else</span> <span class="token string">'都不成立'</span> <span class="token keyword">end</span><span class="token punctuation">;</span>		<span class="token comment">-- 都不成立</span>

<span class="token comment">-- 如果 comm 为null, 则显示 0.0</span>
<span class="token comment">-- 判断是否为 null, 要使用 is null, 不为空 is not null</span>
<span class="token keyword">select</span> ename<span class="token punctuation">,</span><span class="token keyword">if</span><span class="token punctuation">(</span>comm <span class="token operator">is</span> <span class="token boolean">null</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">,</span> comm<span class="token punctuation">)</span> <span class="token keyword">from</span> emp<span class="token punctuation">;</span>
<span class="token keyword">select</span> ename<span class="token punctuation">,</span>ifnull<span class="token punctuation">(</span>comm<span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">)</span> <span class="token keyword">from</span> emp<span class="token punctuation">;</span>

<span class="token comment">-- 如果 emp 表的 job 是 clerk 则显示为 职员, 如果是 manager 则显示为 经理, 如果是 salesman 则显示 销售, 其他正常显示</span>
<span class="token keyword">select</span> ename<span class="token punctuation">,</span> 
  <span class="token keyword">case</span> <span class="token keyword">when</span> job <span class="token operator">=</span> <span class="token string">'CLERK'</span> <span class="token keyword">then</span> <span class="token string">'职员'</span> 
        <span class="token keyword">when</span> job <span class="token operator">=</span> <span class="token string">'MANAGER'</span> <span class="token keyword">then</span> <span class="token string">'经理'</span> 
        <span class="token keyword">when</span> job <span class="token operator">=</span> <span class="token string">'SALESMAN'</span> <span class="token keyword">then</span> <span class="token string">'销售'</span> <span class="token keyword">else</span> job <span class="token keyword">end</span> <span class="token keyword">as</span> job 
<span class="token keyword">from</span> emp<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><h3 id="_9-分页查询"><a href="#_9-分页查询" class="header-anchor">#</a> 9.分页查询</h3> <div class="custom-block note"><p class="custom-block-title">笔记</p> <p>语法:
select ... limit start, rows;
公式:
<strong>limit 每页显示的记录数 * (第几页-1), 每页显示的记录数</strong></p> <p>表示从 start + 1 行开始取, 取出 rows 行, start 从 0 开始计算</p></div> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 按照 员工 ID 升序取出, 每页显示 3 条数据</span>
<span class="token comment">-- limit 每页显示的记录数 * (第几页-1), 每页显示的记录数</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> emp <span class="token keyword">order</span> <span class="token keyword">by</span> empno <span class="token keyword">limit</span> <span class="token number">0</span><span class="token punctuation">,</span><span class="token number">3</span> <span class="token punctuation">;</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> emp <span class="token keyword">order</span> <span class="token keyword">by</span> empno <span class="token keyword">limit</span> <span class="token number">3</span><span class="token punctuation">,</span><span class="token number">3</span> <span class="token punctuation">;</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> emp <span class="token keyword">order</span> <span class="token keyword">by</span> empno <span class="token keyword">limit</span> <span class="token number">6</span><span class="token punctuation">,</span><span class="token number">3</span> <span class="token punctuation">;</span>

<span class="token comment">-- 显示每种岗位的员工总数和平均工资</span>
<span class="token keyword">select</span> job<span class="token punctuation">,</span><span class="token function">count</span><span class="token punctuation">(</span>empno<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">avg</span><span class="token punctuation">(</span>sal<span class="token punctuation">)</span> <span class="token keyword">from</span> emp <span class="token keyword">group</span> <span class="token keyword">by</span> job<span class="token punctuation">;</span>

<span class="token comment">-- 显示员工总数 和 获得补助的员工数</span>
<span class="token keyword">select</span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">count</span><span class="token punctuation">(</span>comm<span class="token punctuation">)</span> <span class="token keyword">from</span> emp<span class="token punctuation">;</span>

<span class="token comment">-- 显示管理者的人数</span>
<span class="token keyword">select</span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token keyword">distinct</span> mgr<span class="token punctuation">)</span> <span class="token keyword">from</span> emp<span class="token punctuation">;</span>

<span class="token comment">-- 显示员工工资的最大差额</span>
<span class="token keyword">select</span> <span class="token punctuation">(</span><span class="token function">max</span><span class="token punctuation">(</span>sal<span class="token punctuation">)</span><span class="token operator">-</span> <span class="token function">min</span><span class="token punctuation">(</span>sal<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">from</span> emp<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h2 id="五-数据库-查询-进阶"><a href="#五-数据库-查询-进阶" class="header-anchor">#</a> 五.数据库 查询 - 进阶</h2> <h3 id="_1-单表查询"><a href="#_1-单表查询" class="header-anchor">#</a> 1. 单表查询</h3> <div class="custom-block tip"><p class="custom-block-title">提示</p> <p>如果 select 语句中同时包含 group by, having, limit, order by , 那么他们的顺序为 group by, having, order by, limit;</p></div> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> column1<span class="token punctuation">,</span> column2<span class="token punctuation">,</span> column3 <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token keyword">from</span> <span class="token keyword">table</span> 
        <span class="token keyword">group</span> <span class="token keyword">by</span> <span class="token keyword">column</span>
        <span class="token keyword">having</span> condition
        <span class="token keyword">order</span> <span class="token keyword">by</span> <span class="token keyword">column</span>
        <span class="token keyword">limit</span> <span class="token keyword">start</span><span class="token punctuation">,</span> <span class="token keyword">rows</span><span class="token punctuation">;</span> 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 统计 各个部门平均工资且大于 1000 且从高到低排序 且显示 2 行</span>
<span class="token keyword">select</span> deptno<span class="token punctuation">,</span><span class="token function">avg</span><span class="token punctuation">(</span>sal<span class="token punctuation">)</span> <span class="token keyword">as</span> avg_sal <span class="token keyword">from</span> emp
	<span class="token keyword">group</span> <span class="token keyword">by</span> deptno 
	<span class="token keyword">having</span> avg_sal <span class="token operator">&gt;</span> <span class="token number">1000</span> 
	<span class="token keyword">order</span> <span class="token keyword">by</span> avg_sal <span class="token keyword">desc</span>
  <span class="token keyword">limit</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">;</span> 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><div class="custom-block tip"><p class="custom-block-title">提示</p> <p>like 操作符:</p> <ul><li>% : 表示 0 ~ 多个字符</li> <li>_ : 表示单个字符</li></ul> <p>desc 表名 : 用于查询表结构</p></div> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- dept 部门表 (部门编号 deptno, 名称 dname, 所在城市 loc)</span>
<span class="token comment">-- emp 员工表 (编号 empon, 名字 ename, 工作 job, 上级编号 mgr, 入职时间 hiredate, 薪水 sal, 红利 comm, 部门编号 deptno)</span>
<span class="token comment">-- 工资级别表 (级别 grade, 最低工资 losal, 最高工资 hisal)</span>

<span class="token comment">-- 查询 1992-1-1 之后入职的员工 </span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> emp <span class="token keyword">where</span> hiredate <span class="token operator">&gt;</span> <span class="token string">'1992-1-1'</span><span class="token punctuation">;</span>

<span class="token comment">-- 查询 姓名首字母为 S 的员工</span>
<span class="token keyword">select</span> ename<span class="token punctuation">,</span> sal <span class="token keyword">from</span> emp <span class="token keyword">where</span> ename <span class="token operator">like</span> <span class="token string">'S%'</span><span class="token punctuation">;</span>

<span class="token comment">-- 查询 姓名 第三个字母为 O 的员工 </span>
<span class="token keyword">select</span> ename<span class="token punctuation">,</span> sal <span class="token keyword">from</span> emp <span class="token keyword">where</span> ename <span class="token operator">like</span> <span class="token string">'__O%'</span><span class="token punctuation">;</span>

<span class="token comment">-- 查询 表结构</span>
<span class="token keyword">desc</span> emp<span class="token punctuation">;</span>

<span class="token comment">-- 按照工资从低到高显示员工信息</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> emp <span class="token keyword">order</span> <span class="token keyword">by</span> sal<span class="token punctuation">;</span>

<span class="token comment">-- 按照 部门编号的升序 工资的降序 显示员工工资</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> emp <span class="token keyword">order</span> <span class="token keyword">by</span> deptno <span class="token keyword">asc</span><span class="token punctuation">,</span> sal <span class="token keyword">desc</span><span class="token punctuation">;</span>   
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><h3 id="_2-多表查询"><a href="#_2-多表查询" class="header-anchor">#</a> 2. 多表查询</h3> <div class="custom-block tip"><p class="custom-block-title">提示</p> <p>笛卡尔集 : 多表查询时, 表 1 中的每一条内容都会和表 2 中的每一条内容组合, 从而形成笛卡尔集;
为了防止出现 笛卡尔集, 查询 条件不能少于 <strong>表的个数 -1</strong>;</p></div> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- dept 部门表 (部门编号 deptno, 名称 dname, 所在城市 loc)</span>
<span class="token comment">-- emp 员工表 (编号 empon, 名字 ename, 工作 job, 上级编号 mgr, 入职时间 hiredate, 薪水 sal, 红利 comm, 部门编号 deptno)</span>
<span class="token comment">-- salgrade 工资级别表 (级别 grade, 最低工资 losal, 最高工资 hisal)</span>

<span class="token comment">-- 查询 员工的名字,工资,部门名称,并按部门编号降序排列</span>
<span class="token keyword">select</span>  ename<span class="token punctuation">,</span> sal<span class="token punctuation">,</span> dname<span class="token punctuation">,</span> dept<span class="token punctuation">.</span>deptno <span class="token keyword">from</span> dept<span class="token punctuation">,</span> emp <span class="token keyword">where</span> dept<span class="token punctuation">.</span>deptno <span class="token operator">=</span> emp<span class="token punctuation">.</span>deptno <span class="token keyword">order</span> <span class="token keyword">by</span> dept<span class="token punctuation">.</span>deptno <span class="token keyword">desc</span><span class="token punctuation">;</span>

<span class="token comment">-- 查询 部门号为 10 的 员工名字,工资,部门名称</span>
<span class="token keyword">select</span>  dept<span class="token punctuation">.</span>deptno<span class="token punctuation">,</span> dname<span class="token punctuation">,</span> ename<span class="token punctuation">,</span> sal <span class="token keyword">from</span> dept<span class="token punctuation">,</span> emp <span class="token keyword">where</span> dept<span class="token punctuation">.</span>deptno <span class="token operator">=</span> emp<span class="token punctuation">.</span>deptno <span class="token operator">and</span> dept<span class="token punctuation">.</span>deptno <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>

<span class="token comment">-- 查询各个员工的名字, 工资, 及工资级别</span>
<span class="token keyword">select</span> ename<span class="token punctuation">,</span> sal<span class="token punctuation">,</span> grade <span class="token keyword">from</span> emp<span class="token punctuation">,</span> salgrade <span class="token keyword">where</span> losal <span class="token operator">&lt;=</span> sal <span class="token operator">and</span> hisal <span class="token operator">&gt;=</span> sal<span class="token punctuation">;</span>
<span class="token keyword">select</span> ename<span class="token punctuation">,</span> sal<span class="token punctuation">,</span> grade <span class="token keyword">from</span> emp<span class="token punctuation">,</span> salgrade <span class="token keyword">where</span> sal <span class="token operator">between</span> losal <span class="token operator">and</span> hisal<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h3 id="_3-自连接"><a href="#_3-自连接" class="header-anchor">#</a> 3.自连接</h3> <div class="custom-block tip"><p class="custom-block-title">提示</p> <p>注意事项:</p> <ul><li>把同一张表当做两张表来使用;</li> <li>需要给 表 取别名,
<ul><li>表 别名 : 表取别名时, as 可以忽略不写</li></ul></li> <li>字段前必须加 表 的别名, 用于区分, 否则报错;</li></ul></div> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 显示员工名字和 上级的名字 </span>
<span class="token keyword">select</span> worker<span class="token punctuation">.</span>ename<span class="token punctuation">,</span> boss<span class="token punctuation">.</span>ename <span class="token keyword">from</span> emp worker<span class="token punctuation">,</span> emp boss <span class="token keyword">where</span> worker<span class="token punctuation">.</span>mgr <span class="token operator">=</span> boss<span class="token punctuation">.</span>empno<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="_4-子查询"><a href="#_4-子查询" class="header-anchor">#</a> 4.子查询</h3> <div class="custom-block tip"><p class="custom-block-title">提示</p> <ul><li>子查询中, 返回单行数据时,一般用 = 判断条件;
<ul><li>返回 多行数据时, 使用 in 作为判断条件, 也就是满足 in 中的任意条件即可;</li></ul></li> <li>子查询中, 也可以将一个查询结果当做临时表来用;</li></ul></div> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 案例 - 雇员数据库</span>

<span class="token comment">-- dept 部门表 (部门编号 deptno, 名称 dname, 所在城市 loc)</span>
<span class="token comment">-- emp 员工表 (编号 empon, 名字 ename, 工作 job, 上级编号 mgr, 入职时间 hiredate, 薪水 sal, 红利 comm, 部门编号 deptno)</span>
<span class="token comment">-- salgrade 工资级别表 (级别 grade, 最低工资 losal, 最高工资 hisal)</span>

<span class="token comment">-- 返回单行 子查询</span>
<span class="token comment">-- 查询 SMITH 同一部门的其他员工 </span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> emp <span class="token keyword">where</span> deptno <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">select</span> deptno <span class="token keyword">from</span> emp <span class="token keyword">where</span> ename <span class="token operator">=</span> <span class="token string">'SMITH'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">-- 返回多行 子查询</span>
<span class="token comment">--  查询 和部门10 工作相同的员工信息,但是不包含 10 号部门的员工</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> emp <span class="token keyword">where</span> job <span class="token operator">in</span> <span class="token punctuation">(</span><span class="token keyword">select</span> <span class="token keyword">distinct</span> job <span class="token keyword">from</span> emp <span class="token keyword">where</span> deptno <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">)</span> <span class="token operator">and</span> deptno <span class="token operator">!=</span> <span class="token number">10</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h4 id="all-和-any"><a href="#all-和-any" class="header-anchor">#</a> all 和 any</h4> <div class="custom-block note"><p class="custom-block-title">笔记</p> <p>all : 表示所有的
any : 表示每一个</p></div> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- dept 部门表 (部门编号 deptno, 名称 dname, 所在城市 loc)</span>
<span class="token comment">-- emp 员工表 (编号 empon, 名字 ename, 工作 job, 上级编号 mgr, 入职时间 hiredate, 薪水 sal, 红利 comm, 部门编号 deptno)</span>
<span class="token comment">-- salgrade 工资级别表 (级别 grade, 最低工资 losal, 最高工资 hisal)</span>

<span class="token comment">-- 查询 工资比 30 号部门所有员工工资高的员工信息</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> emp <span class="token keyword">where</span> sal <span class="token operator">&gt;</span> <span class="token keyword">all</span><span class="token punctuation">(</span><span class="token keyword">select</span> <span class="token keyword">distinct</span> sal <span class="token keyword">from</span> emp <span class="token keyword">where</span> deptno <span class="token operator">=</span> <span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> emp <span class="token keyword">where</span> sal <span class="token operator">&gt;</span> <span class="token keyword">all</span><span class="token punctuation">(</span><span class="token keyword">select</span> <span class="token function">max</span><span class="token punctuation">(</span>sal<span class="token punctuation">)</span> <span class="token keyword">from</span> emp <span class="token keyword">where</span> deptno <span class="token operator">=</span> <span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">-- 查询 工资比 30 号部门其中一个员工工资高的员工信息</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> emp <span class="token keyword">where</span> sal <span class="token operator">&gt;</span> <span class="token keyword">any</span><span class="token punctuation">(</span><span class="token keyword">select</span> <span class="token keyword">distinct</span> sal <span class="token keyword">from</span> emp <span class="token keyword">where</span> deptno <span class="token operator">=</span> <span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> emp <span class="token keyword">where</span> sal <span class="token operator">&gt;</span> <span class="token keyword">any</span><span class="token punctuation">(</span><span class="token keyword">select</span> <span class="token function">min</span><span class="token punctuation">(</span>sal<span class="token punctuation">)</span> <span class="token keyword">from</span> emp <span class="token keyword">where</span> deptno <span class="token operator">=</span> <span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h3 id="_5-多列子查询"><a href="#_5-多列子查询" class="header-anchor">#</a> 5.多列子查询</h3> <div class="custom-block note"><p class="custom-block-title">笔记</p> <p>语法:
(字段 1, 字段 2...) = (select 字段 1, 字段 2 ... from...)</p></div> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 查询 与 ALLEN 部门和岗位完全相同的所有员工,不含其本人</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> emp <span class="token keyword">where</span> <span class="token punctuation">(</span>deptno<span class="token punctuation">,</span> job<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">select</span> deptno<span class="token punctuation">,</span> job <span class="token keyword">from</span> emp <span class="token keyword">where</span> ename <span class="token operator">=</span> <span class="token string">'ALLEN'</span><span class="token punctuation">)</span> <span class="token operator">and</span> ename <span class="token operator">!=</span> <span class="token string">'ALLEN'</span><span class="token punctuation">;</span>

<span class="token comment">-- 查询 每个部门工资高于部门平均工资的个人资料 </span>
<span class="token keyword">select</span> empno<span class="token punctuation">,</span> ename<span class="token punctuation">,</span> job<span class="token punctuation">,</span> mgr 
	<span class="token keyword">from</span> emp<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token keyword">select</span> deptno<span class="token punctuation">,</span> <span class="token function">avg</span><span class="token punctuation">(</span>sal<span class="token punctuation">)</span> <span class="token keyword">as</span> avg_sal <span class="token keyword">from</span> emp <span class="token keyword">group</span> <span class="token keyword">by</span> deptno<span class="token punctuation">)</span> temps 
	<span class="token keyword">where</span> emp<span class="token punctuation">.</span>deptno <span class="token operator">=</span> temps<span class="token punctuation">.</span>deptno <span class="token operator">and</span> sal <span class="token operator">&gt;</span> avg_sal<span class="token punctuation">;</span> 
	
<span class="token comment">-- 查询 每个部门工资最高的员工资料</span>
<span class="token keyword">select</span> empno<span class="token punctuation">,</span> ename<span class="token punctuation">,</span> job<span class="token punctuation">,</span> mgr 
	<span class="token keyword">from</span> emp<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token keyword">select</span> deptno<span class="token punctuation">,</span> <span class="token function">max</span><span class="token punctuation">(</span>sal<span class="token punctuation">)</span> <span class="token keyword">as</span> max_sal <span class="token keyword">from</span> emp <span class="token keyword">group</span> <span class="token keyword">by</span> deptno<span class="token punctuation">)</span> temps 
	<span class="token keyword">where</span> emp<span class="token punctuation">.</span>deptno <span class="token operator">=</span> temps<span class="token punctuation">.</span>deptno <span class="token operator">and</span> sal <span class="token operator">=</span> max_sal<span class="token punctuation">;</span> 
 
 <span class="token comment">-- 查询每个部门的 名称, 编号, 地址 和人员数量</span>
<span class="token keyword">select</span> dept<span class="token punctuation">.</span>deptno<span class="token punctuation">,</span> dname<span class="token punctuation">,</span> loc<span class="token punctuation">,</span> com 
		<span class="token keyword">from</span> dept<span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token keyword">select</span> deptno<span class="token punctuation">,</span><span class="token function">count</span><span class="token punctuation">(</span>empno<span class="token punctuation">)</span> <span class="token keyword">as</span> com <span class="token keyword">from</span> emp <span class="token keyword">group</span> <span class="token keyword">by</span> deptno<span class="token punctuation">)</span> num
		<span class="token keyword">where</span> dept<span class="token punctuation">.</span>deptno <span class="token operator">=</span> num<span class="token punctuation">.</span>deptno<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h3 id="_6-合并查询"><a href="#_6-合并查询" class="header-anchor">#</a> 6. 合并查询</h3> <div class="custom-block note"><p class="custom-block-title">笔记</p> <p>union all : 该操作符用于获得两个查询结果的 并集, 该操作符 不会去重;
union : 该操作符可以 去重;</p></div> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> ename<span class="token punctuation">,</span> sal<span class="token punctuation">,</span> job <span class="token keyword">from</span> emp <span class="token keyword">where</span> sal <span class="token operator">&gt;</span> <span class="token number">2500</span> <span class="token keyword">union</span> <span class="token keyword">all</span>
	<span class="token keyword">select</span> ename<span class="token punctuation">,</span> sal<span class="token punctuation">,</span> job <span class="token keyword">from</span> emp <span class="token keyword">where</span> job <span class="token operator">=</span> <span class="token string">'MANAGER'</span><span class="token punctuation">;</span>  
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="_7-外连接"><a href="#_7-外连接" class="header-anchor">#</a> 7. 外连接</h3> <div class="custom-block warning"><p class="custom-block-title">注意</p> <p>外连接:</p> <ul><li>左外连接 : 以左边的表为基准, 全部显示, 右边的表只显示与之匹配的部分;
<ul><li>语法:** select ... from 表1 left join 表2 on 关联条件**</li> <li>表1 为主表, 表2 为辅表</li></ul></li> <li>右外连接 : 以右边的表为基准, 全部显示, 左边的表只显示与之匹配的部分;
<ul><li>语法:** select ... from 表1 right join 表2 on 关联条件**</li> <li>表2 为主表, 表1 为辅表</li></ul></li></ul></div> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">create</span> <span class="token keyword">table</span> stu <span class="token punctuation">(</span>id <span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>name<span class="token punctuation">`</span></span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">32</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> stu <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">'jack'</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token string">'tom'</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token string">'kity'</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token string">'nono'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> stu<span class="token punctuation">;</span>

<span class="token keyword">create</span> <span class="token keyword">table</span> exam <span class="token punctuation">(</span>id <span class="token keyword">int</span><span class="token punctuation">,</span> grade <span class="token keyword">int</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> exam <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">56</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">76</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> exam<span class="token punctuation">;</span>

<span class="token comment">-- 左外连接</span>
<span class="token keyword">select</span> <span class="token identifier"><span class="token punctuation">`</span>name<span class="token punctuation">`</span></span><span class="token punctuation">,</span> stu<span class="token punctuation">.</span>id<span class="token punctuation">,</span> grade <span class="token keyword">from</span> stu <span class="token keyword">left</span> <span class="token keyword">join</span> exam <span class="token keyword">on</span> stu<span class="token punctuation">.</span>id <span class="token operator">=</span> exam<span class="token punctuation">.</span>id<span class="token punctuation">;</span>

<span class="token comment">-- 右外连接</span>
<span class="token keyword">select</span> <span class="token identifier"><span class="token punctuation">`</span>name<span class="token punctuation">`</span></span><span class="token punctuation">,</span> stu<span class="token punctuation">.</span>id<span class="token punctuation">,</span> grade <span class="token keyword">from</span> stu <span class="token keyword">right</span> <span class="token keyword">join</span> exam <span class="token keyword">on</span> stu<span class="token punctuation">.</span>id <span class="token operator">=</span> exam<span class="token punctuation">.</span>id<span class="token punctuation">;</span>

<span class="token comment">-- 列出所有部门及其员工,包括没有员工的部门</span>
<span class="token keyword">select</span> dname<span class="token punctuation">,</span>ename<span class="token punctuation">,</span> job <span class="token keyword">from</span> dept <span class="token keyword">left</span> <span class="token keyword">join</span> emp <span class="token keyword">on</span> dept<span class="token punctuation">.</span>deptno <span class="token operator">=</span> emp<span class="token punctuation">.</span>deptno <span class="token keyword">order</span> <span class="token keyword">by</span> dname <span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h3 id="_8-主键"><a href="#_8-主键" class="header-anchor">#</a> 8. 主键</h3> <div class="custom-block tip"><p class="custom-block-title">提示</p> <ul><li>主键 :  <strong>不可重复</strong>, 唯一标识, 用于标示 表中的 行数据
<ul><li>一张表只能有一主键, 但是可以使用复合主键;</li> <li>主键不能为 null</li> <li>一般使用 id, 手机号, 邮箱 作为主键</li></ul></li></ul></div> <div class="custom-block note"><p class="custom-block-title">笔记</p> <p>语法:
<strong>字段名 字段类型 primary key</strong>;		-- 创建表时使用
<strong>primary key (列名)</strong>;		-- 创建表后使用</p></div> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 创建表时指定 主键</span>
<span class="token keyword">create</span> <span class="token keyword">table</span> test02 <span class="token punctuation">(</span>id <span class="token keyword">int</span> <span class="token keyword">primary</span> <span class="token keyword">key</span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>name<span class="token punctuation">`</span></span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">32</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">-- 创建表之后 指定主键</span>
<span class="token keyword">create</span> <span class="token keyword">table</span> test03 <span class="token punctuation">(</span>id <span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>name<span class="token punctuation">`</span></span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">32</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">primary</span> <span class="token keyword">key</span> <span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">-- 复合主键</span>
<span class="token keyword">create</span> <span class="token keyword">table</span> test04 <span class="token punctuation">(</span>id <span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>name<span class="token punctuation">`</span></span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">32</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">primary</span> <span class="token keyword">key</span> <span class="token punctuation">(</span>id<span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>name<span class="token punctuation">`</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="_9-非空-not-null-及-唯一-unique"><a href="#_9-非空-not-null-及-唯一-unique" class="header-anchor">#</a> 9. 非空(not null) 及 唯一(unique)</h3> <div class="custom-block note"><p class="custom-block-title">笔记</p> <ul><li>not null : 非空, 即 插入数据时, 必须为字段提供数据;</li> <li>unique : 唯一, 表示该字段中的数据不能重复;
<ul><li>如果没有指定 not null , 则 unique 字段 可以有多个 null</li> <li>一张表可以有多个 unique 字段</li></ul></li></ul></div> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 非空</span>
字段名 字段类型 <span class="token operator">not</span> <span class="token boolean">null</span>

<span class="token comment">-- 唯一</span>
字段名 字段类型 <span class="token keyword">unique</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 创建表时指定 字段数据唯一并且非空</span>
<span class="token keyword">create</span> <span class="token keyword">table</span> test06 <span class="token punctuation">(</span>id <span class="token keyword">int</span> <span class="token keyword">unique</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>name<span class="token punctuation">`</span></span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">32</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>add<span class="token punctuation">`</span></span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">32</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="_10-外键"><a href="#_10-外键" class="header-anchor">#</a> 10. 外键</h3> <div class="custom-block note"><p class="custom-block-title">笔记</p> <p>外键 : 用于定义主表 和 从表 之间的关系</p></div> <div class="custom-block tip"><p class="custom-block-title">提示</p> <p>注意事项:</p> <ul><li>外键指向的表的字段, 要求是 primary key 或者是 unique;</li> <li>表的类型 是 innodb, 否则不支持外键;</li> <li>外键字段的类型要和主键字段的类型一致;</li> <li>外键字段的值, 必须在主键中出现过, 或者为 null;</li> <li>一旦建立了主外键关系,数据不能随意删除;</li></ul></div> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">foreign</span> <span class="token keyword">key</span> <span class="token punctuation">(</span>从表字段名<span class="token punctuation">)</span> <span class="token keyword">references</span> 主表名<span class="token punctuation">(</span>主键名 或 <span class="token keyword">unique</span> 字段名<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 创建主表</span>
<span class="token keyword">create</span> <span class="token keyword">table</span> my_class<span class="token punctuation">(</span>
	id <span class="token keyword">int</span> <span class="token keyword">primary</span> <span class="token keyword">key</span><span class="token punctuation">,</span> 
	<span class="token identifier"><span class="token punctuation">`</span>name<span class="token punctuation">`</span></span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">32</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span> <span class="token keyword">default</span> <span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">-- 创建从表</span>
<span class="token keyword">create</span> <span class="token keyword">table</span> my_stu<span class="token punctuation">(</span>
	id <span class="token keyword">int</span> <span class="token keyword">primary</span> <span class="token keyword">key</span><span class="token punctuation">,</span> 
	<span class="token identifier"><span class="token punctuation">`</span>name<span class="token punctuation">`</span></span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">32</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span> <span class="token keyword">default</span> <span class="token string">''</span><span class="token punctuation">,</span> 
	class_id <span class="token keyword">int</span><span class="token punctuation">,</span>
	<span class="token comment">-- 创建外键 </span>
	<span class="token keyword">foreign</span> <span class="token keyword">key</span> <span class="token punctuation">(</span>class_id<span class="token punctuation">)</span> <span class="token keyword">references</span> my_class <span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	
	
<span class="token keyword">insert</span> <span class="token keyword">into</span> my_class <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token string">'java'</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">,</span><span class="token string">'web'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> my_stu <span class="token keyword">values</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'jack'</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">'tom'</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token string">'money'</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token string">'tank'</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> my_class<span class="token punctuation">;</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> my_stu<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><h3 id="_11-自增长"><a href="#_11-自增长" class="header-anchor">#</a> 11. 自增长</h3> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>字段名 整型 <span class="token keyword">primary</span> <span class="token keyword">key</span> <span class="token keyword">auto_increment</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 自增长 字段赋值 null 时, 默认从 1 开始自增长</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> xxx <span class="token punctuation">(</span>字段<span class="token number">1</span><span class="token punctuation">,</span> 字段<span class="token number">2.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span> <span class="token keyword">values</span> <span class="token punctuation">(</span><span class="token boolean">null</span><span class="token punctuation">,</span> 值<span class="token number">2.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> xxx <span class="token punctuation">(</span>字段<span class="token number">2.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span> <span class="token keyword">values</span> <span class="token punctuation">(</span>值<span class="token number">1</span><span class="token punctuation">,</span> 值<span class="token number">2.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> xxx <span class="token keyword">values</span> <span class="token punctuation">(</span><span class="token boolean">null</span><span class="token punctuation">,</span> 值<span class="token number">2.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><div class="custom-block tip"><p class="custom-block-title">提示</p> <p>注意事项:</p> <ul><li>自增长 一般与主键配合使用;</li> <li>自增长单独使用时, 需要配合 unique;</li> <li>自增长 修饰的字段 一般为整型;</li> <li>自增长一般从 1 开始, 也可以通过命令修改
<ul><li>alter table 表名 auto_increment = 新的开始值;</li></ul></li></ul></div> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 自增长 - 案例</span>

<span class="token comment">-- 创建 表</span>
<span class="token keyword">create</span> <span class="token keyword">table</span> test05 <span class="token punctuation">(</span>
	id <span class="token keyword">int</span> <span class="token keyword">primary</span> <span class="token keyword">key</span> <span class="token keyword">auto_increment</span><span class="token punctuation">,</span>
	email <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">32</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span> <span class="token keyword">default</span> <span class="token string">''</span><span class="token punctuation">,</span>
	<span class="token identifier"><span class="token punctuation">`</span>name<span class="token punctuation">`</span></span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">32</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span> <span class="token keyword">default</span> <span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	
<span class="token keyword">insert</span> <span class="token keyword">into</span> test05<span class="token punctuation">(</span>id<span class="token punctuation">,</span> email<span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>name<span class="token punctuation">`</span></span><span class="token punctuation">)</span> <span class="token keyword">values</span> <span class="token punctuation">(</span><span class="token boolean">null</span><span class="token punctuation">,</span> <span class="token string">'123@gmail.com'</span><span class="token punctuation">,</span> <span class="token string">'jack'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> test05<span class="token punctuation">(</span>email<span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>name<span class="token punctuation">`</span></span><span class="token punctuation">)</span> <span class="token keyword">values</span> <span class="token punctuation">(</span><span class="token string">'asdf@qq.com'</span><span class="token punctuation">,</span> <span class="token string">'tom'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> test05 <span class="token keyword">values</span> <span class="token punctuation">(</span><span class="token boolean">null</span><span class="token punctuation">,</span> <span class="token string">'43241233@qq.com'</span><span class="token punctuation">,</span> <span class="token string">'join'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h3 id="_12-索引"><a href="#_12-索引" class="header-anchor">#</a> 12. 索引</h3> <p><a href="https://wwi.lanzoup.com/iOkTm09dvc0b" target="_blank" rel="noopener noreferrer">创建海量表.txt<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">create</span> <span class="token keyword">index</span> empno_index <span class="token keyword">on</span> emp <span class="token punctuation">(</span>empno<span class="token punctuation">)</span>
<span class="token comment">-- empno_index : 表示索引名称</span>
<span class="token comment">-- on emp(empno) : 表示在 emp 表的 empno 字段 创建索引</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><div class="custom-block tip"><p class="custom-block-title">提示</p> <ul><li>主键索引 : 主键在创建时, 自动成为主索引 (类型 primary key)
<ul><li>create table t1(id int primary key, name varchar(32));</li> <li>id 既是主键, 也是索引, 称为 主索引;</li></ul></li> <li>唯一索引 :  使用了 unique 的字段, 自动成为 唯一索引;
<ul><li>create table t1(id int unique, name varchar(32));</li> <li>id 既是唯一的, 也是索引, 称为 unique 索引</li></ul></li> <li>普通索引 : 在一个字段中, 专门指定其为索引;
<ul><li>create index ename_index on emp(ename);</li></ul></li> <li>全文索引 :  mysql 自带的, 一般不会使用</li></ul></div> <div class="custom-block note"><p class="custom-block-title">笔记</p> <ul><li>创建索引可以大大减少查询时间;</li> <li>查询速度的提升只对创建了索引的字段有效, 对表中的其他字段无效;</li> <li>索引会占用一定的存储空间;</li> <li>在数据添加, 修改, 删除时, 索引对齐效率有影响;</li></ul> <hr> <ul><li>较频繁作为查询条件的字段 应该创建索引;</li> <li>唯一性太差的字段 不适合单独创建索引;</li> <li>更新较为频繁的字段不适合创建索引;</li> <li>不会出现在 where 子句中的字段 不该创建索引;</li></ul></div> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 添加索引前 2.246s 添加索引后 0.007s</span>
<span class="token keyword">create</span> <span class="token keyword">index</span> ename_index <span class="token keyword">on</span> emp<span class="token punctuation">(</span>ename<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> emp <span class="token keyword">where</span> ename <span class="token operator">=</span> <span class="token string">'sToObQ'</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 索引的 增, 删, 改, 查</span>

<span class="token comment">-- 创建测试表 </span>
<span class="token keyword">create</span> <span class="token keyword">table</span> test06 <span class="token punctuation">(</span>id <span class="token keyword">int</span><span class="token punctuation">,</span> tname <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">32</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">-- 查看 表索引</span>
<span class="token keyword">show</span> indexes <span class="token keyword">from</span> test06<span class="token punctuation">;</span>
<span class="token keyword">show</span> <span class="token keyword">index</span> <span class="token keyword">from</span> test06<span class="token punctuation">;</span>
<span class="token keyword">show</span> <span class="token keyword">keys</span> <span class="token keyword">from</span> test06<span class="token punctuation">;</span>
________________________________________________________________________________

<span class="token comment">-- 添加主键索引 (创建表时没有 添加主键 时可以使用)</span>
<span class="token comment">-- 如果创建表时指定了主键, 则主键自动成为主键索引</span>
<span class="token keyword">alter</span> <span class="token keyword">table</span> test06 <span class="token keyword">add</span> <span class="token keyword">primary</span> <span class="token keyword">key</span> <span class="token punctuation">(</span>tname<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">-- 添加 唯一索引</span>
<span class="token keyword">create</span> <span class="token keyword">unique</span> <span class="token keyword">index</span> id_index <span class="token keyword">on</span> test06<span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">-- 添加普通索引</span>
<span class="token keyword">create</span> <span class="token keyword">index</span> tname_index <span class="token keyword">on</span> test06<span class="token punctuation">(</span>tname<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">-- 添加普通索引</span>
<span class="token keyword">alter</span> <span class="token keyword">table</span> test06 <span class="token keyword">add</span> <span class="token keyword">index</span> tname_index<span class="token punctuation">(</span>tname<span class="token punctuation">)</span><span class="token punctuation">;</span>
________________________________________________________________________________

<span class="token comment">-- 删除索引</span>
<span class="token keyword">drop</span> <span class="token keyword">index</span> id_index <span class="token keyword">on</span> test06<span class="token punctuation">;</span>
<span class="token keyword">drop</span> <span class="token keyword">index</span> tname_index <span class="token keyword">on</span> test06<span class="token punctuation">;</span>

<span class="token comment">-- 删除 主键索引</span>
<span class="token keyword">alter</span> <span class="token keyword">table</span> test06 <span class="token keyword">drop</span> <span class="token keyword">primary</span> <span class="token keyword">key</span><span class="token punctuation">;</span>

<span class="token comment">-- 索引的修改 : 先删除, 再重新添加;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br></div></div><h2 id="案例-数据库创建"><a href="#案例-数据库创建" class="header-anchor">#</a> 案例 - 数据库创建</h2> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 数据库创建</span>

<span class="token comment">-- 要求 客户名不为空, 邮箱不重复, 单价 在 1.0 ~ 9999.99 之间 </span>

<span class="token comment">-- 创建数据库</span>
<span class="token keyword">create</span> <span class="token keyword">database</span> shop_db <span class="token keyword">character</span> <span class="token keyword">set</span> utf8 <span class="token keyword">collate</span> utf8_bin<span class="token punctuation">;</span>

<span class="token comment">-- 创建 商品表 goods, 商品号 goods_id, 商品名 goods_name, 单价 unitprice, 商品类别 category, 供应商 provider </span>
<span class="token keyword">create</span> <span class="token keyword">table</span> goods<span class="token punctuation">(</span>
	goods_id <span class="token keyword">int</span> <span class="token keyword">primary</span> <span class="token keyword">key</span><span class="token punctuation">,</span> 
	goods_name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">64</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span> <span class="token keyword">default</span> <span class="token string">''</span><span class="token punctuation">,</span> 
	unitprice <span class="token keyword">decimal</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span> <span class="token keyword">default</span> <span class="token number">0</span> 
		<span class="token keyword">check</span><span class="token punctuation">(</span>unitprice <span class="token operator">&gt;=</span> <span class="token number">1.0</span> <span class="token operator">and</span> unitprice <span class="token operator">&lt;</span><span class="token number">10000</span><span class="token punctuation">)</span><span class="token punctuation">,</span> 
	category <span class="token keyword">int</span> <span class="token operator">not</span> <span class="token boolean">null</span> <span class="token keyword">default</span> <span class="token number">0</span><span class="token punctuation">,</span> 
	provider <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">64</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span> <span class="token keyword">default</span> <span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">-- 创建 客户表 customer, 客户id crstomer_id, 姓名 name, 地址 address, 邮箱 email, 性别 sex, 身份证 card_id</span>
<span class="token keyword">create</span> <span class="token keyword">table</span> customer<span class="token punctuation">(</span>
	customer_id <span class="token keyword">int</span> <span class="token keyword">primary</span> <span class="token keyword">key</span><span class="token punctuation">,</span> 
	<span class="token identifier"><span class="token punctuation">`</span>name<span class="token punctuation">`</span></span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">64</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span> <span class="token keyword">default</span> <span class="token string">''</span><span class="token punctuation">,</span> 
	address <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">64</span><span class="token punctuation">)</span><span class="token operator">not</span> <span class="token boolean">null</span> <span class="token keyword">default</span> <span class="token string">''</span><span class="token punctuation">,</span> 
	email <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">64</span><span class="token punctuation">)</span> <span class="token keyword">unique</span> <span class="token operator">not</span> <span class="token boolean">null</span> <span class="token keyword">default</span> <span class="token string">''</span><span class="token punctuation">,</span>
	sex <span class="token keyword">enum</span><span class="token punctuation">(</span><span class="token string">'男'</span><span class="token punctuation">,</span><span class="token string">'女'</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">,</span> 	<span class="token comment">-- 枚举类型 </span>
	card_id <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">32</span><span class="token punctuation">)</span> <span class="token keyword">unique</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">-- 创建 订单表 purchase, 订单号 order_id, 客户号 customer_id, 商品号 goods_id, 购买数量 nums </span>
<span class="token keyword">create</span> <span class="token keyword">table</span> purchase<span class="token punctuation">(</span>
	order_id <span class="token keyword">int</span> <span class="token keyword">unsigned</span> <span class="token keyword">primary</span> <span class="token keyword">key</span><span class="token punctuation">,</span> 
	customer_id <span class="token keyword">int</span> <span class="token operator">not</span> <span class="token boolean">null</span> <span class="token keyword">default</span> <span class="token number">0</span><span class="token punctuation">,</span> 
	goods_id <span class="token keyword">int</span> <span class="token operator">not</span> <span class="token boolean">null</span> <span class="token keyword">default</span> <span class="token number">0</span><span class="token punctuation">,</span> 
	nums <span class="token keyword">int</span> <span class="token operator">not</span> <span class="token boolean">null</span> <span class="token keyword">default</span> <span class="token number">0</span><span class="token punctuation">,</span> 
	<span class="token keyword">foreign</span> <span class="token keyword">key</span> <span class="token punctuation">(</span>customer_id<span class="token punctuation">)</span> <span class="token keyword">references</span> customer<span class="token punctuation">(</span>customer_id<span class="token punctuation">)</span><span class="token punctuation">,</span>
	<span class="token keyword">foreign</span> <span class="token keyword">key</span> <span class="token punctuation">(</span>goods_id<span class="token punctuation">)</span> <span class="token keyword">references</span> goods<span class="token punctuation">(</span>goods_id<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br></div></div><h2 id="五-mysql-事务"><a href="#五-mysql-事务" class="header-anchor">#</a> 五.MySQL 事务</h2> <blockquote><p>事务用于保证数据的一致性, 它由 一组相关的 dml 语言组成, 该组的 dml 语言幺妹全部成功, 要么全部失败,</p></blockquote> <div class="custom-block note"><p class="custom-block-title">笔记</p> <p>事务和锁:
当执行事务操作时 ( dml 语言 ), mysql 会在表上加锁, 防止其他用户改表的数据;
主要针对的是 MySQL 的增, 删, 改</p></div> <div class="custom-block tip"><p class="custom-block-title">提示</p> <p>MySQL 数据库 控制台事务的几个重要操作:</p> <ul><li>start transaction : 开始一个事务;
<ul><li>set autocommit = off : 也可以开启一个事务</li></ul></li> <li>savepoint : 保存点名, 设置保存点;
<ul><li>用于取消部分事务, 当事务结束时, 自动删除该事务所定义的所有保存点;</li></ul></li> <li>rollback to : 保存点名, 回退事务;</li> <li>rollback : 回退全部事务;</li> <li>commit : 提交事务, 所有的操作生效, 不能回退
<ul><li>执行 commit 语句后, 会提交数据, 不能在回退, 结束事务, 删除保存点, 释放锁;</li></ul></li></ul></div> <div class="custom-block warning"><p class="custom-block-title">注意</p> <p>细节:</p> <ul><li>如果不开始事务, 默认情况下, dml 操作是自动提交的, 不能回滚;</li> <li>如果开启一个事务, 没有设置保存点, 则默认回退到 事务开始的状态;</li> <li>一个事务中 可以创建多个 保存点, 事务在没有提交前, 可以回退到任何保存点;</li> <li>innodb 存储引擎可以使用 事务,  myisam 引擎不能使用事务;</li></ul></div> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">create</span> <span class="token keyword">table</span> test06 <span class="token punctuation">(</span>id <span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>name<span class="token punctuation">`</span></span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">32</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">-- 开启事务</span>
<span class="token keyword">start</span> <span class="token keyword">transaction</span><span class="token punctuation">;</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> test06 <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token string">'tom'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">-- 添加保存点 </span>
<span class="token keyword">savepoint</span> a<span class="token punctuation">;</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> test06 <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">,</span> <span class="token string">'jack'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">-- 添加保存点</span>
<span class="token keyword">savepoint</span> b<span class="token punctuation">;</span>

<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> test06<span class="token punctuation">;</span>

<span class="token comment">-- 回退到 a 保存点</span>
<span class="token keyword">rollback</span> <span class="token keyword">to</span> a<span class="token punctuation">;</span>

<span class="token comment">-- 回退全部</span>
<span class="token keyword">rollback</span><span class="token punctuation">;</span>

<span class="token comment">-- 提交事务</span>
<span class="token keyword">commit</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><h3 id="事务的隔离基本"><a href="#事务的隔离基本" class="header-anchor">#</a> 事务的隔离基本</h3> <blockquote><p>多个连接开启各自事务操作数据时,数据库系统要负责隔离操作, 以保证各个连接在获取数据时的准确性;</p></blockquote> <div class="custom-block tip"><p class="custom-block-title">提示</p> <ul><li>脏读 : 当一个事务读取另一个事务尚未提交的修改时, 产生脏读;</li> <li>不可重复读 : 同一查询在同一事务中多次进行, 由于其他提交事务所做的修改或删除, 每次返回不同的结果集, 此时发生不可重复读;</li> <li>幻读 : 同一查询在同一事务中多次进行, 由于其他提交事务所做的插入操作, 每次返回不同的结果集;</li></ul></div> <p>隔离级别:</p> <table><thead><tr><th>MySQL 隔离级别</th> <th>脏读</th> <th>不可重复读</th> <th>幻读</th> <th>加锁读</th></tr></thead> <tbody><tr><td>读未提交 (Read uncommitted)</td> <td>√</td> <td>√</td> <td>√</td> <td>不加锁</td></tr> <tr><td>读已提交 (Read committed)</td> <td>×</td> <td>√</td> <td>√</td> <td>不加锁</td></tr> <tr><td>可重复读 (Repeatable read) 默认</td> <td>×</td> <td>×</td> <td>×</td> <td>不加锁</td></tr> <tr><td>可串行化 (Serializable)</td> <td>×</td> <td>×</td> <td>×</td> <td>加锁</td></tr></tbody></table> <div class="custom-block warning"><p class="custom-block-title">注意</p> <p>MySQL 默认的事务级别为 repeatable read ( 可重复读), 一般情况下, 没有特殊要求, 没必要修改;</p></div> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 查询当前会话隔离级别</span>
<span class="token keyword">select</span> @<span class="token variable">@tx_isolation</span><span class="token punctuation">;</span>

<span class="token comment">-- 查看系统当前隔离级别</span>
<span class="token keyword">select</span> @<span class="token variable">@global.tx_isolation</span><span class="token punctuation">;</span>

<span class="token comment">-- 设置当前会话隔离级别</span>
<span class="token keyword">set</span> <span class="token keyword">session</span> <span class="token keyword">transaction</span> <span class="token keyword">isolation</span> <span class="token keyword">level</span> xxx<span class="token punctuation">;</span>

<span class="token comment">-- 设置系统当前隔离级别</span>
<span class="token keyword">set</span> <span class="token keyword">session</span> <span class="token keyword">transaction</span> <span class="token keyword">isolation</span> <span class="token keyword">level</span> xxx<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><div class="custom-block note"><p class="custom-block-title">笔记</p> <p>事务的 acid 特性:</p> <ul><li>原子性 (Atomicity) : 原子性是指事务是一个不可分割的工作单位, 事务中的操作要么都发生,要么都不发生;</li> <li>一致性 (Consistency) : 事务必须使数据库中一个一致性状态变换到另一个一致性状态;</li> <li>隔离性 (lsolation) : 多个用户并发访问数据库时, 数据库为每个用户开启的事务,不能被其他事务的操作数据所干扰,多个并发事务之间要相互隔离;</li> <li>持久性 (Duralility) : 一个事务一旦被提交,他对数据库中数据的改变时永久性的, 即使数据库发生故障,也不应该对其有影响;</li></ul></div> <h2 id="六-表类型和存储引擎"><a href="#六-表类型和存储引擎" class="header-anchor">#</a> 六.表类型和存储引擎</h2> <div class="custom-block tip"><p class="custom-block-title">提示</p> <ul><li>MySQL 的表类型用 存储引擎 (Storage Engines) 决定;
<ul><li>主要包括: MyISAM, innoDB, Memory 等;</li></ul></li> <li>MySQL 数据表主要支持六中类型:
<ul><li>CSV, Memory, ARCHIVE, MRG MYSIAM, MYISAM, lnnoBDB;</li></ul></li> <li>六中类型又分为两类:
<ul><li>事务安全型 : 如 lnnoDB;</li> <li>非事务安全型 : 如: mysiam, menory;</li></ul></li></ul></div> <div class="custom-block note"><p class="custom-block-title">笔记</p> <p>细节说明:</p> <ul><li>MyISAM : 不支持事务, 也不支持外键, 但访问速度快, 对事务完整性没有要求;</li> <li>InnoDB : 提供了具有提交, 回滚, 崩溃恢复能力的安全事务;
<ul><li>和 myisam 相比, 处理效率差一些并占用更多的磁盘空间以保留数据和索引;</li></ul></li> <li>MEMORY : 使用从头打内存中的内容来创建表, 每个 memory 表只实际对应一个磁盘文件;
<ul><li>访问非常快, 它的数据放在内存中, 并且默认使用 hash 索引;</li> <li>一旦服务关闭, 数据会全部丢失, 表结构还在;</li></ul></li></ul></div> <h2 id="七-视图"><a href="#七-视图" class="header-anchor">#</a> 七.视图</h2> <blockquote><p>视图 : 根据基表, 创建的一个虚拟表, 他实际没有数据, 只有结构文件;</p></blockquote> <div class="custom-block note"><p class="custom-block-title">笔记</p> <ul><li>视图是根据基表(可以是多个基表)来创建的;</li> <li>视图是虚拟表;</li> <li>通过视图可以修改基表的数据;</li> <li>基表的改变, 也会影响到视图的数据;</li></ul></div> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 创建视图</span>
<span class="token keyword">create</span> <span class="token keyword">view</span> 视图名 <span class="token keyword">as</span> <span class="token keyword">select</span> 列名 <span class="token keyword">from</span> 表名 <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>

<span class="token comment">-- 修改(更新)视图</span>
<span class="token keyword">alter</span> <span class="token keyword">view</span> 视图名 <span class="token keyword">as</span> <span class="token keyword">select</span> 语句

<span class="token comment">-- 查看创建视图的指令</span>
<span class="token keyword">show</span> <span class="token keyword">create</span> <span class="token keyword">view</span> 视图名<span class="token punctuation">;</span>

<span class="token comment">-- 删除视图</span>
<span class="token keyword">drop</span> <span class="token keyword">view</span> 视图名 <span class="token number">1</span><span class="token punctuation">,</span> 视图名 <span class="token number">2</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><div class="custom-block tip"><p class="custom-block-title">提示</p> <p>作用:</p> <ul><li>安全 : 某些字段数据不允许用户直接查看时, 可以创建视图表;</li> <li>性能 : 多个关联表查询繁琐时,可以使用视图表;</li> <li>灵活 : 旧表不能使用又无法废弃时,可以使用视图表, 已达到升级的目的;</li></ul></div> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- dept 部门表 (部门编号 deptno, 名称 dname, 所在城市 loc)</span>
<span class="token comment">-- emp 员工表 (编号 empon, 名字 ename, 工作 job, 上级编号 mgr, 入职时间 hiredate, 薪水 sal, 红利 comm, 部门编号 deptno)</span>
<span class="token comment">-- salgrade 工资级别表 (级别 grade, 最低工资 losal, 最高工资 hisal)</span>

<span class="token comment">-- 创建视图表, 可以显示 员工编号,名称,部门名称,薪水等级等 (三表联合查询)</span>
<span class="token keyword">create</span> <span class="token keyword">view</span> emp_view02 <span class="token keyword">as</span> 
	<span class="token keyword">select</span> empno<span class="token punctuation">,</span> ename<span class="token punctuation">,</span> dname<span class="token punctuation">,</span> grade <span class="token keyword">from</span> dept<span class="token punctuation">,</span> emp<span class="token punctuation">,</span>salgrade 
	<span class="token keyword">where</span> emp<span class="token punctuation">.</span>deptno <span class="token operator">=</span> dept<span class="token punctuation">.</span>deptno <span class="token operator">and</span> <span class="token punctuation">(</span>sal <span class="token operator">between</span> losal <span class="token operator">and</span>  hisal<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h2 id="八-mysql-用户管理"><a href="#八-mysql-用户管理" class="header-anchor">#</a> 八.MySQL 用户管理</h2> <div class="custom-block note"><p class="custom-block-title">笔记</p> <p>MySQL 数据库中的 user 表中存储了数据库的所有用户信息;</p> <ul><li>host 字段 存储了可以访问数据库的 ip 地址;</li> <li>user 字段 存储了用户名;</li> <li>authentication_string 字段存储了 经过 password() 方法加密后的 用户密码;</li></ul></div> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 创建用户</span>
<span class="token keyword">create</span> <span class="token keyword">user</span> <span class="token string">'用户名'</span><span class="token variable">@'允许登录的位置'</span>	identified <span class="token keyword">by</span> <span class="token string">'密码'</span>

<span class="token comment">-- 删除用户</span>
<span class="token keyword">drop</span> <span class="token keyword">user</span> <span class="token string">'用户名'</span><span class="token variable">@'允许登录的位置'</span><span class="token punctuation">;</span>

<span class="token comment">-- 修改自己的密码</span>
<span class="token keyword">set</span> password <span class="token operator">=</span> password<span class="token punctuation">(</span><span class="token string">'新密码'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">-- 修改别人的密码</span>
<span class="token keyword">set</span> password <span class="token keyword">for</span> <span class="token string">'用户名'</span><span class="token variable">@'允许登录的位置'</span> <span class="token operator">=</span> password<span class="token punctuation">(</span><span class="token string">'密码'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><div class="custom-block tip"><p class="custom-block-title">提示</p> <p>细节:</p> <ul><li>在创建用户时, 如果不指定 host, 则为 %, % 表示所有 ip 都可以连接数据库;</li> <li>create user 'xxx'@'192.186.1.%' : 表示 xxx 用户在 192.168.1.* 的 ip 都可以登录 mysql</li> <li>在删除用户时, 如果 host 不是 %, 则需要明确指定 '用户'@'host 值';</li></ul></div> <h3 id="用户权限"><a href="#用户权限" class="header-anchor">#</a> 用户权限</h3> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 授予权限</span>
<span class="token keyword">grant</span> 权限列表 <span class="token keyword">on</span> 库<span class="token punctuation">.</span>对象名 <span class="token keyword">to</span> <span class="token string">'用户名'</span><span class="token variable">@'登录位置'</span> <span class="token punctuation">[</span>identified <span class="token keyword">by</span> <span class="token string">'密码'</span><span class="token punctuation">]</span> 

<span class="token comment">-- 回收权限</span>
<span class="token keyword">revoke</span> 权限列表 <span class="token keyword">on</span> 库<span class="token punctuation">.</span>对象名 <span class="token keyword">from</span> <span class="token string">'用户名'</span><span class="token variable">@'登录位置'</span><span class="token punctuation">;</span>

<span class="token comment">-- 权限生效指令 (如果权限没有生效,可使用下面的指令)</span>
flush <span class="token keyword">privileges</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><div class="custom-block note"><p class="custom-block-title">笔记</p> <p>说明 :</p> <ul><li>权限列表, 多个权限用逗号分开
<ul><li>grant select on ...</li> <li>grant select, delete, create, on ...</li> <li>grant all [privileges] on ...  // 表示赋予该用户在该对象上的所有权限</li></ul></li> <li><em>.</em> : 表示本系统中的所有数据库的所有对象;</li> <li>库.* : 表示某个数据库中的所有对象;</li> <li>inentified by : 可以省略不写;
<ul><li>写出来, 如果该用户存在, 则修改该用户密码; 如果不存在, 则创建该用户</li></ul></li></ul></div> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 添加用户</span>
<span class="token keyword">create</span> <span class="token keyword">user</span> <span class="token string">'myroot'</span><span class="token variable">@'127.0.0.1'</span> identified <span class="token keyword">by</span> <span class="token string">'123456'</span><span class="token punctuation">;</span>

<span class="token comment">-- 添加权限</span>
<span class="token comment">-- grant 权限列表 on 库.对象名 to '用户名'@'登录位置' [identified by '密码'] </span>
<span class="token keyword">grant</span> <span class="token keyword">select</span><span class="token punctuation">,</span> <span class="token keyword">insert</span> <span class="token keyword">on</span> tmp<span class="token punctuation">.</span><span class="token operator">*</span> <span class="token keyword">to</span> <span class="token string">'myroot'</span><span class="token variable">@'127.0.0.1'</span><span class="token punctuation">;</span>

<span class="token comment">-- 回收权限</span>
<span class="token comment">-- revoke 权限列表 on 库.对象名 from '用户名'@'登录位置';</span>
<span class="token keyword">revoke</span> <span class="token keyword">insert</span> <span class="token keyword">on</span> tmp<span class="token punctuation">.</span><span class="token operator">*</span> <span class="token keyword">to</span> <span class="token string">'myroot'</span><span class="token variable">@'127.0.0.1'</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p><img src="https://pupper.com.cn/img/1655720449509-77037d08-2543-42b7-97f3-33ed8c7cc5b8.png" alt=""></p> <h2 id="案例-2"><a href="#案例-2" class="header-anchor">#</a> 案例</h2> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- dept 部门表 (部门编号 deptno, 名称 dname, 所在城市 loc)</span>
<span class="token comment">-- emp 员工表 (编号 empno, 名字 ename, 工作 job, 上级编号 mgr, 入职时间 hiredate, 薪水 sal, 红利 comm, 部门编号 deptno)</span>
<span class="token comment">-- salgrade 工资级别表 (级别 grade, 最低工资 losal, 最高工资 hisal)</span>

<span class="token comment">-- 3 显示所有部门名称</span>
<span class="token keyword">select</span> dname <span class="token keyword">from</span> dept<span class="token punctuation">;</span>
<span class="token comment">-- 显示所有员工年的收入 13 月</span>
<span class="token keyword">select</span> ename<span class="token punctuation">,</span> <span class="token punctuation">(</span>sal<span class="token operator">+</span>ifnull<span class="token punctuation">(</span>comm<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token number">13</span> <span class="token keyword">as</span> <span class="token string">'年收入'</span> <span class="token keyword">from</span> emp<span class="token punctuation">;</span>

<span class="token comment">-- 4 工资超过 2850 的员工</span>
<span class="token keyword">select</span> ename<span class="token punctuation">,</span> sal <span class="token keyword">from</span> emp <span class="token keyword">where</span> sal <span class="token operator">&gt;</span> <span class="token number">2850</span><span class="token punctuation">;</span>
<span class="token comment">-- 工资在 2850 ~ 1500 之间的员工 </span>
<span class="token keyword">select</span> ename<span class="token punctuation">,</span> sal <span class="token keyword">from</span> emp <span class="token keyword">where</span> sal <span class="token operator">&gt;</span> <span class="token number">2850</span> <span class="token operator">or</span> sal <span class="token operator">&lt;</span> <span class="token number">1500</span><span class="token punctuation">;</span>
<span class="token comment">-- 编号为 7566 的员工 </span>
<span class="token keyword">select</span> ename<span class="token punctuation">,</span> deptno <span class="token keyword">from</span> emp <span class="token keyword">where</span> empno <span class="token operator">=</span> <span class="token number">7566</span><span class="token punctuation">;</span>
<span class="token comment">-- 10 和 30 号部门, 工资超 1500 的员工</span>
<span class="token keyword">select</span> ename<span class="token punctuation">,</span> sal <span class="token keyword">from</span> emp <span class="token keyword">where</span> sal <span class="token operator">&gt;</span> <span class="token number">1500</span> <span class="token operator">and</span> deptno <span class="token operator">in</span> <span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">-- 无上级的员工</span>
<span class="token keyword">select</span> ename<span class="token punctuation">,</span> job <span class="token keyword">from</span> emp <span class="token keyword">where</span> mgr <span class="token operator">is</span> <span class="token boolean">null</span><span class="token punctuation">;</span>

<span class="token comment">-- 5 在 1991-2-1 和 1991-5-1 之间入职的员工 </span>
<span class="token keyword">select</span> ename<span class="token punctuation">,</span> job<span class="token punctuation">,</span> hiredate <span class="token keyword">from</span> emp <span class="token keyword">where</span> hiredate <span class="token operator">between</span> <span class="token string">'1991-2-1'</span> <span class="token operator">and</span> <span class="token string">'1991-5-1'</span> <span class="token keyword">order</span> <span class="token keyword">by</span> hiredate<span class="token punctuation">;</span>
<span class="token comment">-- 有补助的员工 </span>
<span class="token keyword">select</span> ename<span class="token punctuation">,</span> sal<span class="token punctuation">,</span> comm <span class="token keyword">from</span> emp <span class="token keyword">where</span> comm <span class="token operator">is</span> <span class="token operator">not</span> <span class="token boolean">null</span> <span class="token keyword">order</span> <span class="token keyword">by</span> sal<span class="token punctuation">;</span>

<span class="token comment">-- 6 部门 30 的员工</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> emp <span class="token keyword">where</span> deptno <span class="token operator">=</span> <span class="token number">30</span><span class="token punctuation">;</span>
<span class="token comment">-- 所有 工作为 CLERK 的员工</span>
<span class="token keyword">select</span> ename<span class="token punctuation">,</span> empno<span class="token punctuation">,</span> deptno <span class="token keyword">from</span> emp <span class="token keyword">where</span> job <span class="token operator">=</span> <span class="token string">'CLERK'</span><span class="token punctuation">;</span>
<span class="token comment">-- 佣金高于薪金的员工</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> emp <span class="token keyword">where</span> comm <span class="token operator">&gt;</span> sal<span class="token punctuation">;</span>
<span class="token comment">-- 佣金高于薪金 60%</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> emp <span class="token keyword">where</span> comm <span class="token operator">&gt;</span> <span class="token punctuation">(</span>sal <span class="token operator">*</span> <span class="token number">0.6</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">-- 部门 10 的 MANAGER 和 部门 20 的 CLERK</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> emp <span class="token keyword">where</span> <span class="token punctuation">(</span>deptno <span class="token operator">=</span> <span class="token number">10</span> <span class="token operator">and</span> job <span class="token operator">=</span> <span class="token string">'MANAGER'</span><span class="token punctuation">)</span> <span class="token operator">or</span> <span class="token punctuation">(</span>deptno <span class="token operator">=</span> <span class="token number">20</span> <span class="token operator">and</span> job <span class="token operator">=</span> <span class="token string">'CLERK'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">-- 部门 10 的 MANAGER 和 部门 20 的 CLERK 和 既不是 MANAGER 也不是 CLERK 且 工资大于 2000</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> emp 
	<span class="token keyword">where</span> <span class="token punctuation">(</span>deptno <span class="token operator">=</span> <span class="token number">10</span> <span class="token operator">and</span> job <span class="token operator">=</span> <span class="token string">'MANAGER'</span><span class="token punctuation">)</span> 
	<span class="token operator">or</span> <span class="token punctuation">(</span>deptno <span class="token operator">=</span> <span class="token number">20</span> <span class="token operator">and</span> job <span class="token operator">=</span> <span class="token string">'CLERK'</span><span class="token punctuation">)</span> 
	<span class="token operator">or</span> <span class="token punctuation">(</span>job <span class="token operator">not</span> <span class="token operator">in</span><span class="token punctuation">(</span><span class="token string">'MANAGER'</span><span class="token punctuation">,</span> <span class="token string">'CLERK'</span><span class="token punctuation">)</span> <span class="token operator">AND</span> sal <span class="token operator">&gt;=</span> <span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">-- 收取佣金的不同工作</span>
<span class="token keyword">select</span> <span class="token keyword">distinct</span> job <span class="token keyword">from</span> emp <span class="token keyword">where</span> comm <span class="token operator">is</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">;</span>
<span class="token comment">-- 不收取佣金或佣金少于 100</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> emp <span class="token keyword">where</span> comm <span class="token operator">is</span> <span class="token boolean">null</span> <span class="token operator">or</span> comm <span class="token operator">&lt;</span> <span class="token number">100</span><span class="token punctuation">;</span>
<span class="token comment">-- 每月倒数第三天入职的员工 </span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> emp <span class="token keyword">where</span> hiredate <span class="token operator">=</span> <span class="token punctuation">(</span>date_sub<span class="token punctuation">(</span>last_day<span class="token punctuation">(</span>hiredate<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token keyword">interval</span> <span class="token number">2</span> <span class="token keyword">day</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> emp <span class="token keyword">where</span> hiredate <span class="token operator">=</span> last_day<span class="token punctuation">(</span>hiredate<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">2</span><span class="token punctuation">;</span>
<span class="token comment">-- 早去 12 年前入职的员工</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> emp <span class="token keyword">where</span> date_add<span class="token punctuation">(</span>hiredate<span class="token punctuation">,</span> <span class="token keyword">interval</span> <span class="token number">12</span> <span class="token keyword">year</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">-- 首字母小写</span>
<span class="token keyword">select</span> concat<span class="token punctuation">(</span><span class="token function">lcase</span><span class="token punctuation">(</span><span class="token keyword">left</span><span class="token punctuation">(</span><span class="token identifier"><span class="token punctuation">`</span>ename<span class="token punctuation">`</span></span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>substring<span class="token punctuation">(</span><span class="token identifier"><span class="token punctuation">`</span>ename<span class="token punctuation">`</span></span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">from</span> emp<span class="token punctuation">;</span>
<span class="token comment">-- 名字前 5 个字母</span>
<span class="token keyword">select</span> <span class="token keyword">left</span><span class="token punctuation">(</span>ename<span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span> <span class="token keyword">from</span> emp<span class="token punctuation">;</span>
<span class="token comment">-- 名字不包含 R 的员工名字</span>
<span class="token keyword">select</span> ename <span class="token keyword">from</span> emp <span class="token keyword">where</span> ename <span class="token operator">not</span> <span class="token operator">like</span> <span class="token string">'%R%'</span><span class="token punctuation">;</span>
<span class="token comment">-- 员工名字前三个字符</span>
<span class="token keyword">select</span> substring<span class="token punctuation">(</span>ename<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span> <span class="token keyword">from</span> emp<span class="token punctuation">;</span>
<span class="token comment">-- 替换名字 a 替换 A</span>
<span class="token keyword">select</span> <span class="token keyword">replace</span><span class="token punctuation">(</span>ename<span class="token punctuation">,</span> <span class="token string">'A'</span><span class="token punctuation">,</span> <span class="token string">'a'</span><span class="token punctuation">)</span> <span class="token keyword">from</span> emp<span class="token punctuation">;</span>
<span class="token comment">-- 入职满 10 年的员工</span>
<span class="token keyword">select</span> ename<span class="token punctuation">,</span> hiredate <span class="token keyword">from</span> emp <span class="token keyword">where</span> date_add<span class="token punctuation">(</span>hiredate<span class="token punctuation">,</span> <span class="token keyword">interval</span> <span class="token number">10</span> <span class="token keyword">year</span><span class="token punctuation">)</span> <span class="token operator">&lt;=</span> <span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">-- 按名字排序</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> emp <span class="token keyword">order</span> <span class="token keyword">by</span> ename<span class="token punctuation">;</span>
<span class="token comment">-- 按入职年限排序</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> emp <span class="token keyword">order</span> <span class="token keyword">by</span> hiredate<span class="token punctuation">;</span>
<span class="token comment">-- 先按工作排序,再按工资排序</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> emp <span class="token keyword">order</span> <span class="token keyword">by</span> job <span class="token keyword">desc</span><span class="token punctuation">,</span>sal<span class="token punctuation">;</span>
<span class="token comment">-- 员工姓名,入职年份,月份, 先按月排序,再按年排序</span>
<span class="token keyword">select</span> ename<span class="token punctuation">,</span> <span class="token keyword">year</span><span class="token punctuation">(</span>hiredate<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">month</span><span class="token punctuation">(</span>hiredate<span class="token punctuation">)</span> <span class="token keyword">from</span> emp <span class="token keyword">order</span> <span class="token keyword">by</span> <span class="token keyword">month</span><span class="token punctuation">(</span>hiredate<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token keyword">year</span><span class="token punctuation">(</span>hiredate<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">-- 日薪</span>
<span class="token keyword">select</span> floor<span class="token punctuation">(</span>sal<span class="token operator">/</span><span class="token number">30</span><span class="token punctuation">)</span> <span class="token keyword">as</span> <span class="token string">'日薪'</span> <span class="token keyword">from</span> emp<span class="token punctuation">;</span>
<span class="token comment">-- 2 月入职</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> emp <span class="token keyword">where</span> <span class="token keyword">month</span><span class="token punctuation">(</span>hiredate<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
<span class="token comment">-- 入职天数</span>
<span class="token keyword">select</span> datediff<span class="token punctuation">(</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> hiredate<span class="token punctuation">)</span> <span class="token keyword">as</span> <span class="token string">'入职天数'</span> <span class="token keyword">from</span> emp<span class="token punctuation">;</span> 
<span class="token comment">-- 员工名字包含 A</span>
<span class="token keyword">select</span> ename <span class="token keyword">from</span> emp <span class="token keyword">where</span> ename <span class="token operator">like</span> <span class="token string">'%A%'</span><span class="token punctuation">;</span>
<span class="token comment">-- 日期方式显示入职时间</span>
<span class="token keyword">select</span> from_days<span class="token punctuation">(</span>datediff<span class="token punctuation">(</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> hiredate<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">as</span> <span class="token string">'服务天数'</span> <span class="token keyword">from</span> emp<span class="token punctuation">;</span> 

<span class="token comment">-- 7 至少有一个员工的部门 </span>
<span class="token keyword">select</span> dname <span class="token keyword">from</span> dept <span class="token keyword">where</span> deptno <span class="token operator">in</span> <span class="token punctuation">(</span><span class="token keyword">select</span> deptno <span class="token keyword">from</span> emp <span class="token keyword">group</span> <span class="token keyword">by</span> deptno<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">-- 薪资比 SMITH 多的员工</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> emp <span class="token keyword">where</span> sal <span class="token operator">&gt;</span> <span class="token punctuation">(</span><span class="token keyword">select</span> sal <span class="token keyword">from</span> emp <span class="token keyword">where</span> ename <span class="token operator">=</span> <span class="token string">'SMITH'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">-- 雇佣时间比上级晚的员工</span>
<span class="token keyword">select</span> emp<span class="token punctuation">.</span>ename<span class="token punctuation">,</span> emp<span class="token punctuation">.</span>hiredate <span class="token keyword">from</span> emp<span class="token punctuation">,</span> emp tmps <span class="token keyword">where</span> emp<span class="token punctuation">.</span>mgr <span class="token operator">=</span> tmps<span class="token punctuation">.</span>empno <span class="token operator">and</span> emp<span class="token punctuation">.</span>hiredate <span class="token operator">&gt;</span> tmps<span class="token punctuation">.</span>hiredate<span class="token punctuation">;</span>
<span class="token comment">-- 部门名称和员工信息,包括没有员工的部门 </span>
<span class="token keyword">select</span> dname<span class="token punctuation">,</span> emp<span class="token punctuation">.</span>deptno<span class="token punctuation">,</span> ename<span class="token punctuation">,</span> hiredate <span class="token keyword">from</span> dept <span class="token keyword">left</span> <span class="token keyword">join</span> emp <span class="token keyword">on</span> dept<span class="token punctuation">.</span>deptno <span class="token operator">=</span> emp<span class="token punctuation">.</span>deptno <span class="token keyword">order</span> <span class="token keyword">by</span> dname<span class="token punctuation">;</span>
<span class="token comment">-- 所有 工作为 CLERK 的员工姓名和 部门名称</span>
<span class="token keyword">select</span> ename<span class="token punctuation">,</span> dname<span class="token punctuation">,</span> job <span class="token keyword">from</span> dept<span class="token punctuation">,</span> emp <span class="token keyword">where</span> dept<span class="token punctuation">.</span>deptno <span class="token operator">=</span> emp<span class="token punctuation">.</span>deptno <span class="token operator">and</span> job <span class="token operator">=</span> <span class="token string">'CLERK'</span> <span class="token keyword">order</span> <span class="token keyword">by</span> dname<span class="token punctuation">;</span>
<span class="token comment">-- 最低薪资大于 1500 的工作</span>
<span class="token keyword">select</span>  job<span class="token punctuation">,</span> <span class="token function">min</span><span class="token punctuation">(</span>sal<span class="token punctuation">)</span> min_sal <span class="token keyword">from</span> emp <span class="token keyword">group</span> <span class="token keyword">by</span> job <span class="token keyword">having</span> min_sal <span class="token operator">&gt;</span> <span class="token number">1500</span><span class="token punctuation">;</span>
<span class="token comment">-- 在部门 sales 工作的员工</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> emp <span class="token keyword">where</span> deptno <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">select</span> deptno <span class="token keyword">from</span> dept <span class="token keyword">where</span> dname <span class="token operator">=</span> <span class="token string">'sales'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">-- 薪水高于平均工资的员工</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> emp <span class="token keyword">where</span> sal <span class="token operator">&gt;</span> <span class="token punctuation">(</span><span class="token keyword">select</span> <span class="token function">avg</span><span class="token punctuation">(</span>sal<span class="token punctuation">)</span> <span class="token keyword">from</span> emp<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">-- 与 SCOTT 工作相同的员工</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> emp <span class="token keyword">where</span> job <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">select</span> job <span class="token keyword">from</span> emp <span class="token keyword">where</span> ename <span class="token operator">=</span> <span class="token string">'SCOTT'</span><span class="token punctuation">)</span> <span class="token operator">and</span> ename <span class="token operator">&lt;&gt;</span> <span class="token string">'SCOTT'</span><span class="token punctuation">;</span>
<span class="token comment">-- 薪水高于 30 号部门所有员工 </span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> emp <span class="token keyword">where</span> sal <span class="token operator">&gt;</span> <span class="token punctuation">(</span><span class="token keyword">select</span> <span class="token function">max</span><span class="token punctuation">(</span>sal<span class="token punctuation">)</span> <span class="token keyword">from</span> emp <span class="token keyword">where</span> deptno <span class="token operator">=</span> <span class="token number">30</span><span class="token punctuation">)</span> <span class="token operator">and</span> deptno <span class="token operator">!=</span> <span class="token number">30</span><span class="token punctuation">;</span>
<span class="token comment">-- 每个部门的员工人数, 平均工资, 平均服务年限</span>
<span class="token keyword">select</span> <span class="token function">count</span><span class="token punctuation">(</span>empno<span class="token punctuation">)</span> <span class="token keyword">as</span> <span class="token string">'人数'</span><span class="token punctuation">,</span> <span class="token function">avg</span><span class="token punctuation">(</span>sal<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">format</span><span class="token punctuation">(</span><span class="token function">avg</span><span class="token punctuation">(</span>datediff<span class="token punctuation">(</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> hiredate<span class="token punctuation">)</span><span class="token operator">/</span><span class="token number">365</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token keyword">from</span> emp <span class="token keyword">group</span> <span class="token keyword">by</span> deptno<span class="token punctuation">;</span>
<span class="token comment">-- 所有员工的姓名,部门,工资</span>
<span class="token keyword">select</span> ename<span class="token punctuation">,</span> dname<span class="token punctuation">,</span> sal <span class="token keyword">from</span> dept<span class="token punctuation">,</span> emp <span class="token keyword">where</span> dept<span class="token punctuation">.</span>deptno <span class="token operator">=</span> emp<span class="token punctuation">.</span>deptno<span class="token punctuation">;</span>
<span class="token comment">-- 所有部门的详细信息及部门人数</span>
<span class="token keyword">select</span> dname<span class="token punctuation">,</span> <span class="token function">count</span><span class="token punctuation">(</span>dname<span class="token punctuation">)</span> <span class="token keyword">from</span> dept<span class="token punctuation">,</span> emp <span class="token keyword">where</span> dept<span class="token punctuation">.</span>deptno <span class="token operator">=</span> emp<span class="token punctuation">.</span>deptno <span class="token keyword">group</span> <span class="token keyword">by</span> dname<span class="token punctuation">;</span>
<span class="token comment">-- 各个工种的最低工资</span>
<span class="token keyword">select</span> job<span class="token punctuation">,</span> <span class="token function">min</span><span class="token punctuation">(</span>sal<span class="token punctuation">)</span> <span class="token keyword">from</span> emp <span class="token keyword">group</span> <span class="token keyword">by</span> job<span class="token punctuation">;</span>
<span class="token comment">--  MANAGER 的最低薪水</span>
<span class="token keyword">select</span> <span class="token function">min</span><span class="token punctuation">(</span>sal<span class="token punctuation">)</span> <span class="token keyword">from</span> emp <span class="token keyword">where</span> job <span class="token operator">=</span> <span class="token string">'MANAGER'</span><span class="token punctuation">;</span>
<span class="token comment">-- 计算年薪,升序排列</span>
<span class="token keyword">select</span> ename<span class="token punctuation">,</span> <span class="token punctuation">(</span>sal <span class="token operator">+</span> ifnull<span class="token punctuation">(</span>comm<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token number">12</span> <span class="token keyword">as</span> year_sal <span class="token keyword">from</span> emp <span class="token keyword">order</span> <span class="token keyword">by</span> year_sal<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br></div></div></div></div> <!----> <div class="page-edit"><div class="edit-link"><a href="https://github.com/Pupper0601/NodesCode.git/edit/master/docs/10.Java/01.Java 基础/16.Java - Mysql.md" target="_blank" rel="noopener noreferrer">编辑此页</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="tags"><a href="/tags/?tag=Mysql" title="标签">#Mysql</a></div> <div class="last-updated"><span class="prefix">更新时间:</span> <span class="time">2022/08/11, 17:51:50</span></div></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><a href="/pages/d8099d/" class="page-nav-centre page-nav-centre-prev"><div class="tooltip">Java - 反射</div></a> <a href="/pages/e448b0/" class="page-nav-centre page-nav-centre-next"><div class="tooltip">Java - JDBC、连接池</div></a></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/pages/d8099d/" class="prev">Java - 反射</a></span> <span class="next"><a href="/pages/e448b0/">Java - JDBC、连接池</a>→
      </span></p></div></div></div> <div class="article-list"><div class="article-title"><a href="/archives/" class="iconfont icon-bi">最近更新</a></div> <div class="article-wrapper"><dl><dd>01</dd> <dt><a href="/pages/5a05ee/"><div>
            Java - 知识体系
            <!----></div></a> <span class="date">11-24</span></dt></dl><dl><dd>02</dd> <dt><a href="/pages/c6cc8e/"><div>
            Python - 知识体系
            <!----></div></a> <span class="date">11-24</span></dt></dl><dl><dd>03</dd> <dt><a href="/pages/d2c1f9/"><div>
            MySQL - 知识体系
            <!----></div></a> <span class="date">11-24</span></dt></dl> <dl><dd></dd> <dt><a href="/archives/" class="more">更多文章&gt;</a></dt></dl></div></div></main></div> <div class="footer"><div class="icons"><a href="https://github.com/Pupper0601" title="GitHub" target="_blank" class="iconfont icon-github"></a><a href="https://pupper.cn" title="网站首页" target="_blank" class="iconfont icon-rss"></a><a href="pupper.cheng@gmail.com" title="联系我" target="_blank" class="iconfont icon-youjian"></a></div> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> 
    | Copyright © 2021-2022
    <span>Pupper  | blog<br> <a href="https://pupper.cn/" target="_blank"></a></span></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          跟随系统
        </li><li class="iconfont icon-rijianmoshi">
          浅色模式
        </li><li class="iconfont icon-yejianmoshi">
          深色模式
        </li><li class="iconfont icon-yuedu">
          阅读模式
        </li></ul></div></div> <div class="body-bg" style="background:url() center center / cover no-repeat;opacity:0.5;"></div> <!----> <!----></div><div class="global-ui"><div></div><div></div><div></div><div></div><div id="tcomment"></div><!----><div></div></div></div>
    <script src="/assets/js/app.cba83544.js" defer></script><script src="/assets/js/2.86abda09.js" defer></script><script src="/assets/js/62.c112c702.js" defer></script><script src="/assets/js/15.4790e0b5.js" defer></script><script src="/assets/js/5.2db27ac1.js" defer></script><script src="/assets/js/9.f86506f9.js" defer></script><script src="/assets/js/16.c670ed56.js" defer></script><script src="/assets/js/12.82446ed2.js" defer></script>
  </body>
</html>
